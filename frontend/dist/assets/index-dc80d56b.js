function p0(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Xh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Zh={exports:{}},sl={},ep={exports:{}},W={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xo=Symbol.for("react.element"),m0=Symbol.for("react.portal"),g0=Symbol.for("react.fragment"),y0=Symbol.for("react.strict_mode"),v0=Symbol.for("react.profiler"),x0=Symbol.for("react.provider"),S0=Symbol.for("react.context"),k0=Symbol.for("react.forward_ref"),w0=Symbol.for("react.suspense"),C0=Symbol.for("react.memo"),N0=Symbol.for("react.lazy"),xd=Symbol.iterator;function E0(t){return t===null||typeof t!="object"?null:(t=xd&&t[xd]||t["@@iterator"],typeof t=="function"?t:null)}var tp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},np=Object.assign,rp={};function li(t,e,n){this.props=t,this.context=e,this.refs=rp,this.updater=n||tp}li.prototype.isReactComponent={};li.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};li.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ip(){}ip.prototype=li.prototype;function Zu(t,e,n){this.props=t,this.context=e,this.refs=rp,this.updater=n||tp}var ec=Zu.prototype=new ip;ec.constructor=Zu;np(ec,li.prototype);ec.isPureReactComponent=!0;var Sd=Array.isArray,op=Object.prototype.hasOwnProperty,tc={current:null},sp={key:!0,ref:!0,__self:!0,__source:!0};function lp(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)op.call(e,r)&&!sp.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:xo,type:t,key:o,ref:s,props:i,_owner:tc.current}}function b0(t,e){return{$$typeof:xo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function nc(t){return typeof t=="object"&&t!==null&&t.$$typeof===xo}function T0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var kd=/\/+/g;function $l(t,e){return typeof t=="object"&&t!==null&&t.key!=null?T0(""+t.key):e.toString(36)}function rs(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case xo:case m0:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+$l(s,0):r,Sd(i)?(n="",t!=null&&(n=t.replace(kd,"$&/")+"/"),rs(i,e,n,"",function(u){return u})):i!=null&&(nc(i)&&(i=b0(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(kd,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Sd(t))for(var l=0;l<t.length;l++){o=t[l];var a=r+$l(o,l);s+=rs(o,e,n,a,i)}else if(a=E0(t),typeof a=="function")for(t=a.call(t),l=0;!(o=t.next()).done;)o=o.value,a=r+$l(o,l++),s+=rs(o,e,n,a,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Po(t,e,n){if(t==null)return t;var r=[],i=0;return rs(t,r,"","",function(o){return e.call(n,o,i++)}),r}function M0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ve={current:null},is={transition:null},O0={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:is,ReactCurrentOwner:tc};function ap(){throw Error("act(...) is not supported in production builds of React.")}W.Children={map:Po,forEach:function(t,e,n){Po(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Po(t,function(){e++}),e},toArray:function(t){return Po(t,function(e){return e})||[]},only:function(t){if(!nc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};W.Component=li;W.Fragment=g0;W.Profiler=v0;W.PureComponent=Zu;W.StrictMode=y0;W.Suspense=w0;W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O0;W.act=ap;W.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=np({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=tc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)op.call(e,a)&&!sp.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:xo,type:t.type,key:i,ref:o,props:r,_owner:s}};W.createContext=function(t){return t={$$typeof:S0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:x0,_context:t},t.Consumer=t};W.createElement=lp;W.createFactory=function(t){var e=lp.bind(null,t);return e.type=t,e};W.createRef=function(){return{current:null}};W.forwardRef=function(t){return{$$typeof:k0,render:t}};W.isValidElement=nc;W.lazy=function(t){return{$$typeof:N0,_payload:{_status:-1,_result:t},_init:M0}};W.memo=function(t,e){return{$$typeof:C0,type:t,compare:e===void 0?null:e}};W.startTransition=function(t){var e=is.transition;is.transition={};try{t()}finally{is.transition=e}};W.unstable_act=ap;W.useCallback=function(t,e){return Ve.current.useCallback(t,e)};W.useContext=function(t){return Ve.current.useContext(t)};W.useDebugValue=function(){};W.useDeferredValue=function(t){return Ve.current.useDeferredValue(t)};W.useEffect=function(t,e){return Ve.current.useEffect(t,e)};W.useId=function(){return Ve.current.useId()};W.useImperativeHandle=function(t,e,n){return Ve.current.useImperativeHandle(t,e,n)};W.useInsertionEffect=function(t,e){return Ve.current.useInsertionEffect(t,e)};W.useLayoutEffect=function(t,e){return Ve.current.useLayoutEffect(t,e)};W.useMemo=function(t,e){return Ve.current.useMemo(t,e)};W.useReducer=function(t,e,n){return Ve.current.useReducer(t,e,n)};W.useRef=function(t){return Ve.current.useRef(t)};W.useState=function(t){return Ve.current.useState(t)};W.useSyncExternalStore=function(t,e,n){return Ve.current.useSyncExternalStore(t,e,n)};W.useTransition=function(){return Ve.current.useTransition()};W.version="18.3.1";ep.exports=W;var b=ep.exports;const me=Xh(b),D0=p0({__proto__:null,default:me},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A0=b,P0=Symbol.for("react.element"),I0=Symbol.for("react.fragment"),R0=Object.prototype.hasOwnProperty,L0=A0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,z0={key:!0,ref:!0,__self:!0,__source:!0};function up(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)R0.call(e,r)&&!z0.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:P0,type:t,key:o,ref:s,props:i,_owner:L0.current}}sl.Fragment=I0;sl.jsx=up;sl.jsxs=up;Zh.exports=sl;var rc=Zh.exports;const La=rc.Fragment,S=rc.jsx,M=rc.jsxs;var za={},cp={exports:{}},rt={},dp={exports:{}},fp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,F){var V=I.length;I.push(F);e:for(;0<V;){var ie=V-1>>>1,he=I[ie];if(0<i(he,F))I[ie]=F,I[V]=he,V=ie;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var F=I[0],V=I.pop();if(V!==F){I[0]=V;e:for(var ie=0,he=I.length,Do=he>>>1;ie<Do;){var Fn=2*(ie+1)-1,Fl=I[Fn],$n=Fn+1,Ao=I[$n];if(0>i(Fl,V))$n<he&&0>i(Ao,Fl)?(I[ie]=Ao,I[$n]=V,ie=$n):(I[ie]=Fl,I[Fn]=V,ie=Fn);else if($n<he&&0>i(Ao,V))I[ie]=Ao,I[$n]=V,ie=$n;else break e}}return F}function i(I,F){var V=I.sortIndex-F.sortIndex;return V!==0?V:I.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var a=[],u=[],c=1,d=null,f=3,h=!1,p=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(I){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=I)r(u),F.sortIndex=F.expirationTime,e(a,F);else break;F=n(u)}}function w(I){if(m=!1,x(I),!p)if(n(a)!==null)p=!0,Jt(N);else{var F=n(u);F!==null&&vr(w,F.startTime-I)}}function N(I,F){p=!1,m&&(m=!1,g(k),k=-1),h=!0;var V=f;try{for(x(F),d=n(a);d!==null&&(!(d.expirationTime>F)||I&&!z());){var ie=d.callback;if(typeof ie=="function"){d.callback=null,f=d.priorityLevel;var he=ie(d.expirationTime<=F);F=t.unstable_now(),typeof he=="function"?d.callback=he:d===n(a)&&r(a),x(F)}else r(a);d=n(a)}if(d!==null)var Do=!0;else{var Fn=n(u);Fn!==null&&vr(w,Fn.startTime-F),Do=!1}return Do}finally{d=null,f=V,h=!1}}var E=!1,C=null,k=-1,A=5,T=-1;function z(){return!(t.unstable_now()-T<A)}function _(){if(C!==null){var I=t.unstable_now();T=I;var F=!0;try{F=C(!0,I)}finally{F?fe():(E=!1,C=null)}}else E=!1}var fe;if(typeof y=="function")fe=function(){y(_)};else if(typeof MessageChannel<"u"){var Rt=new MessageChannel,Oo=Rt.port2;Rt.port1.onmessage=_,fe=function(){Oo.postMessage(null)}}else fe=function(){v(_,0)};function Jt(I){C=I,E||(E=!0,fe())}function vr(I,F){k=v(function(){I(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,Jt(N))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(I){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var V=f;f=F;try{return I()}finally{f=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,F){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var V=f;f=I;try{return F()}finally{f=V}},t.unstable_scheduleCallback=function(I,F,V){var ie=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ie+V:ie):V=ie,I){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=V+he,I={id:c++,callback:F,priorityLevel:I,startTime:V,expirationTime:he,sortIndex:-1},V>ie?(I.sortIndex=V,e(u,I),n(a)===null&&I===n(u)&&(m?(g(k),k=-1):m=!0,vr(w,V-ie))):(I.sortIndex=he,e(a,I),p||h||(p=!0,Jt(N))),I},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(I){var F=f;return function(){var V=f;f=F;try{return I.apply(this,arguments)}finally{f=V}}}})(fp);dp.exports=fp;var B0=dp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _0=b,nt=B0;function D(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hp=new Set,Hi={};function pr(t,e){Gr(t,e),Gr(t+"Capture",e)}function Gr(t,e){for(Hi[t]=e,t=0;t<e.length;t++)hp.add(e[t])}var Wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ba=Object.prototype.hasOwnProperty,F0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wd={},Cd={};function $0(t){return Ba.call(Cd,t)?!0:Ba.call(wd,t)?!1:F0.test(t)?Cd[t]=!0:(wd[t]=!0,!1)}function V0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function j0(t,e,n,r){if(e===null||typeof e>"u"||V0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function je(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var be={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){be[t]=new je(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];be[e]=new je(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){be[t]=new je(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){be[t]=new je(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){be[t]=new je(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){be[t]=new je(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){be[t]=new je(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){be[t]=new je(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){be[t]=new je(t,5,!1,t.toLowerCase(),null,!1,!1)});var ic=/[\-:]([a-z])/g;function oc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ic,oc);be[e]=new je(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ic,oc);be[e]=new je(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ic,oc);be[e]=new je(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){be[t]=new je(t,1,!1,t.toLowerCase(),null,!1,!1)});be.xlinkHref=new je("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){be[t]=new je(t,1,!1,t.toLowerCase(),null,!0,!0)});function sc(t,e,n,r){var i=be.hasOwnProperty(e)?be[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(j0(e,n,i,r)&&(n=null),r||i===null?$0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gt=_0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Io=Symbol.for("react.element"),Er=Symbol.for("react.portal"),br=Symbol.for("react.fragment"),lc=Symbol.for("react.strict_mode"),_a=Symbol.for("react.profiler"),pp=Symbol.for("react.provider"),mp=Symbol.for("react.context"),ac=Symbol.for("react.forward_ref"),Fa=Symbol.for("react.suspense"),$a=Symbol.for("react.suspense_list"),uc=Symbol.for("react.memo"),Xt=Symbol.for("react.lazy"),gp=Symbol.for("react.offscreen"),Nd=Symbol.iterator;function hi(t){return t===null||typeof t!="object"?null:(t=Nd&&t[Nd]||t["@@iterator"],typeof t=="function"?t:null)}var te=Object.assign,Vl;function wi(t){if(Vl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Vl=e&&e[1]||""}return`
`+Vl+t}var jl=!1;function Hl(t,e){if(!t||jl)return"";jl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var a=`
`+i[s].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=s&&0<=l);break}}}finally{jl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wi(t):""}function H0(t){switch(t.tag){case 5:return wi(t.type);case 16:return wi("Lazy");case 13:return wi("Suspense");case 19:return wi("SuspenseList");case 0:case 2:case 15:return t=Hl(t.type,!1),t;case 11:return t=Hl(t.type.render,!1),t;case 1:return t=Hl(t.type,!0),t;default:return""}}function Va(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case br:return"Fragment";case Er:return"Portal";case _a:return"Profiler";case lc:return"StrictMode";case Fa:return"Suspense";case $a:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mp:return(t.displayName||"Context")+".Consumer";case pp:return(t._context.displayName||"Context")+".Provider";case ac:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case uc:return e=t.displayName||null,e!==null?e:Va(t.type)||"Memo";case Xt:e=t._payload,t=t._init;try{return Va(t(e))}catch{}}return null}function W0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Va(e);case 8:return e===lc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function U0(t){var e=yp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ro(t){t._valueTracker||(t._valueTracker=U0(t))}function vp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ss(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ja(t,e){var n=e.checked;return te({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ed(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Tn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xp(t,e){e=e.checked,e!=null&&sc(t,"checked",e,!1)}function Ha(t,e){xp(t,e);var n=Tn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wa(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wa(t,e.type,Tn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wa(t,e,n){(e!=="number"||Ss(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ci=Array.isArray;function Fr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Tn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ua(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return te({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Td(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(D(92));if(Ci(n)){if(1<n.length)throw Error(D(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Tn(n)}}function Sp(t,e){var n=Tn(e.value),r=Tn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Md(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qa(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lo,wp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lo=Lo||document.createElement("div"),Lo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Oi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},q0=["Webkit","ms","Moz","O"];Object.keys(Oi).forEach(function(t){q0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Oi[e]=Oi[t]})});function Cp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Oi.hasOwnProperty(t)&&Oi[t]?(""+e).trim():e+"px"}function Np(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Cp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var K0=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ka(t,e){if(e){if(K0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function Ga(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ja=null;function cc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qa=null,$r=null,Vr=null;function Od(t){if(t=wo(t)){if(typeof Qa!="function")throw Error(D(280));var e=t.stateNode;e&&(e=dl(e),Qa(t.stateNode,t.type,e))}}function Ep(t){$r?Vr?Vr.push(t):Vr=[t]:$r=t}function bp(){if($r){var t=$r,e=Vr;if(Vr=$r=null,Od(t),e)for(t=0;t<e.length;t++)Od(e[t])}}function Tp(t,e){return t(e)}function Mp(){}var Wl=!1;function Op(t,e,n){if(Wl)return t(e,n);Wl=!0;try{return Tp(t,e,n)}finally{Wl=!1,($r!==null||Vr!==null)&&(Mp(),bp())}}function Ui(t,e){var n=t.stateNode;if(n===null)return null;var r=dl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(D(231,e,typeof n));return n}var Ya=!1;if(Wt)try{var pi={};Object.defineProperty(pi,"passive",{get:function(){Ya=!0}}),window.addEventListener("test",pi,pi),window.removeEventListener("test",pi,pi)}catch{Ya=!1}function G0(t,e,n,r,i,o,s,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Di=!1,ks=null,ws=!1,Xa=null,J0={onError:function(t){Di=!0,ks=t}};function Q0(t,e,n,r,i,o,s,l,a){Di=!1,ks=null,G0.apply(J0,arguments)}function Y0(t,e,n,r,i,o,s,l,a){if(Q0.apply(this,arguments),Di){if(Di){var u=ks;Di=!1,ks=null}else throw Error(D(198));ws||(ws=!0,Xa=u)}}function mr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Dp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Dd(t){if(mr(t)!==t)throw Error(D(188))}function X0(t){var e=t.alternate;if(!e){if(e=mr(t),e===null)throw Error(D(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Dd(i),t;if(o===r)return Dd(i),e;o=o.sibling}throw Error(D(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?t:e}function Ap(t){return t=X0(t),t!==null?Pp(t):null}function Pp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Pp(t);if(e!==null)return e;t=t.sibling}return null}var Ip=nt.unstable_scheduleCallback,Ad=nt.unstable_cancelCallback,Z0=nt.unstable_shouldYield,e1=nt.unstable_requestPaint,oe=nt.unstable_now,t1=nt.unstable_getCurrentPriorityLevel,dc=nt.unstable_ImmediatePriority,Rp=nt.unstable_UserBlockingPriority,Cs=nt.unstable_NormalPriority,n1=nt.unstable_LowPriority,Lp=nt.unstable_IdlePriority,ll=null,Dt=null;function r1(t){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(ll,t,void 0,(t.current.flags&128)===128)}catch{}}var St=Math.clz32?Math.clz32:s1,i1=Math.log,o1=Math.LN2;function s1(t){return t>>>=0,t===0?32:31-(i1(t)/o1|0)|0}var zo=64,Bo=4194304;function Ni(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ns(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=Ni(l):(o&=s,o!==0&&(r=Ni(o)))}else s=n&~i,s!==0?r=Ni(s):o!==0&&(r=Ni(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-St(e),i=1<<n,r|=t[n],e&=~i;return r}function l1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function a1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-St(o),l=1<<s,a=i[s];a===-1?(!(l&n)||l&r)&&(i[s]=l1(l,e)):a<=e&&(t.expiredLanes|=l),o&=~l}}function Za(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zp(){var t=zo;return zo<<=1,!(zo&4194240)&&(zo=64),t}function Ul(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function So(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-St(e),t[e]=n}function u1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-St(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function fc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-St(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var q=0;function Bp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _p,hc,Fp,$p,Vp,eu=!1,_o=[],hn=null,pn=null,mn=null,qi=new Map,Ki=new Map,nn=[],c1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pd(t,e){switch(t){case"focusin":case"focusout":hn=null;break;case"dragenter":case"dragleave":pn=null;break;case"mouseover":case"mouseout":mn=null;break;case"pointerover":case"pointerout":qi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ki.delete(e.pointerId)}}function mi(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=wo(e),e!==null&&hc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function d1(t,e,n,r,i){switch(e){case"focusin":return hn=mi(hn,t,e,n,r,i),!0;case"dragenter":return pn=mi(pn,t,e,n,r,i),!0;case"mouseover":return mn=mi(mn,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return qi.set(o,mi(qi.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ki.set(o,mi(Ki.get(o)||null,t,e,n,r,i)),!0}return!1}function jp(t){var e=Un(t.target);if(e!==null){var n=mr(e);if(n!==null){if(e=n.tag,e===13){if(e=Dp(n),e!==null){t.blockedOn=e,Vp(t.priority,function(){Fp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ss(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=tu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ja=r,n.target.dispatchEvent(r),Ja=null}else return e=wo(n),e!==null&&hc(e),t.blockedOn=n,!1;e.shift()}return!0}function Id(t,e,n){ss(t)&&n.delete(e)}function f1(){eu=!1,hn!==null&&ss(hn)&&(hn=null),pn!==null&&ss(pn)&&(pn=null),mn!==null&&ss(mn)&&(mn=null),qi.forEach(Id),Ki.forEach(Id)}function gi(t,e){t.blockedOn===e&&(t.blockedOn=null,eu||(eu=!0,nt.unstable_scheduleCallback(nt.unstable_NormalPriority,f1)))}function Gi(t){function e(i){return gi(i,t)}if(0<_o.length){gi(_o[0],t);for(var n=1;n<_o.length;n++){var r=_o[n];r.blockedOn===t&&(r.blockedOn=null)}}for(hn!==null&&gi(hn,t),pn!==null&&gi(pn,t),mn!==null&&gi(mn,t),qi.forEach(e),Ki.forEach(e),n=0;n<nn.length;n++)r=nn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<nn.length&&(n=nn[0],n.blockedOn===null);)jp(n),n.blockedOn===null&&nn.shift()}var jr=Gt.ReactCurrentBatchConfig,Es=!0;function h1(t,e,n,r){var i=q,o=jr.transition;jr.transition=null;try{q=1,pc(t,e,n,r)}finally{q=i,jr.transition=o}}function p1(t,e,n,r){var i=q,o=jr.transition;jr.transition=null;try{q=4,pc(t,e,n,r)}finally{q=i,jr.transition=o}}function pc(t,e,n,r){if(Es){var i=tu(t,e,n,r);if(i===null)ta(t,e,r,bs,n),Pd(t,r);else if(d1(i,t,e,n,r))r.stopPropagation();else if(Pd(t,r),e&4&&-1<c1.indexOf(t)){for(;i!==null;){var o=wo(i);if(o!==null&&_p(o),o=tu(t,e,n,r),o===null&&ta(t,e,r,bs,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else ta(t,e,r,null,n)}}var bs=null;function tu(t,e,n,r){if(bs=null,t=cc(r),t=Un(t),t!==null)if(e=mr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Dp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bs=t,null}function Hp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(t1()){case dc:return 1;case Rp:return 4;case Cs:case n1:return 16;case Lp:return 536870912;default:return 16}default:return 16}}var ln=null,mc=null,ls=null;function Wp(){if(ls)return ls;var t,e=mc,n=e.length,r,i="value"in ln?ln.value:ln.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return ls=i.slice(t,1<r?1-r:void 0)}function as(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fo(){return!0}function Rd(){return!1}function it(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Fo:Rd,this.isPropagationStopped=Rd,this}return te(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fo)},persist:function(){},isPersistent:Fo}),e}var ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gc=it(ai),ko=te({},ai,{view:0,detail:0}),m1=it(ko),ql,Kl,yi,al=te({},ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yi&&(yi&&t.type==="mousemove"?(ql=t.screenX-yi.screenX,Kl=t.screenY-yi.screenY):Kl=ql=0,yi=t),ql)},movementY:function(t){return"movementY"in t?t.movementY:Kl}}),Ld=it(al),g1=te({},al,{dataTransfer:0}),y1=it(g1),v1=te({},ko,{relatedTarget:0}),Gl=it(v1),x1=te({},ai,{animationName:0,elapsedTime:0,pseudoElement:0}),S1=it(x1),k1=te({},ai,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),w1=it(k1),C1=te({},ai,{data:0}),zd=it(C1),N1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},E1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=b1[t])?!!e[t]:!1}function yc(){return T1}var M1=te({},ko,{key:function(t){if(t.key){var e=N1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=as(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?E1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yc,charCode:function(t){return t.type==="keypress"?as(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?as(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),O1=it(M1),D1=te({},al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bd=it(D1),A1=te({},ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yc}),P1=it(A1),I1=te({},ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),R1=it(I1),L1=te({},al,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),z1=it(L1),B1=[9,13,27,32],vc=Wt&&"CompositionEvent"in window,Ai=null;Wt&&"documentMode"in document&&(Ai=document.documentMode);var _1=Wt&&"TextEvent"in window&&!Ai,Up=Wt&&(!vc||Ai&&8<Ai&&11>=Ai),_d=String.fromCharCode(32),Fd=!1;function qp(t,e){switch(t){case"keyup":return B1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Tr=!1;function F1(t,e){switch(t){case"compositionend":return Kp(e);case"keypress":return e.which!==32?null:(Fd=!0,_d);case"textInput":return t=e.data,t===_d&&Fd?null:t;default:return null}}function $1(t,e){if(Tr)return t==="compositionend"||!vc&&qp(t,e)?(t=Wp(),ls=mc=ln=null,Tr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Up&&e.locale!=="ko"?null:e.data;default:return null}}var V1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $d(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!V1[t.type]:e==="textarea"}function Gp(t,e,n,r){Ep(r),e=Ts(e,"onChange"),0<e.length&&(n=new gc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Pi=null,Ji=null;function j1(t){om(t,0)}function ul(t){var e=Dr(t);if(vp(e))return t}function H1(t,e){if(t==="change")return e}var Jp=!1;if(Wt){var Jl;if(Wt){var Ql="oninput"in document;if(!Ql){var Vd=document.createElement("div");Vd.setAttribute("oninput","return;"),Ql=typeof Vd.oninput=="function"}Jl=Ql}else Jl=!1;Jp=Jl&&(!document.documentMode||9<document.documentMode)}function jd(){Pi&&(Pi.detachEvent("onpropertychange",Qp),Ji=Pi=null)}function Qp(t){if(t.propertyName==="value"&&ul(Ji)){var e=[];Gp(e,Ji,t,cc(t)),Op(j1,e)}}function W1(t,e,n){t==="focusin"?(jd(),Pi=e,Ji=n,Pi.attachEvent("onpropertychange",Qp)):t==="focusout"&&jd()}function U1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ul(Ji)}function q1(t,e){if(t==="click")return ul(e)}function K1(t,e){if(t==="input"||t==="change")return ul(e)}function G1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wt=typeof Object.is=="function"?Object.is:G1;function Qi(t,e){if(wt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ba.call(e,i)||!wt(t[i],e[i]))return!1}return!0}function Hd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wd(t,e){var n=Hd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hd(n)}}function Yp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Yp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Xp(){for(var t=window,e=Ss();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ss(t.document)}return e}function xc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function J1(t){var e=Xp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Yp(n.ownerDocument.documentElement,n)){if(r!==null&&xc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Wd(n,o);var s=Wd(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Q1=Wt&&"documentMode"in document&&11>=document.documentMode,Mr=null,nu=null,Ii=null,ru=!1;function Ud(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ru||Mr==null||Mr!==Ss(r)||(r=Mr,"selectionStart"in r&&xc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ii&&Qi(Ii,r)||(Ii=r,r=Ts(nu,"onSelect"),0<r.length&&(e=new gc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Mr)))}function $o(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Or={animationend:$o("Animation","AnimationEnd"),animationiteration:$o("Animation","AnimationIteration"),animationstart:$o("Animation","AnimationStart"),transitionend:$o("Transition","TransitionEnd")},Yl={},Zp={};Wt&&(Zp=document.createElement("div").style,"AnimationEvent"in window||(delete Or.animationend.animation,delete Or.animationiteration.animation,delete Or.animationstart.animation),"TransitionEvent"in window||delete Or.transitionend.transition);function cl(t){if(Yl[t])return Yl[t];if(!Or[t])return t;var e=Or[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Zp)return Yl[t]=e[n];return t}var em=cl("animationend"),tm=cl("animationiteration"),nm=cl("animationstart"),rm=cl("transitionend"),im=new Map,qd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function An(t,e){im.set(t,e),pr(e,[t])}for(var Xl=0;Xl<qd.length;Xl++){var Zl=qd[Xl],Y1=Zl.toLowerCase(),X1=Zl[0].toUpperCase()+Zl.slice(1);An(Y1,"on"+X1)}An(em,"onAnimationEnd");An(tm,"onAnimationIteration");An(nm,"onAnimationStart");An("dblclick","onDoubleClick");An("focusin","onFocus");An("focusout","onBlur");An(rm,"onTransitionEnd");Gr("onMouseEnter",["mouseout","mouseover"]);Gr("onMouseLeave",["mouseout","mouseover"]);Gr("onPointerEnter",["pointerout","pointerover"]);Gr("onPointerLeave",["pointerout","pointerover"]);pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pr("onBeforeInput",["compositionend","keypress","textInput","paste"]);pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ei="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ei));function Kd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Y0(r,e,void 0,t),t.currentTarget=null}function om(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==o&&i.isPropagationStopped())break e;Kd(i,l,u),o=a}else for(s=0;s<r.length;s++){if(l=r[s],a=l.instance,u=l.currentTarget,l=l.listener,a!==o&&i.isPropagationStopped())break e;Kd(i,l,u),o=a}}}if(ws)throw t=Xa,ws=!1,Xa=null,t}function J(t,e){var n=e[au];n===void 0&&(n=e[au]=new Set);var r=t+"__bubble";n.has(r)||(sm(e,t,2,!1),n.add(r))}function ea(t,e,n){var r=0;e&&(r|=4),sm(n,t,r,e)}var Vo="_reactListening"+Math.random().toString(36).slice(2);function Yi(t){if(!t[Vo]){t[Vo]=!0,hp.forEach(function(n){n!=="selectionchange"&&(Z1.has(n)||ea(n,!1,t),ea(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vo]||(e[Vo]=!0,ea("selectionchange",!1,e))}}function sm(t,e,n,r){switch(Hp(e)){case 1:var i=h1;break;case 4:i=p1;break;default:i=pc}n=i.bind(null,e,n,t),i=void 0,!Ya||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ta(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var a=s.tag;if((a===3||a===4)&&(a=s.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Un(l),s===null)return;if(a=s.tag,a===5||a===6){r=o=s;continue e}l=l.parentNode}}r=r.return}Op(function(){var u=o,c=cc(n),d=[];e:{var f=im.get(t);if(f!==void 0){var h=gc,p=t;switch(t){case"keypress":if(as(n)===0)break e;case"keydown":case"keyup":h=O1;break;case"focusin":p="focus",h=Gl;break;case"focusout":p="blur",h=Gl;break;case"beforeblur":case"afterblur":h=Gl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=y1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=P1;break;case em:case tm:case nm:h=S1;break;case rm:h=R1;break;case"scroll":h=m1;break;case"wheel":h=z1;break;case"copy":case"cut":case"paste":h=w1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Bd}var m=(e&4)!==0,v=!m&&t==="scroll",g=m?f!==null?f+"Capture":null:f;m=[];for(var y=u,x;y!==null;){x=y;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,g!==null&&(w=Ui(y,g),w!=null&&m.push(Xi(y,w,x)))),v)break;y=y.return}0<m.length&&(f=new h(f,p,null,n,c),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==Ja&&(p=n.relatedTarget||n.fromElement)&&(Un(p)||p[Ut]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?Un(p):null,p!==null&&(v=mr(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(m=Ld,w="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=Bd,w="onPointerLeave",g="onPointerEnter",y="pointer"),v=h==null?f:Dr(h),x=p==null?f:Dr(p),f=new m(w,y+"leave",h,n,c),f.target=v,f.relatedTarget=x,w=null,Un(c)===u&&(m=new m(g,y+"enter",p,n,c),m.target=x,m.relatedTarget=v,w=m),v=w,h&&p)t:{for(m=h,g=p,y=0,x=m;x;x=xr(x))y++;for(x=0,w=g;w;w=xr(w))x++;for(;0<y-x;)m=xr(m),y--;for(;0<x-y;)g=xr(g),x--;for(;y--;){if(m===g||g!==null&&m===g.alternate)break t;m=xr(m),g=xr(g)}m=null}else m=null;h!==null&&Gd(d,f,h,m,!1),p!==null&&v!==null&&Gd(d,v,p,m,!0)}}e:{if(f=u?Dr(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var N=H1;else if($d(f))if(Jp)N=K1;else{N=U1;var E=W1}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=q1);if(N&&(N=N(t,u))){Gp(d,N,n,c);break e}E&&E(t,f,u),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&Wa(f,"number",f.value)}switch(E=u?Dr(u):window,t){case"focusin":($d(E)||E.contentEditable==="true")&&(Mr=E,nu=u,Ii=null);break;case"focusout":Ii=nu=Mr=null;break;case"mousedown":ru=!0;break;case"contextmenu":case"mouseup":case"dragend":ru=!1,Ud(d,n,c);break;case"selectionchange":if(Q1)break;case"keydown":case"keyup":Ud(d,n,c)}var C;if(vc)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Tr?qp(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(Up&&n.locale!=="ko"&&(Tr||k!=="onCompositionStart"?k==="onCompositionEnd"&&Tr&&(C=Wp()):(ln=c,mc="value"in ln?ln.value:ln.textContent,Tr=!0)),E=Ts(u,k),0<E.length&&(k=new zd(k,t,null,n,c),d.push({event:k,listeners:E}),C?k.data=C:(C=Kp(n),C!==null&&(k.data=C)))),(C=_1?F1(t,n):$1(t,n))&&(u=Ts(u,"onBeforeInput"),0<u.length&&(c=new zd("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=C))}om(d,e)})}function Xi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ts(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ui(t,n),o!=null&&r.unshift(Xi(t,o,i)),o=Ui(t,e),o!=null&&r.push(Xi(t,o,i))),t=t.return}return r}function xr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gd(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=Ui(n,o),a!=null&&s.unshift(Xi(n,a,l))):i||(a=Ui(n,o),a!=null&&s.push(Xi(n,a,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var ev=/\r\n?/g,tv=/\u0000|\uFFFD/g;function Jd(t){return(typeof t=="string"?t:""+t).replace(ev,`
`).replace(tv,"")}function jo(t,e,n){if(e=Jd(e),Jd(t)!==e&&n)throw Error(D(425))}function Ms(){}var iu=null,ou=null;function su(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lu=typeof setTimeout=="function"?setTimeout:void 0,nv=typeof clearTimeout=="function"?clearTimeout:void 0,Qd=typeof Promise=="function"?Promise:void 0,rv=typeof queueMicrotask=="function"?queueMicrotask:typeof Qd<"u"?function(t){return Qd.resolve(null).then(t).catch(iv)}:lu;function iv(t){setTimeout(function(){throw t})}function na(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Gi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Gi(e)}function gn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ui=Math.random().toString(36).slice(2),Mt="__reactFiber$"+ui,Zi="__reactProps$"+ui,Ut="__reactContainer$"+ui,au="__reactEvents$"+ui,ov="__reactListeners$"+ui,sv="__reactHandles$"+ui;function Un(t){var e=t[Mt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ut]||n[Mt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Yd(t);t!==null;){if(n=t[Mt])return n;t=Yd(t)}return e}t=n,n=t.parentNode}return null}function wo(t){return t=t[Mt]||t[Ut],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Dr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(D(33))}function dl(t){return t[Zi]||null}var uu=[],Ar=-1;function Pn(t){return{current:t}}function Q(t){0>Ar||(t.current=uu[Ar],uu[Ar]=null,Ar--)}function G(t,e){Ar++,uu[Ar]=t.current,t.current=e}var Mn={},Pe=Pn(Mn),qe=Pn(!1),or=Mn;function Jr(t,e){var n=t.type.contextTypes;if(!n)return Mn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ke(t){return t=t.childContextTypes,t!=null}function Os(){Q(qe),Q(Pe)}function Xd(t,e,n){if(Pe.current!==Mn)throw Error(D(168));G(Pe,e),G(qe,n)}function lm(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(D(108,W0(t)||"Unknown",i));return te({},n,r)}function Ds(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mn,or=Pe.current,G(Pe,t),G(qe,qe.current),!0}function Zd(t,e,n){var r=t.stateNode;if(!r)throw Error(D(169));n?(t=lm(t,e,or),r.__reactInternalMemoizedMergedChildContext=t,Q(qe),Q(Pe),G(Pe,t)):Q(qe),G(qe,n)}var _t=null,fl=!1,ra=!1;function am(t){_t===null?_t=[t]:_t.push(t)}function lv(t){fl=!0,am(t)}function In(){if(!ra&&_t!==null){ra=!0;var t=0,e=q;try{var n=_t;for(q=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_t=null,fl=!1}catch(i){throw _t!==null&&(_t=_t.slice(t+1)),Ip(dc,In),i}finally{q=e,ra=!1}}return null}var Pr=[],Ir=0,As=null,Ps=0,st=[],lt=0,sr=null,Ft=1,$t="";function Vn(t,e){Pr[Ir++]=Ps,Pr[Ir++]=As,As=t,Ps=e}function um(t,e,n){st[lt++]=Ft,st[lt++]=$t,st[lt++]=sr,sr=t;var r=Ft;t=$t;var i=32-St(r)-1;r&=~(1<<i),n+=1;var o=32-St(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ft=1<<32-St(e)+i|n<<i|r,$t=o+t}else Ft=1<<o|n<<i|r,$t=t}function Sc(t){t.return!==null&&(Vn(t,1),um(t,1,0))}function kc(t){for(;t===As;)As=Pr[--Ir],Pr[Ir]=null,Ps=Pr[--Ir],Pr[Ir]=null;for(;t===sr;)sr=st[--lt],st[lt]=null,$t=st[--lt],st[lt]=null,Ft=st[--lt],st[lt]=null}var tt=null,Ze=null,X=!1,vt=null;function cm(t,e){var n=ut(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ef(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tt=t,Ze=gn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tt=t,Ze=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=sr!==null?{id:Ft,overflow:$t}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ut(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,tt=t,Ze=null,!0):!1;default:return!1}}function cu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function du(t){if(X){var e=Ze;if(e){var n=e;if(!ef(t,e)){if(cu(t))throw Error(D(418));e=gn(n.nextSibling);var r=tt;e&&ef(t,e)?cm(r,n):(t.flags=t.flags&-4097|2,X=!1,tt=t)}}else{if(cu(t))throw Error(D(418));t.flags=t.flags&-4097|2,X=!1,tt=t}}}function tf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tt=t}function Ho(t){if(t!==tt)return!1;if(!X)return tf(t),X=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!su(t.type,t.memoizedProps)),e&&(e=Ze)){if(cu(t))throw dm(),Error(D(418));for(;e;)cm(t,e),e=gn(e.nextSibling)}if(tf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(D(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ze=gn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ze=null}}else Ze=tt?gn(t.stateNode.nextSibling):null;return!0}function dm(){for(var t=Ze;t;)t=gn(t.nextSibling)}function Qr(){Ze=tt=null,X=!1}function wc(t){vt===null?vt=[t]:vt.push(t)}var av=Gt.ReactCurrentBatchConfig;function vi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,t))}return t}function Wo(t,e){throw t=Object.prototype.toString.call(e),Error(D(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function nf(t){var e=t._init;return e(t._payload)}function fm(t){function e(g,y){if(t){var x=g.deletions;x===null?(g.deletions=[y],g.flags|=16):x.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(g,y){return g=Sn(g,y),g.index=0,g.sibling=null,g}function o(g,y,x){return g.index=x,t?(x=g.alternate,x!==null?(x=x.index,x<y?(g.flags|=2,y):x):(g.flags|=2,y)):(g.flags|=1048576,y)}function s(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,y,x,w){return y===null||y.tag!==6?(y=ca(x,g.mode,w),y.return=g,y):(y=i(y,x),y.return=g,y)}function a(g,y,x,w){var N=x.type;return N===br?c(g,y,x.props.children,w,x.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Xt&&nf(N)===y.type)?(w=i(y,x.props),w.ref=vi(g,y,x),w.return=g,w):(w=ms(x.type,x.key,x.props,null,g.mode,w),w.ref=vi(g,y,x),w.return=g,w)}function u(g,y,x,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=da(x,g.mode,w),y.return=g,y):(y=i(y,x.children||[]),y.return=g,y)}function c(g,y,x,w,N){return y===null||y.tag!==7?(y=Xn(x,g.mode,w,N),y.return=g,y):(y=i(y,x),y.return=g,y)}function d(g,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ca(""+y,g.mode,x),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Io:return x=ms(y.type,y.key,y.props,null,g.mode,x),x.ref=vi(g,null,y),x.return=g,x;case Er:return y=da(y,g.mode,x),y.return=g,y;case Xt:var w=y._init;return d(g,w(y._payload),x)}if(Ci(y)||hi(y))return y=Xn(y,g.mode,x,null),y.return=g,y;Wo(g,y)}return null}function f(g,y,x,w){var N=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return N!==null?null:l(g,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Io:return x.key===N?a(g,y,x,w):null;case Er:return x.key===N?u(g,y,x,w):null;case Xt:return N=x._init,f(g,y,N(x._payload),w)}if(Ci(x)||hi(x))return N!==null?null:c(g,y,x,w,null);Wo(g,x)}return null}function h(g,y,x,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(x)||null,l(y,g,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Io:return g=g.get(w.key===null?x:w.key)||null,a(y,g,w,N);case Er:return g=g.get(w.key===null?x:w.key)||null,u(y,g,w,N);case Xt:var E=w._init;return h(g,y,x,E(w._payload),N)}if(Ci(w)||hi(w))return g=g.get(x)||null,c(y,g,w,N,null);Wo(y,w)}return null}function p(g,y,x,w){for(var N=null,E=null,C=y,k=y=0,A=null;C!==null&&k<x.length;k++){C.index>k?(A=C,C=null):A=C.sibling;var T=f(g,C,x[k],w);if(T===null){C===null&&(C=A);break}t&&C&&T.alternate===null&&e(g,C),y=o(T,y,k),E===null?N=T:E.sibling=T,E=T,C=A}if(k===x.length)return n(g,C),X&&Vn(g,k),N;if(C===null){for(;k<x.length;k++)C=d(g,x[k],w),C!==null&&(y=o(C,y,k),E===null?N=C:E.sibling=C,E=C);return X&&Vn(g,k),N}for(C=r(g,C);k<x.length;k++)A=h(C,g,k,x[k],w),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?k:A.key),y=o(A,y,k),E===null?N=A:E.sibling=A,E=A);return t&&C.forEach(function(z){return e(g,z)}),X&&Vn(g,k),N}function m(g,y,x,w){var N=hi(x);if(typeof N!="function")throw Error(D(150));if(x=N.call(x),x==null)throw Error(D(151));for(var E=N=null,C=y,k=y=0,A=null,T=x.next();C!==null&&!T.done;k++,T=x.next()){C.index>k?(A=C,C=null):A=C.sibling;var z=f(g,C,T.value,w);if(z===null){C===null&&(C=A);break}t&&C&&z.alternate===null&&e(g,C),y=o(z,y,k),E===null?N=z:E.sibling=z,E=z,C=A}if(T.done)return n(g,C),X&&Vn(g,k),N;if(C===null){for(;!T.done;k++,T=x.next())T=d(g,T.value,w),T!==null&&(y=o(T,y,k),E===null?N=T:E.sibling=T,E=T);return X&&Vn(g,k),N}for(C=r(g,C);!T.done;k++,T=x.next())T=h(C,g,k,T.value,w),T!==null&&(t&&T.alternate!==null&&C.delete(T.key===null?k:T.key),y=o(T,y,k),E===null?N=T:E.sibling=T,E=T);return t&&C.forEach(function(_){return e(g,_)}),X&&Vn(g,k),N}function v(g,y,x,w){if(typeof x=="object"&&x!==null&&x.type===br&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Io:e:{for(var N=x.key,E=y;E!==null;){if(E.key===N){if(N=x.type,N===br){if(E.tag===7){n(g,E.sibling),y=i(E,x.props.children),y.return=g,g=y;break e}}else if(E.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Xt&&nf(N)===E.type){n(g,E.sibling),y=i(E,x.props),y.ref=vi(g,E,x),y.return=g,g=y;break e}n(g,E);break}else e(g,E);E=E.sibling}x.type===br?(y=Xn(x.props.children,g.mode,w,x.key),y.return=g,g=y):(w=ms(x.type,x.key,x.props,null,g.mode,w),w.ref=vi(g,y,x),w.return=g,g=w)}return s(g);case Er:e:{for(E=x.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(g,y.sibling),y=i(y,x.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else e(g,y);y=y.sibling}y=da(x,g.mode,w),y.return=g,g=y}return s(g);case Xt:return E=x._init,v(g,y,E(x._payload),w)}if(Ci(x))return p(g,y,x,w);if(hi(x))return m(g,y,x,w);Wo(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(g,y.sibling),y=i(y,x),y.return=g,g=y):(n(g,y),y=ca(x,g.mode,w),y.return=g,g=y),s(g)):n(g,y)}return v}var Yr=fm(!0),hm=fm(!1),Is=Pn(null),Rs=null,Rr=null,Cc=null;function Nc(){Cc=Rr=Rs=null}function Ec(t){var e=Is.current;Q(Is),t._currentValue=e}function fu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hr(t,e){Rs=t,Cc=Rr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ue=!0),t.firstContext=null)}function ht(t){var e=t._currentValue;if(Cc!==t)if(t={context:t,memoizedValue:e,next:null},Rr===null){if(Rs===null)throw Error(D(308));Rr=t,Rs.dependencies={lanes:0,firstContext:t}}else Rr=Rr.next=t;return e}var qn=null;function bc(t){qn===null?qn=[t]:qn.push(t)}function pm(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,bc(e)):(n.next=i.next,i.next=n),e.interleaved=n,qt(t,r)}function qt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zt=!1;function Tc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,U&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,qt(t,n)}return i=r.interleaved,i===null?(e.next=e,bc(r)):(e.next=i.next,i.next=e),r.interleaved=e,qt(t,n)}function us(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fc(t,n)}}function rf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ls(t,e,n,r){var i=t.updateQueue;Zt=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,s===null?o=u:s.next=u,s=a;var c=t.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==s&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(o!==null){var d=i.baseState;s=0,c=u=a=null,l=o;do{var f=l.lane,h=l.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,m=l;switch(f=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=te({},d,f);break e;case 2:Zt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else h={eventTime:h,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=h,a=d):c=c.next=h,s|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(c===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);ar|=s,t.lanes=s,t.memoizedState=d}}function of(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(D(191,i));i.call(r)}}}var Co={},At=Pn(Co),eo=Pn(Co),to=Pn(Co);function Kn(t){if(t===Co)throw Error(D(174));return t}function Mc(t,e){switch(G(to,e),G(eo,t),G(At,Co),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qa(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qa(e,t)}Q(At),G(At,e)}function Xr(){Q(At),Q(eo),Q(to)}function gm(t){Kn(to.current);var e=Kn(At.current),n=qa(e,t.type);e!==n&&(G(eo,t),G(At,n))}function Oc(t){eo.current===t&&(Q(At),Q(eo))}var Z=Pn(0);function zs(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ia=[];function Dc(){for(var t=0;t<ia.length;t++)ia[t]._workInProgressVersionPrimary=null;ia.length=0}var cs=Gt.ReactCurrentDispatcher,oa=Gt.ReactCurrentBatchConfig,lr=0,ee=null,ce=null,pe=null,Bs=!1,Ri=!1,no=0,uv=0;function Te(){throw Error(D(321))}function Ac(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wt(t[n],e[n]))return!1;return!0}function Pc(t,e,n,r,i,o){if(lr=o,ee=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cs.current=t===null||t.memoizedState===null?hv:pv,t=n(r,i),Ri){o=0;do{if(Ri=!1,no=0,25<=o)throw Error(D(301));o+=1,pe=ce=null,e.updateQueue=null,cs.current=mv,t=n(r,i)}while(Ri)}if(cs.current=_s,e=ce!==null&&ce.next!==null,lr=0,pe=ce=ee=null,Bs=!1,e)throw Error(D(300));return t}function Ic(){var t=no!==0;return no=0,t}function bt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?ee.memoizedState=pe=t:pe=pe.next=t,pe}function pt(){if(ce===null){var t=ee.alternate;t=t!==null?t.memoizedState:null}else t=ce.next;var e=pe===null?ee.memoizedState:pe.next;if(e!==null)pe=e,ce=t;else{if(t===null)throw Error(D(310));ce=t,t={memoizedState:ce.memoizedState,baseState:ce.baseState,baseQueue:ce.baseQueue,queue:ce.queue,next:null},pe===null?ee.memoizedState=pe=t:pe=pe.next=t}return pe}function ro(t,e){return typeof e=="function"?e(t):e}function sa(t){var e=pt(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=ce,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,a=null,u=o;do{var c=u.lane;if((lr&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,s=r):a=a.next=d,ee.lanes|=c,ar|=c}u=u.next}while(u!==null&&u!==o);a===null?s=r:a.next=l,wt(r,e.memoizedState)||(Ue=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,ee.lanes|=o,ar|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function la(t){var e=pt(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);wt(o,e.memoizedState)||(Ue=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ym(){}function vm(t,e){var n=ee,r=pt(),i=e(),o=!wt(r.memoizedState,i);if(o&&(r.memoizedState=i,Ue=!0),r=r.queue,Rc(km.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||pe!==null&&pe.memoizedState.tag&1){if(n.flags|=2048,io(9,Sm.bind(null,n,r,i,e),void 0,null),ye===null)throw Error(D(349));lr&30||xm(n,e,i)}return i}function xm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ee.updateQueue,e===null?(e={lastEffect:null,stores:null},ee.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Sm(t,e,n,r){e.value=n,e.getSnapshot=r,wm(e)&&Cm(t)}function km(t,e,n){return n(function(){wm(e)&&Cm(t)})}function wm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wt(t,n)}catch{return!0}}function Cm(t){var e=qt(t,1);e!==null&&kt(e,t,1,-1)}function sf(t){var e=bt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:t},e.queue=t,t=t.dispatch=fv.bind(null,ee,t),[e.memoizedState,t]}function io(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ee.updateQueue,e===null?(e={lastEffect:null,stores:null},ee.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Nm(){return pt().memoizedState}function ds(t,e,n,r){var i=bt();ee.flags|=t,i.memoizedState=io(1|e,n,void 0,r===void 0?null:r)}function hl(t,e,n,r){var i=pt();r=r===void 0?null:r;var o=void 0;if(ce!==null){var s=ce.memoizedState;if(o=s.destroy,r!==null&&Ac(r,s.deps)){i.memoizedState=io(e,n,o,r);return}}ee.flags|=t,i.memoizedState=io(1|e,n,o,r)}function lf(t,e){return ds(8390656,8,t,e)}function Rc(t,e){return hl(2048,8,t,e)}function Em(t,e){return hl(4,2,t,e)}function bm(t,e){return hl(4,4,t,e)}function Tm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Mm(t,e,n){return n=n!=null?n.concat([t]):null,hl(4,4,Tm.bind(null,e,t),n)}function Lc(){}function Om(t,e){var n=pt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ac(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Dm(t,e){var n=pt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ac(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Am(t,e,n){return lr&21?(wt(n,e)||(n=zp(),ee.lanes|=n,ar|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ue=!0),t.memoizedState=n)}function cv(t,e){var n=q;q=n!==0&&4>n?n:4,t(!0);var r=oa.transition;oa.transition={};try{t(!1),e()}finally{q=n,oa.transition=r}}function Pm(){return pt().memoizedState}function dv(t,e,n){var r=xn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Im(t))Rm(e,n);else if(n=pm(t,e,n,r),n!==null){var i=ze();kt(n,t,r,i),Lm(n,e,r)}}function fv(t,e,n){var r=xn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Im(t))Rm(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,wt(l,s)){var a=e.interleaved;a===null?(i.next=i,bc(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=pm(t,e,i,r),n!==null&&(i=ze(),kt(n,t,r,i),Lm(n,e,r))}}function Im(t){var e=t.alternate;return t===ee||e!==null&&e===ee}function Rm(t,e){Ri=Bs=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Lm(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fc(t,n)}}var _s={readContext:ht,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useInsertionEffect:Te,useLayoutEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useMutableSource:Te,useSyncExternalStore:Te,useId:Te,unstable_isNewReconciler:!1},hv={readContext:ht,useCallback:function(t,e){return bt().memoizedState=[t,e===void 0?null:e],t},useContext:ht,useEffect:lf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ds(4194308,4,Tm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ds(4194308,4,t,e)},useInsertionEffect:function(t,e){return ds(4,2,t,e)},useMemo:function(t,e){var n=bt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=bt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=dv.bind(null,ee,t),[r.memoizedState,t]},useRef:function(t){var e=bt();return t={current:t},e.memoizedState=t},useState:sf,useDebugValue:Lc,useDeferredValue:function(t){return bt().memoizedState=t},useTransition:function(){var t=sf(!1),e=t[0];return t=cv.bind(null,t[1]),bt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ee,i=bt();if(X){if(n===void 0)throw Error(D(407));n=n()}else{if(n=e(),ye===null)throw Error(D(349));lr&30||xm(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,lf(km.bind(null,r,o,t),[t]),r.flags|=2048,io(9,Sm.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=bt(),e=ye.identifierPrefix;if(X){var n=$t,r=Ft;n=(r&~(1<<32-St(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=no++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pv={readContext:ht,useCallback:Om,useContext:ht,useEffect:Rc,useImperativeHandle:Mm,useInsertionEffect:Em,useLayoutEffect:bm,useMemo:Dm,useReducer:sa,useRef:Nm,useState:function(){return sa(ro)},useDebugValue:Lc,useDeferredValue:function(t){var e=pt();return Am(e,ce.memoizedState,t)},useTransition:function(){var t=sa(ro)[0],e=pt().memoizedState;return[t,e]},useMutableSource:ym,useSyncExternalStore:vm,useId:Pm,unstable_isNewReconciler:!1},mv={readContext:ht,useCallback:Om,useContext:ht,useEffect:Rc,useImperativeHandle:Mm,useInsertionEffect:Em,useLayoutEffect:bm,useMemo:Dm,useReducer:la,useRef:Nm,useState:function(){return la(ro)},useDebugValue:Lc,useDeferredValue:function(t){var e=pt();return ce===null?e.memoizedState=t:Am(e,ce.memoizedState,t)},useTransition:function(){var t=la(ro)[0],e=pt().memoizedState;return[t,e]},useMutableSource:ym,useSyncExternalStore:vm,useId:Pm,unstable_isNewReconciler:!1};function gt(t,e){if(t&&t.defaultProps){e=te({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function hu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:te({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var pl={isMounted:function(t){return(t=t._reactInternals)?mr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ze(),i=xn(t),o=jt(r,i);o.payload=e,n!=null&&(o.callback=n),e=yn(t,o,i),e!==null&&(kt(e,t,i,r),us(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ze(),i=xn(t),o=jt(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=yn(t,o,i),e!==null&&(kt(e,t,i,r),us(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ze(),r=xn(t),i=jt(n,r);i.tag=2,e!=null&&(i.callback=e),e=yn(t,i,r),e!==null&&(kt(e,t,r,n),us(e,t,r))}};function af(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Qi(n,r)||!Qi(i,o):!0}function zm(t,e,n){var r=!1,i=Mn,o=e.contextType;return typeof o=="object"&&o!==null?o=ht(o):(i=Ke(e)?or:Pe.current,r=e.contextTypes,o=(r=r!=null)?Jr(t,i):Mn),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function uf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&pl.enqueueReplaceState(e,e.state,null)}function pu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Tc(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ht(o):(o=Ke(e)?or:Pe.current,i.context=Jr(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(hu(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&pl.enqueueReplaceState(i,i.state,null),Ls(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Zr(t,e){try{var n="",r=e;do n+=H0(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function aa(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gv=typeof WeakMap=="function"?WeakMap:Map;function Bm(t,e,n){n=jt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$s||($s=!0,Eu=r),mu(t,e)},n}function _m(t,e,n){n=jt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){mu(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){mu(t,e),typeof r!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function cf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new gv;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Dv.bind(null,t,e,n),e.then(t,t))}function df(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ff(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=jt(-1,1),e.tag=2,yn(n,e,1))),n.lanes|=1),t)}var yv=Gt.ReactCurrentOwner,Ue=!1;function Le(t,e,n,r){e.child=t===null?hm(e,null,n,r):Yr(e,t.child,n,r)}function hf(t,e,n,r,i){n=n.render;var o=e.ref;return Hr(e,i),r=Pc(t,e,n,r,o,i),n=Ic(),t!==null&&!Ue?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Kt(t,e,i)):(X&&n&&Sc(e),e.flags|=1,Le(t,e,r,i),e.child)}function pf(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Hc(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Fm(t,e,o,r,i)):(t=ms(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Qi,n(s,r)&&t.ref===e.ref)return Kt(t,e,i)}return e.flags|=1,t=Sn(o,r),t.ref=e.ref,t.return=e,e.child=t}function Fm(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Qi(o,r)&&t.ref===e.ref)if(Ue=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Ue=!0);else return e.lanes=t.lanes,Kt(t,e,i)}return gu(t,e,n,r,i)}function $m(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(zr,Ye),Ye|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,G(zr,Ye),Ye|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,G(zr,Ye),Ye|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,G(zr,Ye),Ye|=r;return Le(t,e,i,n),e.child}function Vm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gu(t,e,n,r,i){var o=Ke(n)?or:Pe.current;return o=Jr(e,o),Hr(e,i),n=Pc(t,e,n,r,o,i),r=Ic(),t!==null&&!Ue?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Kt(t,e,i)):(X&&r&&Sc(e),e.flags|=1,Le(t,e,n,i),e.child)}function mf(t,e,n,r,i){if(Ke(n)){var o=!0;Ds(e)}else o=!1;if(Hr(e,i),e.stateNode===null)fs(t,e),zm(e,n,r),pu(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var a=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=ht(u):(u=Ke(n)?or:Pe.current,u=Jr(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||a!==u)&&uf(e,s,r,u),Zt=!1;var f=e.memoizedState;s.state=f,Ls(e,r,s,i),a=e.memoizedState,l!==r||f!==a||qe.current||Zt?(typeof c=="function"&&(hu(e,n,c,r),a=e.memoizedState),(l=Zt||af(e,n,l,r,f,a,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),s.props=r,s.state=a,s.context=u,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,mm(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:gt(e.type,l),s.props=u,d=e.pendingProps,f=s.context,a=n.contextType,typeof a=="object"&&a!==null?a=ht(a):(a=Ke(n)?or:Pe.current,a=Jr(e,a));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==d||f!==a)&&uf(e,s,r,a),Zt=!1,f=e.memoizedState,s.state=f,Ls(e,r,s,i);var p=e.memoizedState;l!==d||f!==p||qe.current||Zt?(typeof h=="function"&&(hu(e,n,h,r),p=e.memoizedState),(u=Zt||af(e,n,u,r,f,p,a)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,a),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,a)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=a,r=u):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return yu(t,e,n,r,o,i)}function yu(t,e,n,r,i,o){Vm(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Zd(e,n,!1),Kt(t,e,o);r=e.stateNode,yv.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Yr(e,t.child,null,o),e.child=Yr(e,null,l,o)):Le(t,e,l,o),e.memoizedState=r.state,i&&Zd(e,n,!0),e.child}function jm(t){var e=t.stateNode;e.pendingContext?Xd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xd(t,e.context,!1),Mc(t,e.containerInfo)}function gf(t,e,n,r,i){return Qr(),wc(i),e.flags|=256,Le(t,e,n,r),e.child}var vu={dehydrated:null,treeContext:null,retryLane:0};function xu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Hm(t,e,n){var r=e.pendingProps,i=Z.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),G(Z,i&1),t===null)return du(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=yl(s,r,0,null),t=Xn(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=xu(n),e.memoizedState=vu,t):zc(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return vv(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Sn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=Sn(l,o):(o=Xn(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?xu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=vu,r}return o=t.child,t=o.sibling,r=Sn(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zc(t,e){return e=yl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Uo(t,e,n,r){return r!==null&&wc(r),Yr(e,t.child,null,n),t=zc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vv(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=aa(Error(D(422))),Uo(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=yl({mode:"visible",children:r.children},i,0,null),o=Xn(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Yr(e,t.child,null,s),e.child.memoizedState=xu(s),e.memoizedState=vu,o);if(!(e.mode&1))return Uo(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(D(419)),r=aa(o,r,void 0),Uo(t,e,s,r)}if(l=(s&t.childLanes)!==0,Ue||l){if(r=ye,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,qt(t,i),kt(r,t,i,-1))}return jc(),r=aa(Error(D(421))),Uo(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Av.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Ze=gn(i.nextSibling),tt=e,X=!0,vt=null,t!==null&&(st[lt++]=Ft,st[lt++]=$t,st[lt++]=sr,Ft=t.id,$t=t.overflow,sr=e),e=zc(e,r.children),e.flags|=4096,e)}function yf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fu(t.return,e,n)}function ua(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Wm(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Le(t,e,r.children,n),r=Z.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yf(t,n,e);else if(t.tag===19)yf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(G(Z,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&zs(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ua(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&zs(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ua(e,!0,n,null,o);break;case"together":ua(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Kt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ar|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(D(153));if(e.child!==null){for(t=e.child,n=Sn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Sn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xv(t,e,n){switch(e.tag){case 3:jm(e),Qr();break;case 5:gm(e);break;case 1:Ke(e.type)&&Ds(e);break;case 4:Mc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;G(Is,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(G(Z,Z.current&1),e.flags|=128,null):n&e.child.childLanes?Hm(t,e,n):(G(Z,Z.current&1),t=Kt(t,e,n),t!==null?t.sibling:null);G(Z,Z.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Wm(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),G(Z,Z.current),r)break;return null;case 22:case 23:return e.lanes=0,$m(t,e,n)}return Kt(t,e,n)}var Um,Su,qm,Km;Um=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Su=function(){};qm=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Kn(At.current);var o=null;switch(n){case"input":i=ja(t,i),r=ja(t,r),o=[];break;case"select":i=te({},i,{value:void 0}),r=te({},r,{value:void 0}),o=[];break;case"textarea":i=Ua(t,i),r=Ua(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ms)}Ka(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Hi.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in a)a.hasOwnProperty(s)&&l[s]!==a[s]&&(n||(n={}),n[s]=a[s])}else n||(o||(o=[]),o.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(o=o||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Hi.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&J("scroll",t),o||l===a||(o=[])):(o=o||[]).push(u,a))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};Km=function(t,e,n,r){n!==r&&(e.flags|=4)};function xi(t,e){if(!X)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Me(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Sv(t,e,n){var r=e.pendingProps;switch(kc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(e),null;case 1:return Ke(e.type)&&Os(),Me(e),null;case 3:return r=e.stateNode,Xr(),Q(qe),Q(Pe),Dc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ho(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vt!==null&&(Mu(vt),vt=null))),Su(t,e),Me(e),null;case 5:Oc(e);var i=Kn(to.current);if(n=e.type,t!==null&&e.stateNode!=null)qm(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(D(166));return Me(e),null}if(t=Kn(At.current),Ho(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Mt]=e,r[Zi]=o,t=(e.mode&1)!==0,n){case"dialog":J("cancel",r),J("close",r);break;case"iframe":case"object":case"embed":J("load",r);break;case"video":case"audio":for(i=0;i<Ei.length;i++)J(Ei[i],r);break;case"source":J("error",r);break;case"img":case"image":case"link":J("error",r),J("load",r);break;case"details":J("toggle",r);break;case"input":Ed(r,o),J("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},J("invalid",r);break;case"textarea":Td(r,o),J("invalid",r)}Ka(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&jo(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&jo(r.textContent,l,t),i=["children",""+l]):Hi.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&J("scroll",r)}switch(n){case"input":Ro(r),bd(r,o,!0);break;case"textarea":Ro(r),Md(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ms)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Mt]=e,t[Zi]=r,Um(t,e,!1,!1),e.stateNode=t;e:{switch(s=Ga(n,r),n){case"dialog":J("cancel",t),J("close",t),i=r;break;case"iframe":case"object":case"embed":J("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ei.length;i++)J(Ei[i],t);i=r;break;case"source":J("error",t),i=r;break;case"img":case"image":case"link":J("error",t),J("load",t),i=r;break;case"details":J("toggle",t),i=r;break;case"input":Ed(t,r),i=ja(t,r),J("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=te({},r,{value:void 0}),J("invalid",t);break;case"textarea":Td(t,r),i=Ua(t,r),J("invalid",t);break;default:i=r}Ka(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="style"?Np(t,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&wp(t,a)):o==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Wi(t,a):typeof a=="number"&&Wi(t,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Hi.hasOwnProperty(o)?a!=null&&o==="onScroll"&&J("scroll",t):a!=null&&sc(t,o,a,s))}switch(n){case"input":Ro(t),bd(t,r,!1);break;case"textarea":Ro(t),Md(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Tn(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Fr(t,!!r.multiple,o,!1):r.defaultValue!=null&&Fr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ms)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Me(e),null;case 6:if(t&&e.stateNode!=null)Km(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(D(166));if(n=Kn(to.current),Kn(At.current),Ho(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mt]=e,(o=r.nodeValue!==n)&&(t=tt,t!==null))switch(t.tag){case 3:jo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jo(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mt]=e,e.stateNode=r}return Me(e),null;case 13:if(Q(Z),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(X&&Ze!==null&&e.mode&1&&!(e.flags&128))dm(),Qr(),e.flags|=98560,o=!1;else if(o=Ho(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(D(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(D(317));o[Mt]=e}else Qr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Me(e),o=!1}else vt!==null&&(Mu(vt),vt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Z.current&1?de===0&&(de=3):jc())),e.updateQueue!==null&&(e.flags|=4),Me(e),null);case 4:return Xr(),Su(t,e),t===null&&Yi(e.stateNode.containerInfo),Me(e),null;case 10:return Ec(e.type._context),Me(e),null;case 17:return Ke(e.type)&&Os(),Me(e),null;case 19:if(Q(Z),o=e.memoizedState,o===null)return Me(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)xi(o,!1);else{if(de!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=zs(t),s!==null){for(e.flags|=128,xi(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return G(Z,Z.current&1|2),e.child}t=t.sibling}o.tail!==null&&oe()>ei&&(e.flags|=128,r=!0,xi(o,!1),e.lanes=4194304)}else{if(!r)if(t=zs(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),xi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!X)return Me(e),null}else 2*oe()-o.renderingStartTime>ei&&n!==1073741824&&(e.flags|=128,r=!0,xi(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=oe(),e.sibling=null,n=Z.current,G(Z,r?n&1|2:n&1),e):(Me(e),null);case 22:case 23:return Vc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ye&1073741824&&(Me(e),e.subtreeFlags&6&&(e.flags|=8192)):Me(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function kv(t,e){switch(kc(e),e.tag){case 1:return Ke(e.type)&&Os(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xr(),Q(qe),Q(Pe),Dc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Oc(e),null;case 13:if(Q(Z),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(D(340));Qr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Q(Z),null;case 4:return Xr(),null;case 10:return Ec(e.type._context),null;case 22:case 23:return Vc(),null;case 24:return null;default:return null}}var qo=!1,De=!1,wv=typeof WeakSet=="function"?WeakSet:Set,R=null;function Lr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ne(t,e,r)}else n.current=null}function ku(t,e,n){try{n()}catch(r){ne(t,e,r)}}var vf=!1;function Cv(t,e){if(iu=Es,t=Xp(),xc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,a=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(l=s+i),d!==o||r!==0&&d.nodeType!==3||(a=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++u===i&&(l=s),f===o&&++c===r&&(a=s),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(ou={focusedElem:t,selectionRange:n},Es=!1,R=e;R!==null;)if(e=R,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,R=t;else for(;R!==null;){e=R;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,v=p.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:gt(e.type,m),v);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(w){ne(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}return p=vf,vf=!1,p}function Li(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&ku(e,n,o)}i=i.next}while(i!==r)}}function ml(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function wu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Gm(t){var e=t.alternate;e!==null&&(t.alternate=null,Gm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mt],delete e[Zi],delete e[au],delete e[ov],delete e[sv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Jm(t){return t.tag===5||t.tag===3||t.tag===4}function xf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ms));else if(r!==4&&(t=t.child,t!==null))for(Cu(t,e,n),t=t.sibling;t!==null;)Cu(t,e,n),t=t.sibling}function Nu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Nu(t,e,n),t=t.sibling;t!==null;)Nu(t,e,n),t=t.sibling}var ke=null,yt=!1;function Qt(t,e,n){for(n=n.child;n!==null;)Qm(t,e,n),n=n.sibling}function Qm(t,e,n){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(ll,n)}catch{}switch(n.tag){case 5:De||Lr(n,e);case 6:var r=ke,i=yt;ke=null,Qt(t,e,n),ke=r,yt=i,ke!==null&&(yt?(t=ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ke.removeChild(n.stateNode));break;case 18:ke!==null&&(yt?(t=ke,n=n.stateNode,t.nodeType===8?na(t.parentNode,n):t.nodeType===1&&na(t,n),Gi(t)):na(ke,n.stateNode));break;case 4:r=ke,i=yt,ke=n.stateNode.containerInfo,yt=!0,Qt(t,e,n),ke=r,yt=i;break;case 0:case 11:case 14:case 15:if(!De&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&ku(n,e,s),i=i.next}while(i!==r)}Qt(t,e,n);break;case 1:if(!De&&(Lr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ne(n,e,l)}Qt(t,e,n);break;case 21:Qt(t,e,n);break;case 22:n.mode&1?(De=(r=De)||n.memoizedState!==null,Qt(t,e,n),De=r):Qt(t,e,n);break;default:Qt(t,e,n)}}function Sf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wv),e.forEach(function(r){var i=Pv.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function mt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:ke=l.stateNode,yt=!1;break e;case 3:ke=l.stateNode.containerInfo,yt=!0;break e;case 4:ke=l.stateNode.containerInfo,yt=!0;break e}l=l.return}if(ke===null)throw Error(D(160));Qm(o,s,i),ke=null,yt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){ne(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ym(e,t),e=e.sibling}function Ym(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mt(e,t),Et(t),r&4){try{Li(3,t,t.return),ml(3,t)}catch(m){ne(t,t.return,m)}try{Li(5,t,t.return)}catch(m){ne(t,t.return,m)}}break;case 1:mt(e,t),Et(t),r&512&&n!==null&&Lr(n,n.return);break;case 5:if(mt(e,t),Et(t),r&512&&n!==null&&Lr(n,n.return),t.flags&32){var i=t.stateNode;try{Wi(i,"")}catch(m){ne(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&xp(i,o),Ga(l,s);var u=Ga(l,o);for(s=0;s<a.length;s+=2){var c=a[s],d=a[s+1];c==="style"?Np(i,d):c==="dangerouslySetInnerHTML"?wp(i,d):c==="children"?Wi(i,d):sc(i,c,d,u)}switch(l){case"input":Ha(i,o);break;case"textarea":Sp(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Fr(i,!!o.multiple,h,!1):f!==!!o.multiple&&(o.defaultValue!=null?Fr(i,!!o.multiple,o.defaultValue,!0):Fr(i,!!o.multiple,o.multiple?[]:"",!1))}i[Zi]=o}catch(m){ne(t,t.return,m)}}break;case 6:if(mt(e,t),Et(t),r&4){if(t.stateNode===null)throw Error(D(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(m){ne(t,t.return,m)}}break;case 3:if(mt(e,t),Et(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gi(e.containerInfo)}catch(m){ne(t,t.return,m)}break;case 4:mt(e,t),Et(t);break;case 13:mt(e,t),Et(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Fc=oe())),r&4&&Sf(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(De=(u=De)||c,mt(e,t),De=u):mt(e,t),Et(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(R=t,c=t.child;c!==null;){for(d=R=c;R!==null;){switch(f=R,h=f.child,f.tag){case 0:case 11:case 14:case 15:Li(4,f,f.return);break;case 1:Lr(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){ne(r,n,m)}}break;case 5:Lr(f,f.return);break;case 22:if(f.memoizedState!==null){wf(d);continue}}h!==null?(h.return=f,R=h):wf(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=d.stateNode,a=d.memoizedProps.style,s=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Cp("display",s))}catch(m){ne(t,t.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){ne(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mt(e,t),Et(t),r&4&&Sf(t);break;case 21:break;default:mt(e,t),Et(t)}}function Et(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Jm(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Wi(i,""),r.flags&=-33);var o=xf(t);Nu(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=xf(t);Cu(t,l,s);break;default:throw Error(D(161))}}catch(a){ne(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Nv(t,e,n){R=t,Xm(t)}function Xm(t,e,n){for(var r=(t.mode&1)!==0;R!==null;){var i=R,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||qo;if(!s){var l=i.alternate,a=l!==null&&l.memoizedState!==null||De;l=qo;var u=De;if(qo=s,(De=a)&&!u)for(R=i;R!==null;)s=R,a=s.child,s.tag===22&&s.memoizedState!==null?Cf(i):a!==null?(a.return=s,R=a):Cf(i);for(;o!==null;)R=o,Xm(o),o=o.sibling;R=i,qo=l,De=u}kf(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,R=o):kf(t)}}function kf(t){for(;R!==null;){var e=R;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:De||ml(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!De)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:gt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&of(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}of(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Gi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}De||e.flags&512&&wu(e)}catch(f){ne(e,e.return,f)}}if(e===t){R=null;break}if(n=e.sibling,n!==null){n.return=e.return,R=n;break}R=e.return}}function wf(t){for(;R!==null;){var e=R;if(e===t){R=null;break}var n=e.sibling;if(n!==null){n.return=e.return,R=n;break}R=e.return}}function Cf(t){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ml(4,e)}catch(a){ne(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){ne(e,i,a)}}var o=e.return;try{wu(e)}catch(a){ne(e,o,a)}break;case 5:var s=e.return;try{wu(e)}catch(a){ne(e,s,a)}}}catch(a){ne(e,e.return,a)}if(e===t){R=null;break}var l=e.sibling;if(l!==null){l.return=e.return,R=l;break}R=e.return}}var Ev=Math.ceil,Fs=Gt.ReactCurrentDispatcher,Bc=Gt.ReactCurrentOwner,ct=Gt.ReactCurrentBatchConfig,U=0,ye=null,le=null,Ee=0,Ye=0,zr=Pn(0),de=0,oo=null,ar=0,gl=0,_c=0,zi=null,We=null,Fc=0,ei=1/0,zt=null,$s=!1,Eu=null,vn=null,Ko=!1,an=null,Vs=0,Bi=0,bu=null,hs=-1,ps=0;function ze(){return U&6?oe():hs!==-1?hs:hs=oe()}function xn(t){return t.mode&1?U&2&&Ee!==0?Ee&-Ee:av.transition!==null?(ps===0&&(ps=zp()),ps):(t=q,t!==0||(t=window.event,t=t===void 0?16:Hp(t.type)),t):1}function kt(t,e,n,r){if(50<Bi)throw Bi=0,bu=null,Error(D(185));So(t,n,r),(!(U&2)||t!==ye)&&(t===ye&&(!(U&2)&&(gl|=n),de===4&&rn(t,Ee)),Ge(t,r),n===1&&U===0&&!(e.mode&1)&&(ei=oe()+500,fl&&In()))}function Ge(t,e){var n=t.callbackNode;a1(t,e);var r=Ns(t,t===ye?Ee:0);if(r===0)n!==null&&Ad(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ad(n),e===1)t.tag===0?lv(Nf.bind(null,t)):am(Nf.bind(null,t)),rv(function(){!(U&6)&&In()}),n=null;else{switch(Bp(r)){case 1:n=dc;break;case 4:n=Rp;break;case 16:n=Cs;break;case 536870912:n=Lp;break;default:n=Cs}n=sg(n,Zm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Zm(t,e){if(hs=-1,ps=0,U&6)throw Error(D(327));var n=t.callbackNode;if(Wr()&&t.callbackNode!==n)return null;var r=Ns(t,t===ye?Ee:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=js(t,r);else{e=r;var i=U;U|=2;var o=tg();(ye!==t||Ee!==e)&&(zt=null,ei=oe()+500,Yn(t,e));do try{Mv();break}catch(l){eg(t,l)}while(1);Nc(),Fs.current=o,U=i,le!==null?e=0:(ye=null,Ee=0,e=de)}if(e!==0){if(e===2&&(i=Za(t),i!==0&&(r=i,e=Tu(t,i))),e===1)throw n=oo,Yn(t,0),rn(t,r),Ge(t,oe()),n;if(e===6)rn(t,r);else{if(i=t.current.alternate,!(r&30)&&!bv(i)&&(e=js(t,r),e===2&&(o=Za(t),o!==0&&(r=o,e=Tu(t,o))),e===1))throw n=oo,Yn(t,0),rn(t,r),Ge(t,oe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(D(345));case 2:jn(t,We,zt);break;case 3:if(rn(t,r),(r&130023424)===r&&(e=Fc+500-oe(),10<e)){if(Ns(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ze(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=lu(jn.bind(null,t,We,zt),e);break}jn(t,We,zt);break;case 4:if(rn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-St(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ev(r/1960))-r,10<r){t.timeoutHandle=lu(jn.bind(null,t,We,zt),r);break}jn(t,We,zt);break;case 5:jn(t,We,zt);break;default:throw Error(D(329))}}}return Ge(t,oe()),t.callbackNode===n?Zm.bind(null,t):null}function Tu(t,e){var n=zi;return t.current.memoizedState.isDehydrated&&(Yn(t,e).flags|=256),t=js(t,e),t!==2&&(e=We,We=n,e!==null&&Mu(e)),t}function Mu(t){We===null?We=t:We.push.apply(We,t)}function bv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!wt(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rn(t,e){for(e&=~_c,e&=~gl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-St(e),r=1<<n;t[n]=-1,e&=~r}}function Nf(t){if(U&6)throw Error(D(327));Wr();var e=Ns(t,0);if(!(e&1))return Ge(t,oe()),null;var n=js(t,e);if(t.tag!==0&&n===2){var r=Za(t);r!==0&&(e=r,n=Tu(t,r))}if(n===1)throw n=oo,Yn(t,0),rn(t,e),Ge(t,oe()),n;if(n===6)throw Error(D(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,jn(t,We,zt),Ge(t,oe()),null}function $c(t,e){var n=U;U|=1;try{return t(e)}finally{U=n,U===0&&(ei=oe()+500,fl&&In())}}function ur(t){an!==null&&an.tag===0&&!(U&6)&&Wr();var e=U;U|=1;var n=ct.transition,r=q;try{if(ct.transition=null,q=1,t)return t()}finally{q=r,ct.transition=n,U=e,!(U&6)&&In()}}function Vc(){Ye=zr.current,Q(zr)}function Yn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nv(n)),le!==null)for(n=le.return;n!==null;){var r=n;switch(kc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Os();break;case 3:Xr(),Q(qe),Q(Pe),Dc();break;case 5:Oc(r);break;case 4:Xr();break;case 13:Q(Z);break;case 19:Q(Z);break;case 10:Ec(r.type._context);break;case 22:case 23:Vc()}n=n.return}if(ye=t,le=t=Sn(t.current,null),Ee=Ye=e,de=0,oo=null,_c=gl=ar=0,We=zi=null,qn!==null){for(e=0;e<qn.length;e++)if(n=qn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}qn=null}return t}function eg(t,e){do{var n=le;try{if(Nc(),cs.current=_s,Bs){for(var r=ee.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Bs=!1}if(lr=0,pe=ce=ee=null,Ri=!1,no=0,Bc.current=null,n===null||n.return===null){de=1,oo=e,le=null;break}e:{var o=t,s=n.return,l=n,a=e;if(e=Ee,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=df(s);if(h!==null){h.flags&=-257,ff(h,s,l,o,e),h.mode&1&&cf(o,u,e),e=h,a=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(a),e.updateQueue=m}else p.add(a);break e}else{if(!(e&1)){cf(o,u,e),jc();break e}a=Error(D(426))}}else if(X&&l.mode&1){var v=df(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),ff(v,s,l,o,e),wc(Zr(a,l));break e}}o=a=Zr(a,l),de!==4&&(de=2),zi===null?zi=[o]:zi.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=Bm(o,a,e);rf(o,g);break e;case 1:l=a;var y=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(vn===null||!vn.has(x)))){o.flags|=65536,e&=-e,o.lanes|=e;var w=_m(o,l,e);rf(o,w);break e}}o=o.return}while(o!==null)}rg(n)}catch(N){e=N,le===n&&n!==null&&(le=n=n.return);continue}break}while(1)}function tg(){var t=Fs.current;return Fs.current=_s,t===null?_s:t}function jc(){(de===0||de===3||de===2)&&(de=4),ye===null||!(ar&268435455)&&!(gl&268435455)||rn(ye,Ee)}function js(t,e){var n=U;U|=2;var r=tg();(ye!==t||Ee!==e)&&(zt=null,Yn(t,e));do try{Tv();break}catch(i){eg(t,i)}while(1);if(Nc(),U=n,Fs.current=r,le!==null)throw Error(D(261));return ye=null,Ee=0,de}function Tv(){for(;le!==null;)ng(le)}function Mv(){for(;le!==null&&!Z0();)ng(le)}function ng(t){var e=og(t.alternate,t,Ye);t.memoizedProps=t.pendingProps,e===null?rg(t):le=e,Bc.current=null}function rg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=kv(n,e),n!==null){n.flags&=32767,le=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{de=6,le=null;return}}else if(n=Sv(n,e,Ye),n!==null){le=n;return}if(e=e.sibling,e!==null){le=e;return}le=e=t}while(e!==null);de===0&&(de=5)}function jn(t,e,n){var r=q,i=ct.transition;try{ct.transition=null,q=1,Ov(t,e,n,r)}finally{ct.transition=i,q=r}return null}function Ov(t,e,n,r){do Wr();while(an!==null);if(U&6)throw Error(D(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(D(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(u1(t,o),t===ye&&(le=ye=null,Ee=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ko||(Ko=!0,sg(Cs,function(){return Wr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=ct.transition,ct.transition=null;var s=q;q=1;var l=U;U|=4,Bc.current=null,Cv(t,n),Ym(n,t),J1(ou),Es=!!iu,ou=iu=null,t.current=n,Nv(n),e1(),U=l,q=s,ct.transition=o}else t.current=n;if(Ko&&(Ko=!1,an=t,Vs=i),o=t.pendingLanes,o===0&&(vn=null),r1(n.stateNode),Ge(t,oe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($s)throw $s=!1,t=Eu,Eu=null,t;return Vs&1&&t.tag!==0&&Wr(),o=t.pendingLanes,o&1?t===bu?Bi++:(Bi=0,bu=t):Bi=0,In(),null}function Wr(){if(an!==null){var t=Bp(Vs),e=ct.transition,n=q;try{if(ct.transition=null,q=16>t?16:t,an===null)var r=!1;else{if(t=an,an=null,Vs=0,U&6)throw Error(D(331));var i=U;for(U|=4,R=t.current;R!==null;){var o=R,s=o.child;if(R.flags&16){var l=o.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(R=u;R!==null;){var c=R;switch(c.tag){case 0:case 11:case 15:Li(8,c,o)}var d=c.child;if(d!==null)d.return=c,R=d;else for(;R!==null;){c=R;var f=c.sibling,h=c.return;if(Gm(c),c===u){R=null;break}if(f!==null){f.return=h,R=f;break}R=h}}}var p=o.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}R=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,R=s;else e:for(;R!==null;){if(o=R,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Li(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,R=g;break e}R=o.return}}var y=t.current;for(R=y;R!==null;){s=R;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,R=x;else e:for(s=y;R!==null;){if(l=R,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ml(9,l)}}catch(N){ne(l,l.return,N)}if(l===s){R=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,R=w;break e}R=l.return}}if(U=i,In(),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(ll,t)}catch{}r=!0}return r}finally{q=n,ct.transition=e}}return!1}function Ef(t,e,n){e=Zr(n,e),e=Bm(t,e,1),t=yn(t,e,1),e=ze(),t!==null&&(So(t,1,e),Ge(t,e))}function ne(t,e,n){if(t.tag===3)Ef(t,t,n);else for(;e!==null;){if(e.tag===3){Ef(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vn===null||!vn.has(r))){t=Zr(n,t),t=_m(e,t,1),e=yn(e,t,1),t=ze(),e!==null&&(So(e,1,t),Ge(e,t));break}}e=e.return}}function Dv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ze(),t.pingedLanes|=t.suspendedLanes&n,ye===t&&(Ee&n)===n&&(de===4||de===3&&(Ee&130023424)===Ee&&500>oe()-Fc?Yn(t,0):_c|=n),Ge(t,e)}function ig(t,e){e===0&&(t.mode&1?(e=Bo,Bo<<=1,!(Bo&130023424)&&(Bo=4194304)):e=1);var n=ze();t=qt(t,e),t!==null&&(So(t,e,n),Ge(t,n))}function Av(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ig(t,n)}function Pv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(e),ig(t,n)}var og;og=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qe.current)Ue=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ue=!1,xv(t,e,n);Ue=!!(t.flags&131072)}else Ue=!1,X&&e.flags&1048576&&um(e,Ps,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fs(t,e),t=e.pendingProps;var i=Jr(e,Pe.current);Hr(e,n),i=Pc(null,e,r,t,i,n);var o=Ic();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ke(r)?(o=!0,Ds(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Tc(e),i.updater=pl,e.stateNode=i,i._reactInternals=e,pu(e,r,t,n),e=yu(null,e,r,!0,o,n)):(e.tag=0,X&&o&&Sc(e),Le(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fs(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Rv(r),t=gt(r,t),i){case 0:e=gu(null,e,r,t,n);break e;case 1:e=mf(null,e,r,t,n);break e;case 11:e=hf(null,e,r,t,n);break e;case 14:e=pf(null,e,r,gt(r.type,t),n);break e}throw Error(D(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gt(r,i),gu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gt(r,i),mf(t,e,r,i,n);case 3:e:{if(jm(e),t===null)throw Error(D(387));r=e.pendingProps,o=e.memoizedState,i=o.element,mm(t,e),Ls(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Zr(Error(D(423)),e),e=gf(t,e,r,n,i);break e}else if(r!==i){i=Zr(Error(D(424)),e),e=gf(t,e,r,n,i);break e}else for(Ze=gn(e.stateNode.containerInfo.firstChild),tt=e,X=!0,vt=null,n=hm(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qr(),r===i){e=Kt(t,e,n);break e}Le(t,e,r,n)}e=e.child}return e;case 5:return gm(e),t===null&&du(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,su(r,i)?s=null:o!==null&&su(r,o)&&(e.flags|=32),Vm(t,e),Le(t,e,s,n),e.child;case 6:return t===null&&du(e),null;case 13:return Hm(t,e,n);case 4:return Mc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Yr(e,null,r,n):Le(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gt(r,i),hf(t,e,r,i,n);case 7:return Le(t,e,e.pendingProps,n),e.child;case 8:return Le(t,e,e.pendingProps.children,n),e.child;case 12:return Le(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,G(Is,r._currentValue),r._currentValue=s,o!==null)if(wt(o.value,s)){if(o.children===i.children&&!qe.current){e=Kt(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(o.tag===1){a=jt(-1,n&-n),a.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),fu(o.return,n,e),l.lanes|=n;break}a=a.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(D(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),fu(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Le(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Hr(e,n),i=ht(i),r=r(i),e.flags|=1,Le(t,e,r,n),e.child;case 14:return r=e.type,i=gt(r,e.pendingProps),i=gt(r.type,i),pf(t,e,r,i,n);case 15:return Fm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gt(r,i),fs(t,e),e.tag=1,Ke(r)?(t=!0,Ds(e)):t=!1,Hr(e,n),zm(e,r,i),pu(e,r,i,n),yu(null,e,r,!0,t,n);case 19:return Wm(t,e,n);case 22:return $m(t,e,n)}throw Error(D(156,e.tag))};function sg(t,e){return Ip(t,e)}function Iv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ut(t,e,n,r){return new Iv(t,e,n,r)}function Hc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Rv(t){if(typeof t=="function")return Hc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ac)return 11;if(t===uc)return 14}return 2}function Sn(t,e){var n=t.alternate;return n===null?(n=ut(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ms(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Hc(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case br:return Xn(n.children,i,o,e);case lc:s=8,i|=8;break;case _a:return t=ut(12,n,e,i|2),t.elementType=_a,t.lanes=o,t;case Fa:return t=ut(13,n,e,i),t.elementType=Fa,t.lanes=o,t;case $a:return t=ut(19,n,e,i),t.elementType=$a,t.lanes=o,t;case gp:return yl(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pp:s=10;break e;case mp:s=9;break e;case ac:s=11;break e;case uc:s=14;break e;case Xt:s=16,r=null;break e}throw Error(D(130,t==null?t:typeof t,""))}return e=ut(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Xn(t,e,n,r){return t=ut(7,t,r,e),t.lanes=n,t}function yl(t,e,n,r){return t=ut(22,t,r,e),t.elementType=gp,t.lanes=n,t.stateNode={isHidden:!1},t}function ca(t,e,n){return t=ut(6,t,null,e),t.lanes=n,t}function da(t,e,n){return e=ut(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Lv(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ul(0),this.expirationTimes=Ul(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ul(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Wc(t,e,n,r,i,o,s,l,a){return t=new Lv(t,e,n,l,a),e===1?(e=1,o===!0&&(e|=8)):e=0,o=ut(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tc(o),t}function zv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Er,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function lg(t){if(!t)return Mn;t=t._reactInternals;e:{if(mr(t)!==t||t.tag!==1)throw Error(D(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ke(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(t.tag===1){var n=t.type;if(Ke(n))return lm(t,n,e)}return e}function ag(t,e,n,r,i,o,s,l,a){return t=Wc(n,r,!0,t,i,o,s,l,a),t.context=lg(null),n=t.current,r=ze(),i=xn(n),o=jt(r,i),o.callback=e??null,yn(n,o,i),t.current.lanes=i,So(t,i,r),Ge(t,r),t}function vl(t,e,n,r){var i=e.current,o=ze(),s=xn(i);return n=lg(n),e.context===null?e.context=n:e.pendingContext=n,e=jt(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=yn(i,e,s),t!==null&&(kt(t,i,s,o),us(t,i,s)),s}function Hs(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function bf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Uc(t,e){bf(t,e),(t=t.alternate)&&bf(t,e)}function Bv(){return null}var ug=typeof reportError=="function"?reportError:function(t){console.error(t)};function qc(t){this._internalRoot=t}xl.prototype.render=qc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(D(409));vl(t,e,null,null)};xl.prototype.unmount=qc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ur(function(){vl(null,t,null,null)}),e[Ut]=null}};function xl(t){this._internalRoot=t}xl.prototype.unstable_scheduleHydration=function(t){if(t){var e=$p();t={blockedOn:null,target:t,priority:e};for(var n=0;n<nn.length&&e!==0&&e<nn[n].priority;n++);nn.splice(n,0,t),n===0&&jp(t)}};function Kc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Tf(){}function _v(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Hs(s);o.call(u)}}var s=ag(e,r,t,0,null,!1,!1,"",Tf);return t._reactRootContainer=s,t[Ut]=s.current,Yi(t.nodeType===8?t.parentNode:t),ur(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Hs(a);l.call(u)}}var a=Wc(t,0,!1,null,null,!1,!1,"",Tf);return t._reactRootContainer=a,t[Ut]=a.current,Yi(t.nodeType===8?t.parentNode:t),ur(function(){vl(e,a,n,r)}),a}function kl(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var a=Hs(s);l.call(a)}}vl(e,s,t,i)}else s=_v(n,e,t,i,r);return Hs(s)}_p=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ni(e.pendingLanes);n!==0&&(fc(e,n|1),Ge(e,oe()),!(U&6)&&(ei=oe()+500,In()))}break;case 13:ur(function(){var r=qt(t,1);if(r!==null){var i=ze();kt(r,t,1,i)}}),Uc(t,1)}};hc=function(t){if(t.tag===13){var e=qt(t,134217728);if(e!==null){var n=ze();kt(e,t,134217728,n)}Uc(t,134217728)}};Fp=function(t){if(t.tag===13){var e=xn(t),n=qt(t,e);if(n!==null){var r=ze();kt(n,t,e,r)}Uc(t,e)}};$p=function(){return q};Vp=function(t,e){var n=q;try{return q=t,e()}finally{q=n}};Qa=function(t,e,n){switch(e){case"input":if(Ha(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=dl(r);if(!i)throw Error(D(90));vp(r),Ha(r,i)}}}break;case"textarea":Sp(t,n);break;case"select":e=n.value,e!=null&&Fr(t,!!n.multiple,e,!1)}};Tp=$c;Mp=ur;var Fv={usingClientEntryPoint:!1,Events:[wo,Dr,dl,Ep,bp,$c]},Si={findFiberByHostInstance:Un,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$v={bundleType:Si.bundleType,version:Si.version,rendererPackageName:Si.rendererPackageName,rendererConfig:Si.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ap(t),t===null?null:t.stateNode},findFiberByHostInstance:Si.findFiberByHostInstance||Bv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Go=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Go.isDisabled&&Go.supportsFiber)try{ll=Go.inject($v),Dt=Go}catch{}}rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fv;rt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kc(e))throw Error(D(200));return zv(t,e,null,n)};rt.createRoot=function(t,e){if(!Kc(t))throw Error(D(299));var n=!1,r="",i=ug;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Wc(t,1,!1,null,null,n,!1,r,i),t[Ut]=e.current,Yi(t.nodeType===8?t.parentNode:t),new qc(e)};rt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(D(188)):(t=Object.keys(t).join(","),Error(D(268,t)));return t=Ap(e),t=t===null?null:t.stateNode,t};rt.flushSync=function(t){return ur(t)};rt.hydrate=function(t,e,n){if(!Sl(e))throw Error(D(200));return kl(null,t,e,!0,n)};rt.hydrateRoot=function(t,e,n){if(!Kc(t))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=ug;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=ag(e,null,t,1,n??null,i,!1,o,s),t[Ut]=e.current,Yi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new xl(e)};rt.render=function(t,e,n){if(!Sl(e))throw Error(D(200));return kl(null,t,e,!1,n)};rt.unmountComponentAtNode=function(t){if(!Sl(t))throw Error(D(40));return t._reactRootContainer?(ur(function(){kl(null,null,t,!1,function(){t._reactRootContainer=null,t[Ut]=null})}),!0):!1};rt.unstable_batchedUpdates=$c;rt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Sl(n))throw Error(D(200));if(t==null||t._reactInternals===void 0)throw Error(D(38));return kl(t,e,n,!1,r)};rt.version="18.3.1-next-f1338f8080-20240426";function cg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cg)}catch(t){console.error(t)}}cg(),cp.exports=rt;var dg=cp.exports;const Vv=Xh(dg);var Mf=dg;za.createRoot=Mf.createRoot,za.hydrateRoot=Mf.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function so(){return so=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},so.apply(this,arguments)}var un;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(un||(un={}));const Of="popstate";function jv(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:s,hash:l}=r.location;return Ou("",{pathname:o,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ws(i)}return Wv(e,n,null,t)}function ue(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Hv(){return Math.random().toString(36).substr(2,8)}function Df(t,e){return{usr:t.state,key:t.key,idx:e}}function Ou(t,e,n,r){return n===void 0&&(n=null),so({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ci(e):e,{state:n,key:e&&e.key||r||Hv()})}function Ws(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ci(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Wv(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,l=un.Pop,a=null,u=c();u==null&&(u=0,s.replaceState(so({},s.state,{idx:u}),""));function c(){return(s.state||{idx:null}).idx}function d(){l=un.Pop;let v=c(),g=v==null?null:v-u;u=v,a&&a({action:l,location:m.location,delta:g})}function f(v,g){l=un.Push;let y=Ou(m.location,v,g);n&&n(y,v),u=c()+1;let x=Df(y,u),w=m.createHref(y);try{s.pushState(x,"",w)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(w)}o&&a&&a({action:l,location:m.location,delta:1})}function h(v,g){l=un.Replace;let y=Ou(m.location,v,g);n&&n(y,v),u=c();let x=Df(y,u),w=m.createHref(y);s.replaceState(x,"",w),o&&a&&a({action:l,location:m.location,delta:0})}function p(v){let g=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof v=="string"?v:Ws(v);return y=y.replace(/ $/,"%20"),ue(g,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,g)}let m={get action(){return l},get location(){return t(i,s)},listen(v){if(a)throw new Error("A history only accepts one active listener");return i.addEventListener(Of,d),a=v,()=>{i.removeEventListener(Of,d),a=null}},createHref(v){return e(i,v)},createURL:p,encodeLocation(v){let g=p(v);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:h,go(v){return s.go(v)}};return m}var Af;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Af||(Af={}));function Uv(t,e,n){return n===void 0&&(n="/"),qv(t,e,n,!1)}function qv(t,e,n,r){let i=typeof e=="string"?ci(e):e,o=Gc(i.pathname||"/",n);if(o==null)return null;let s=hg(t);Kv(s);let l=null;for(let a=0;l==null&&a<s.length;++a){let u=ix(o);l=nx(s[a],u,r)}return l}function hg(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,l)=>{let a={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};a.relativePath.startsWith("/")&&(ue(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let u=kn([r,a.relativePath]),c=n.concat(a);o.children&&o.children.length>0&&(ue(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),hg(o.children,e,c,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:ex(u,o.index),routesMeta:c})};return t.forEach((o,s)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,s);else for(let a of pg(o.path))i(o,s,a)}),e}function pg(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=pg(r.join("/")),l=[];return l.push(...s.map(a=>a===""?o:[o,a].join("/"))),i&&l.push(...s),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function Kv(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:tx(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Gv=/^:[\w-]+$/,Jv=3,Qv=2,Yv=1,Xv=10,Zv=-2,Pf=t=>t==="*";function ex(t,e){let n=t.split("/"),r=n.length;return n.some(Pf)&&(r+=Zv),e&&(r+=Qv),n.filter(i=>!Pf(i)).reduce((i,o)=>i+(Gv.test(o)?Jv:o===""?Yv:Xv),r)}function tx(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function nx(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},o="/",s=[];for(let l=0;l<r.length;++l){let a=r[l],u=l===r.length-1,c=o==="/"?e:e.slice(o.length)||"/",d=If({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},c),f=a.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=If({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:kn([o,d.pathname]),pathnameBase:ax(kn([o,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(o=kn([o,d.pathnameBase]))}return s}function If(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=rx(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:f,isOptional:h}=c;if(f==="*"){let m=l[d]||"";s=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const p=l[d];return h&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:s,pattern:t}}function rx(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),fg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,a)=>(r.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function ix(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Gc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function ox(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ci(t):t;return{pathname:n?n.startsWith("/")?n:sx(n,e):e,search:ux(r),hash:cx(i)}}function sx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function fa(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lx(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function mg(t,e){let n=lx(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function gg(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ci(t):(i=so({},t),ue(!i.pathname||!i.pathname.includes("?"),fa("?","pathname","search",i)),ue(!i.pathname||!i.pathname.includes("#"),fa("#","pathname","hash",i)),ue(!i.search||!i.search.includes("#"),fa("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,l;if(s==null)l=n;else{let d=e.length-1;if(!r&&s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}l=d>=0?e[d]:"/"}let a=ox(i,l),u=s&&s!=="/"&&s.endsWith("/"),c=(o||s===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(u||c)&&(a.pathname+="/"),a}const kn=t=>t.join("/").replace(/\/\/+/g,"/"),ax=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ux=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function dx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const yg=["post","put","patch","delete"];new Set(yg);const fx=["get",...yg];new Set(fx);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lo(){return lo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lo.apply(this,arguments)}const Jc=b.createContext(null),hx=b.createContext(null),gr=b.createContext(null),wl=b.createContext(null),Rn=b.createContext({outlet:null,matches:[],isDataRoute:!1}),vg=b.createContext(null);function px(t,e){let{relative:n}=e===void 0?{}:e;No()||ue(!1);let{basename:r,navigator:i}=b.useContext(gr),{hash:o,pathname:s,search:l}=Sg(t,{relative:n}),a=s;return r!=="/"&&(a=s==="/"?r:kn([r,s])),i.createHref({pathname:a,search:l,hash:o})}function No(){return b.useContext(wl)!=null}function di(){return No()||ue(!1),b.useContext(wl).location}function xg(t){b.useContext(gr).static||b.useLayoutEffect(t)}function Eo(){let{isDataRoute:t}=b.useContext(Rn);return t?Mx():mx()}function mx(){No()||ue(!1);let t=b.useContext(Jc),{basename:e,future:n,navigator:r}=b.useContext(gr),{matches:i}=b.useContext(Rn),{pathname:o}=di(),s=JSON.stringify(mg(i,n.v7_relativeSplatPath)),l=b.useRef(!1);return xg(()=>{l.current=!0}),b.useCallback(function(u,c){if(c===void 0&&(c={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let d=gg(u,JSON.parse(s),o,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:kn([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,s,o,t])}function gx(){let{matches:t}=b.useContext(Rn),e=t[t.length-1];return e?e.params:{}}function Sg(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(gr),{matches:i}=b.useContext(Rn),{pathname:o}=di(),s=JSON.stringify(mg(i,r.v7_relativeSplatPath));return b.useMemo(()=>gg(t,JSON.parse(s),o,n==="path"),[t,s,o,n])}function yx(t,e){return vx(t,e)}function vx(t,e,n,r){No()||ue(!1);let{navigator:i}=b.useContext(gr),{matches:o}=b.useContext(Rn),s=o[o.length-1],l=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let u=di(),c;if(e){var d;let v=typeof e=="string"?ci(e):e;a==="/"||(d=v.pathname)!=null&&d.startsWith(a)||ue(!1),c=v}else c=u;let f=c.pathname||"/",h=f;if(a!=="/"){let v=a.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let p=Uv(t,{pathname:h}),m=Cx(p&&p.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:kn([a,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?a:kn([a,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,r);return e&&m?b.createElement(wl.Provider,{value:{location:lo({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:un.Pop}},m):m}function xx(){let t=Tx(),e=dx(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:i},n):null,o)}const Sx=b.createElement(xx,null);class kx extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Rn.Provider,{value:this.props.routeContext},b.createElement(vg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wx(t){let{routeContext:e,match:n,children:r}=t,i=b.useContext(Jc);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Rn.Provider,{value:e},r)}function Cx(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let c=s.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);c>=0||ue(!1),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){a=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((c,d,f)=>{let h,p=!1,m=null,v=null;n&&(h=l&&d.route.id?l[d.route.id]:void 0,m=d.route.errorElement||Sx,a&&(u<0&&f===0?(Ox("route-fallback",!1),p=!0,v=null):u===f&&(p=!0,v=d.route.hydrateFallbackElement||null)));let g=e.concat(s.slice(0,f+1)),y=()=>{let x;return h?x=m:p?x=v:d.route.Component?x=b.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=c,b.createElement(wx,{match:d,routeContext:{outlet:c,matches:g,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?b.createElement(kx,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}var kg=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(kg||{}),Us=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Us||{});function Nx(t){let e=b.useContext(Jc);return e||ue(!1),e}function Ex(t){let e=b.useContext(hx);return e||ue(!1),e}function bx(t){let e=b.useContext(Rn);return e||ue(!1),e}function wg(t){let e=bx(),n=e.matches[e.matches.length-1];return n.route.id||ue(!1),n.route.id}function Tx(){var t;let e=b.useContext(vg),n=Ex(Us.UseRouteError),r=wg(Us.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Mx(){let{router:t}=Nx(kg.UseNavigateStable),e=wg(Us.UseNavigateStable),n=b.useRef(!1);return xg(()=>{n.current=!0}),b.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,lo({fromRouteId:e},o)))},[t,e])}const Rf={};function Ox(t,e,n){!e&&!Rf[t]&&(Rf[t]=!0)}function Dx(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function wr(t){ue(!1)}function Ax(t){let{basename:e="/",children:n=null,location:r,navigationType:i=un.Pop,navigator:o,static:s=!1,future:l}=t;No()&&ue(!1);let a=e.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:a,navigator:o,static:s,future:lo({v7_relativeSplatPath:!1},l)}),[a,l,o,s]);typeof r=="string"&&(r=ci(r));let{pathname:c="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,m=b.useMemo(()=>{let v=Gc(c,a);return v==null?null:{location:{pathname:v,search:d,hash:f,state:h,key:p},navigationType:i}},[a,c,d,f,h,p,i]);return m==null?null:b.createElement(gr.Provider,{value:u},b.createElement(wl.Provider,{children:n,value:m}))}function Px(t){let{children:e,location:n}=t;return yx(Du(e),n)}new Promise(()=>{});function Du(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,i)=>{if(!b.isValidElement(r))return;let o=[...e,i];if(r.type===b.Fragment){n.push.apply(n,Du(r.props.children,o));return}r.type!==wr&&ue(!1),!r.props.index||!r.props.children||ue(!1);let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=Du(r.props.children,o)),n.push(s)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Au(){return Au=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Au.apply(this,arguments)}function Ix(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Rx(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Lx(t,e){return t.button===0&&(!e||e==="_self")&&!Rx(t)}const zx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Bx="6";try{window.__reactRouterVersion=Bx}catch{}const _x="startTransition",Lf=D0[_x];function Fx(t){let{basename:e,children:n,future:r,window:i}=t,o=b.useRef();o.current==null&&(o.current=jv({window:i,v5Compat:!0}));let s=o.current,[l,a]=b.useState({action:s.action,location:s.location}),{v7_startTransition:u}=r||{},c=b.useCallback(d=>{u&&Lf?Lf(()=>a(d)):a(d)},[a,u]);return b.useLayoutEffect(()=>s.listen(c),[s,c]),b.useEffect(()=>Dx(r),[r]),b.createElement(Ax,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:s,future:r})}const $x=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Vx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,on=b.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:s,state:l,target:a,to:u,preventScrollReset:c,viewTransition:d}=e,f=Ix(e,zx),{basename:h}=b.useContext(gr),p,m=!1;if(typeof u=="string"&&Vx.test(u)&&(p=u,$x))try{let x=new URL(window.location.href),w=u.startsWith("//")?new URL(x.protocol+u):new URL(u),N=Gc(w.pathname,h);w.origin===x.origin&&N!=null?u=N+w.search+w.hash:m=!0}catch{}let v=px(u,{relative:i}),g=jx(u,{replace:s,state:l,target:a,preventScrollReset:c,relative:i,viewTransition:d});function y(x){r&&r(x),x.defaultPrevented||g(x)}return b.createElement("a",Au({},f,{href:p||v,onClick:m||o?r:y,ref:n,target:a}))});var zf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(zf||(zf={}));var Bf;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Bf||(Bf={}));function jx(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s,viewTransition:l}=e===void 0?{}:e,a=Eo(),u=di(),c=Sg(t,{relative:s});return b.useCallback(d=>{if(Lx(d,n)){d.preventDefault();let f=r!==void 0?r:Ws(u)===Ws(c);a(t,{replace:f,state:i,preventScrollReset:o,relative:s,viewTransition:l})}},[u,a,c,r,i,n,t,o,s,l])}const Cg=b.createContext(),Ng=()=>{const t=b.useContext(Cg);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t},Hx=({children:t})=>{const[e,n]=b.useState("en"),[r,i]=b.useState(!1);b.useEffect(()=>{try{const l=localStorage.getItem("language");l&&["en","de"].includes(l)&&n(l)}catch(l){console.warn("Failed to load language preference from localStorage:",l)}finally{i(!0)}},[]);const s={language:e,changeLanguage:l=>{if(["en","de"].includes(l)){n(l);try{localStorage.setItem("language",l)}catch(a){console.warn("Failed to save language preference to localStorage:",a)}}},isInitialized:r};return S(Cg.Provider,{value:s,children:t})},Wx={nav:{home:"Home",structuredInput:"Structured Input",freePrompt:"Free Text",history:"History"},header:{title:"TUM Administrative Document Generator",logo:"TUM Logo"},dashboard:{welcome:{title:"Welcome to TUM Administrative Document Generator",subtitle:"Generate high-quality administrative documents quickly with AI assistance, including announcements, notifications, meeting minutes, and other professional documents",structuredButton:"Structured Input Generation",freeButton:"Free Text Generation"},recentDrafts:{title:"Recently Generated Drafts",viewAll:"View All",empty:{title:"No drafts generated yet",subtitle:"Start creating your first administrative document",button:"Start Generating"}},stats:{totalGenerated:"Total Generated",todayGenerated:"Generated Today",avgTime:"Average Time",avgTimeValue:"<5 sec"}},structuredInput:{title:"Structured Input Generation",subtitle:"Generate professional administrative documents quickly by filling out forms",form:{required:"Required",selectType:"Please select document type",describePoints:"Please describe in detail the main content points you want to include...",fillForm:"Fill out the form on the left and click generate button"},output:{title:"Generation Result",copyContent:"Copy Content",saveEdit:"Save & Edit",regenerate:"Regenerate",fillForm:"Fill out the form on the left and click generate to see the result here."},generating:"Generating...",generateDraft:"Generate Draft",error:"Please fill in all required fields",generationError:"Generation failed, please try again"},freePrompt:{title:"Free Text Generation",subtitle:"Describe your requirements in natural language, and AI will generate professional administrative documents for you",form:{title:"Input Requirements",description:"Describe Your Requirements",placeholder:'Please enter the content you want to generate, such as: "Write a notice to inform students about exam schedule changes"',examples:"Example Prompts",tone:"Tone Selection"},output:{title:"Generation Result",copyContent:"Copy Content",saveEdit:"Save & Edit",regenerate:"Regenerate",fillForm:"Enter your requirements on the left and click the generate button"},generating:"Generating...",generateDraft:"Generate Draft",error:"Please enter the content you want to generate",generationError:"Generation failed, please try again"},draftHistory:{title:"History",subtitle:"View and manage all your generated drafts",totalDrafts:"Total {count} drafts",search:"Search drafts...",allTypes:"All Types",sortBy:{newest:"Newest Created",oldest:"Oldest Created",type:"By Type"},empty:{title:"No drafts",subtitle:"You haven't generated any drafts yet",noResults:"No matching drafts found",startGenerating:"Start Generating"},edited:"(Edited)",copy:"Copy",edit:"Edit",delete:"Delete",timeAgo:{justNow:"Just now",minutesAgo:"{minutes} minutes ago",hourAgo:"1 hour ago",hoursAgo:"{hours} hours ago"}},draftEditor:{title:"Draft Editor",newDraft:"New Draft",draft:"Draft",back:"Back",copy:"Copy",save:"Save",regenerate:"Regenerate",suggestions:"Suggestions",placeholder:"Start editing your document...",saving:"Saving...",saveSuccess:"Saved successfully",saveError:"Save failed",regenerateError:"Regeneration failed",suggestionsError:"Failed to generate suggestions",generatingSuggestions:"Generating suggestions...",applySuggestion:"Apply Suggestion",moreFormal:"More formal expression",moreDetailed:"More detailed description",morePolite:"More polite expression",noSuggestions:"No suggestions available"},documentTypes:{announcement:"Announcement",studentNotice:"Student Notice",meetingMinutes:"Meeting Minutes",formalLetter:"Formal Letter",notification:"Notification",report:"Report",letter:"Letter",memo:"Memo",policy:"Policy",guideline:"Guideline",courseRegistration:"Course Registration Notice",freeTextGeneration:"Free Text Generation",eventNotice:"Event Notice",scheduleRequest:"Schedule Request",scheduleAnnouncement:"Schedule Announcement",scheduleChange:"Schedule Change",studentReply:"Student Reply",holidayNotice:"Holiday Notice"},audience:{students:"Students",faculty:"Faculty & Staff",department:"Specific Department",all:"All Personnel"},actions:{copy:"Copy",edit:"Edit",delete:"Delete",save:"Save",cancel:"Cancel",generate:"Generate",clear:"Clear",download:"Download",upload:"Upload",submit:"Submit",back:"Back",next:"Next",previous:"Previous"},tone:{neutral:{label:"Neutral",description:"Objective, formal"},friendly:{label:"Friendly",description:"Gentle, approachable"},firm:{label:"Polite but Firm",description:"Serious, authoritative"}},form:{title:"Title",content:"Content",type:"Document Type",tone:"Tone",date:"Date",author:"Author",department:"Department",recipient:"Target Audience",subject:"Subject",description:"Description",keywords:"Keywords",template:"Template",startDate:"Start Date",endDate:"End Date",additionalNote:"Additional Notes",courseName:"Course Name",courseCode:"Course Code",instructorName:"Instructor Name",courseStartDate:"Course Start Date",weeklyTime:"Weekly Time",weeklyLocation:"Weekly Location",eventName:"Event Name",eventIntro:"Event Introduction",eventTime:"Event Time",location:"Location",registration:"Registration",language:"Language",reason:"Reason",oldTime:"Original Time",oldLocation:"Original Location",newTime:"New Time",newLocation:"New Location",studentName:"Student Name",holidayName:"Holiday Name",holidayDate:"Holiday Date",replyDeadline:"Reply Deadline",timeOptions:"Time Options",semester:"Semester"},messages:{copySuccess:"Content copied to clipboard",deleteConfirm:"Are you sure you want to delete this draft?",saveSuccess:"Draft saved successfully",generateSuccess:"Document generated successfully",error:"An error occurred",loading:"Generating...",noResults:"No results found"},language:{en:"English",de:"Deutsch",switchLanguage:"Switch Language"},placeholders:{title:"Enter document title...",content:"Enter your content here...",description:"Enter description...",keywords:"Enter keywords separated by commas...",search:"Search drafts...",recipient:"Enter target audience...",additionalNote:"Enter any additional notes or requirements...",startDate:'Enter start date (e.g., "01.05.2025")',endDate:'Enter end date (e.g., "01.06.2025")'}},Ux={nav:{home:"Startseite",structuredInput:"Strukturierte Eingabe",freePrompt:"Freitext",history:"Verlauf"},header:{title:"TUM Verwaltungsdokument-Generator",logo:"TUM Logo"},dashboard:{welcome:{title:"Willkommen beim TUM Verwaltungsdokument-Generator",subtitle:"Generieren Sie hochwertige Verwaltungsdokumente schnell mit KI-Unterstützung, einschließlich Ankündigungen, Benachrichtigungen, Sitzungsprotokolle und andere professionelle Dokumente",structuredButton:"Strukturierte Eingabe-Generierung",freeButton:"Freitext-Generierung"},recentDrafts:{title:"Kürzlich generierte Entwürfe",viewAll:"Alle anzeigen",empty:{title:"Noch keine Entwürfe generiert",subtitle:"Beginnen Sie mit der Erstellung Ihres ersten Verwaltungsdokuments",button:"Generierung starten"}},stats:{totalGenerated:"Gesamt generiert",todayGenerated:"Heute generiert",avgTime:"Durchschnittliche Zeit",avgTimeValue:"<5 Sek"}},structuredInput:{title:"Strukturierte Eingabe",subtitle:"Generieren Sie Dokumente, indem Sie Formularfelder ausfüllen.",form:{selectType:"Dokumenttyp auswählen",title:"Titel",content:"Inhalt",type:"Dokumenttyp",tone:"Ton",date:"Datum",author:"Autor",department:"Abteilung",recipient:"Zielgruppe",subject:"Betreff",description:"Beschreibung",keywords:"Schlüsselwörter",template:"Vorlage",startDate:"Startdatum",endDate:"Enddatum",additionalNote:"Zusätzliche Hinweise",courseName:"Kursname",courseCode:"Kurscode",instructorName:"Dozent/in",courseStartDate:"Kursbeginn",weeklyTime:"Wöchentlicher Termin",weeklyLocation:"Wöchentlicher Raum",eventName:"Veranstaltungsname",eventIntro:"Veranstaltungsbeschreibung",eventTime:"Veranstaltungszeit",location:"Veranstaltungsort",registration:"Anmeldung",language:"Sprache",reason:"Grund",oldTime:"Ursprüngliche Zeit",oldLocation:"Ursprünglicher Ort",newTime:"Neue Zeit",newLocation:"Neuer Ort",studentName:"Name des Studierenden",holidayName:"Feiertagsname",holidayDate:"Feiertagsdatum",replyDeadline:"Antwortfrist",timeOptions:"Zeitoptionen",semester:"Semester"},output:{title:"Generierungsergebnis",copyContent:"Inhalt kopieren",saveEdit:"Speichern & Bearbeiten",regenerate:"Neu generieren",fillForm:"Füllen Sie das Formular links aus und klicken Sie auf 'Generieren', um das Ergebnis hier zu sehen."},generating:"Generiere...",generateDraft:"Entwurf generieren",error:"Bitte füllen Sie alle erforderlichen Felder aus",generationError:"Generierung fehlgeschlagen, bitte versuchen Sie es erneut"},freePrompt:{title:"Freitext-Generierung",subtitle:"Beschreiben Sie Ihre Anforderungen in natürlicher Sprache, und KI generiert professionelle Verwaltungsdokumente für Sie",form:{title:"Eingabeanforderungen",description:"Beschreiben Sie Ihre Anforderungen",placeholder:'Bitte geben Sie den Inhalt ein, den Sie generieren möchten, z.B.: "Schreiben Sie eine Benachrichtigung, um Studenten über Änderungen im Prüfungsplan zu informieren"',examples:"Beispiel-Prompts",tone:"Tonauswahl"},output:{title:"Generierungsergebnis",copyContent:"Inhalt kopieren",saveEdit:"Speichern & Bearbeiten",regenerate:"Neu generieren",fillForm:"Geben Sie Ihre Anforderungen links ein und klicken Sie auf die Generierungsschaltfläche"},generating:"Generiere...",generateDraft:"Entwurf generieren",error:"Bitte geben Sie den Inhalt ein, den Sie generieren möchten",generationError:"Generierung fehlgeschlagen, bitte versuchen Sie es erneut"},draftHistory:{title:"Verlauf",subtitle:"Alle Ihre generierten Entwürfe anzeigen und verwalten",totalDrafts:"Gesamt {count} Entwürfe",search:"Entwürfe durchsuchen...",allTypes:"Alle Typen",sortBy:{newest:"Neueste erstellt",oldest:"Älteste erstellt",type:"Nach Typ"},empty:{title:"Keine Entwürfe",subtitle:"Sie haben noch keine Entwürfe generiert",noResults:"Keine passenden Entwürfe gefunden",startGenerating:"Generierung starten"},edited:"(Bearbeitet)",copy:"Kopieren",edit:"Bearbeiten",delete:"Löschen",timeAgo:{justNow:"Gerade eben",minutesAgo:"vor {minutes} Minuten",hourAgo:"vor 1 Stunde",hoursAgo:"vor {hours} Stunden"}},draftEditor:{title:"Entwurfs-Editor",newDraft:"Neuer Entwurf",draft:"Entwurf",back:"Zurück",copy:"Kopieren",save:"Speichern",regenerate:"Neu generieren",suggestions:"Vorschläge",placeholder:"Beginnen Sie mit der Bearbeitung Ihres Dokuments...",saving:"Speichere...",saveSuccess:"Erfolgreich gespeichert",saveError:"Speichern fehlgeschlagen",regenerateError:"Neu generieren fehlgeschlagen",suggestionsError:"Vorschläge generieren fehlgeschlagen",generatingSuggestions:"Generiere Vorschläge...",applySuggestion:"Vorschlag anwenden",moreFormal:"Formellere Ausdrucksweise",moreDetailed:"Detailliertere Beschreibung",morePolite:"Höflichere Ausdrucksweise",noSuggestions:"Keine Vorschläge verfügbar"},documentTypes:{announcement:"Ankündigung",studentNotice:"Studentische Mitteilung",meetingMinutes:"Sitzungsprotokoll",formalLetter:"Formeller Brief",notification:"Benachrichtigung",report:"Bericht",letter:"Brief",memo:"Memo",policy:"Richtlinie",guideline:"Leitfaden",courseRegistration:"Kursanmeldung Benachrichtigung",freeTextGeneration:"Freitextgenerierung",eventNotice:"Veranstaltungshinweis",scheduleRequest:"Terminabstimmungsanfrage",scheduleAnnouncement:"Terminankündigung",scheduleChange:"Terminänderung",studentReply:"Antwort an Studierende",holidayNotice:"Feiertagsmitteilung"},audience:{students:"Studenten",faculty:"Lehrpersonal & Mitarbeiter",department:"Bestimmte Abteilung",all:"Alle Mitarbeiter"},actions:{copy:"Kopieren",edit:"Bearbeiten",delete:"Löschen",save:"Speichern",cancel:"Abbrechen",generate:"Generieren",clear:"Löschen",download:"Herunterladen",upload:"Hochladen",submit:"Absenden",back:"Zurück",next:"Weiter",previous:"Zurück"},tone:{neutral:{label:"Neutral",description:"Objektiv, formal"},friendly:{label:"Freundlich",description:"Sanft, zugänglich"},firm:{label:"Höflich aber bestimmt",description:"Ernst, autoritativ"}},form:{title:"Titel",content:"Inhalt",type:"Dokumenttyp",tone:"Ton",date:"Datum",author:"Autor",department:"Abteilung",recipient:"Zielgruppe",subject:"Betreff",description:"Beschreibung",keywords:"Schlüsselwörter",template:"Vorlage",startDate:"Startdatum",endDate:"Enddatum",additionalNote:"Zusätzliche Hinweise",courseName:"Kursname",courseCode:"Kurscode",instructorName:"Dozent/in",courseStartDate:"Kursbeginn",weeklyTime:"Wöchentlicher Termin",weeklyLocation:"Wöchentlicher Raum",eventName:"Veranstaltungsname",eventIntro:"Veranstaltungsbeschreibung",eventTime:"Veranstaltungszeit",location:"Veranstaltungsort",registration:"Anmeldung",language:"Sprache",reason:"Grund",oldTime:"Ursprüngliche Zeit",oldLocation:"Ursprünglicher Ort",newTime:"Neue Zeit",newLocation:"Neuer Ort",studentName:"Name des Studierenden",holidayName:"Feiertagsname",holidayDate:"Feiertagsdatum",replyDeadline:"Antwortfrist",timeOptions:"Zeitoptionen",semester:"Semester"},messages:{copySuccess:"Inhalt in die Zwischenablage kopiert",deleteConfirm:"Sind Sie sicher, dass Sie diesen Entwurf löschen möchten?",saveSuccess:"Entwurf erfolgreich gespeichert",generateSuccess:"Dokument erfolgreich generiert",error:"Ein Fehler ist aufgetreten",loading:"Generiere...",noResults:"Keine Ergebnisse gefunden"},language:{en:"English",de:"Deutsch",switchLanguage:"Sprache wechseln"},placeholders:{title:"Dokumenttitel eingeben...",content:"Geben Sie hier Ihren Inhalt ein...",description:"Beschreibung eingeben...",keywords:"Schlüsselwörter durch Kommas getrennt eingeben...",search:"Entwürfe durchsuchen...",recipient:"Zielgruppe eingeben...",additionalNote:"Geben Sie zusätzliche Hinweise oder Anforderungen ein...",startDate:'Startdatum eingeben (z.B. "1. Oktober 2024")',endDate:'Enddatum eingeben (z.B. "15. Februar 2024")'}},qx={en:Wx,de:Ux},Ln=()=>{const{language:t,isInitialized:e}=Ng();return{t:(r,i={})=>{if(!e)return r;const o=r.split(".");let s=qx[t];for(const l of o)if(s&&typeof s=="object"&&l in s)s=s[l];else return console.warn(`Translation key not found: ${r} for language: ${t}`),r;return typeof s=="string"&&Object.keys(i).length>0?Object.keys(i).reduce((l,a)=>l.replace(new RegExp(`{${a}}`,"g"),i[a]),s):s||r},language:t,isInitialized:e}};var Kx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Gx=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Jx=(t,e)=>{const n=b.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:s,children:l,...a},u)=>b.createElement("svg",{ref:u,...Kx,width:i,height:i,stroke:r,strokeWidth:s?Number(o)*24/Number(i):o,className:`lucide lucide-${Gx(t)}`,...a},[...e.map(([c,d])=>b.createElement(c,d)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${t}`,n};var Y=Jx;const Eg=Y("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Qx=Y("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]),Cl=Y("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Yx=Y("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Nl=Y("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),_i=Y("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Xx=Y("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Zx=Y("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),bg=Y("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),eS=Y("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),tS=Y("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),nS=Y("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),rS=Y("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]),iS=Y("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Zn=Y("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),qs=Y("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Tg=Y("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),oS=Y("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),sS=Y("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]),Mg=Y("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Og=Y("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),lS=Y("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),aS=Y("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Dg=Y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),uS=Y("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]),cS=()=>{const{language:t,changeLanguage:e}=Ng(),{t:n}=Ln(),r=[{code:"en",name:"English",flag:"🇺🇸"},{code:"de",name:"Deutsch",flag:"🇩🇪"}];return S("div",{className:"relative",children:M("div",{className:"flex items-center space-x-2",children:[S(Zx,{className:"h-5 w-5 text-tum-gray-600"}),S("select",{value:t,onChange:i=>e(i.target.value),className:"bg-transparent border-none text-sm font-medium text-tum-gray-700 focus:outline-none focus:ring-0 cursor-pointer",title:n("language.switchLanguage"),children:r.map(i=>M("option",{value:i.code,children:[i.flag," ",i.name]},i.code))})]})})},dS="/assets/TUM-0d2d6aeb.png",fS=()=>{const t=Eo();return di().pathname==="/"?null:S("button",{onClick:()=>t(-1),className:"p-2 mr-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 rounded",title:"Back",children:S(Eg,{className:"h-5 w-5"})})},hS=({children:t})=>{const e=di(),{t:n,isInitialized:r}=Ln(),i=[{path:"/",label:n("nav.home"),icon:eS},{path:"/generate/structured",label:n("nav.structuredInput"),icon:_i},{path:"/generate/free",label:n("nav.freePrompt"),icon:qs},{path:"/history",label:n("nav.history"),icon:bg}];return r?M("div",{className:"min-h-screen bg-neutral-50",children:[S("header",{className:"bg-white border-b border-neutral-200",children:S("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:M("div",{className:"flex justify-between items-center h-16",children:[M("div",{className:"flex items-center",children:[S(fS,{}),S("img",{src:dS,alt:n("header.logo"),className:"h-12 w-auto"})]}),M("div",{className:"flex items-center space-x-4",children:[S("nav",{className:"hidden md:flex space-x-4",children:i.map(o=>{const s=o.icon,l=e.pathname===o.path;return M(on,{to:o.path,className:`flex items-center px-2 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap ${l?"bg-tum-blue-100 text-tum-blue-700":"text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100"}`,children:[S(s,{className:"h-5 w-5 mr-2"}),o.label]},o.path)})}),S(cS,{})]})]})})}),S("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t})]}):S("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center",children:M("div",{className:"text-center",children:[S("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-tum-blue-600 mx-auto mb-4"}),S("p",{className:"text-neutral-600",children:"Loading..."})]})})},pS=t=>t.replace(/_([a-z])/g,(e,n)=>n.toUpperCase()),mS=()=>{const[t,e]=b.useState([]),[n,r]=b.useState(!0),{t:i,isInitialized:o}=Ln(),[s,l]=b.useState(!1),a=h=>{if(!h)return"N/A";const p=pS(h),m=i(`documentTypes.${p}`);return m&&m!==`documentTypes.${p}`?m:{course_registration:i("documentTypes.courseRegistration"),event_notice:i("documentTypes.eventNotice"),schedule_request:i("documentTypes.scheduleRequest"),schedule_announcement:i("documentTypes.scheduleAnnouncement"),schedule_change:i("documentTypes.scheduleChange"),student_reply:i("documentTypes.studentReply"),holiday_notice:i("documentTypes.holidayNotice"),free_prompt:i("documentTypes.freeTextGeneration"),freeTextGeneration:i("documentTypes.freeTextGeneration"),announcement:i("documentTypes.announcement"),student_notice:i("documentTypes.studentNotice"),meeting_minutes:i("documentTypes.meetingMinutes"),formal_letter:i("documentTypes.formalLetter"),notification:i("documentTypes.notification"),report:i("documentTypes.report"),letter:i("documentTypes.letter"),memo:i("documentTypes.memo"),policy:i("documentTypes.policy"),guideline:i("documentTypes.guideline")}[h]||h||"N/A"},u=h=>{if(!h)return"Untitled Draft";if(h.source){const p=h.source;switch(h.type){case"student_reply":return p.studentName?`Reply to ${p.studentName}`:"Student Reply";case"holiday_notice":return p.holidayName&&p.holidayDate?`${p.holidayName} - ${p.holidayDate}`:p.holidayName?p.holidayName:p.holidayDate?`Holiday - ${p.holidayDate}`:"Holiday Notice";case"course_registration":const m=p.targetAudience||"Students",v=p.startDate||"",g=p.endDate||"";return v&&g?`${m} - ${v} to ${g}`:v?`${m} - From ${v}`:`${m} Registration`;case"event_notice":const y=p.courseName||p.eventName||"",x=p.eventTime||"";return y&&x?`${y} - ${x}`:y||"Event Notice";case"schedule_request":const w=p.courseName||"",N=p.courseCode||"";return w&&N?`${w} (${N}) - Schedule Request`:w?`${w} - Schedule Request`:"Schedule Request";case"schedule_announcement":const E=p.courseName||"";p.courseCode;const C=p.weeklyTime||"";return E&&C?`${E} - ${C}`:E?`${E} - Schedule Announcement`:"Schedule Announcement";case"schedule_change":const k=p.courseName||"",A=p.oldTime||"",T=p.newTime||"";return k&&A&&T?`${k} - ${A} → ${T}`:k?`${k} - Schedule Change`:"Schedule Change"}}if(h.type==="freeTextGeneration"&&h.content){const p=h.content.replace(/<[^>]*>/g,"").replace(/<br>/g," "),m=p.split(`
`).filter(g=>g.trim().length>0);for(const g of m){const y=g.trim();if(y.includes("**")||/^[A-Z\s]+$/.test(y)){const x=y.replace(/\*\*/g,"").trim();if(x.length>5&&x.length<80)return x}if(y.startsWith("Dear ")||y.startsWith("Sehr geehrte ")){const x=y.match(/(?:Dear|Sehr geehrte)\s+([^,]+)/);if(x&&x[1])return`Letter to ${x[1].trim()}`}if(y.toLowerCase().includes("notice")||y.toLowerCase().includes("bekanntmachung"))return"Notice";if(y.toLowerCase().includes("announcement")||y.toLowerCase().includes("ankündigung"))return"Announcement";if(y.toLowerCase().includes("schedule")||y.toLowerCase().includes("termin"))return"Schedule Information";if(y.toLowerCase().includes("exam")||y.toLowerCase().includes("prüfung"))return"Exam Information";if(y.toLowerCase().includes("course")||y.toLowerCase().includes("kurs"))return"Course Information";if(y.toLowerCase().includes("holiday")||y.toLowerCase().includes("feiertag"))return"Holiday Notice";if(y.toLowerCase().includes("meeting")||y.toLowerCase().includes("sitzung"))return"Meeting Information"}const v=p.split(/[.!?。！？]/).filter(g=>g.trim().length>10);if(v.length>0){const y=v[0].trim().replace(/^\s*[A-Z\s]+\s*/,"");if(y.length>5)return y.length>60?y.substring(0,60)+"...":y}if(h.prompt){const g=h.prompt.trim();if(g.length>0)return g.length>60?g.substring(0,60)+"...":g}}if(h.content){const p=h.content.replace(/<[^>]*>/g,"").replace(/<br>/g," "),m=p.split(/[.!?。！？]/).filter(v=>v.trim().length>0);if(m.length>0){const v=m[0].trim();if(v.length>10)return v.length>60?v.substring(0,60)+"...":v}return p.length>50?p.substring(0,50)+"...":p||"Untitled Draft"}return"Untitled Draft"},c=h=>{if(!h||isNaN(Date.parse(h)))return"-";const p=new Date(h),m=new Date,v=(m-p)/(1e3*60*60);if(v<24)if(v<1){const g=Math.floor((m-p)/6e4);return g<1?i("draftHistory.timeAgo.justNow"):i("draftHistory.timeAgo.minutesAgo",{minutes:g})}else{const g=Math.floor(v);return g===1?i("draftHistory.timeAgo.hourAgo"):i("draftHistory.timeAgo.hoursAgo",{hours:g})}return p.toLocaleString(i("language")==="de"?"de-DE":"en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};b.useEffect(()=>{o&&(r(!0),fetch("/api/drafts").then(h=>h.json()).then(h=>e(h.slice(0,5))).catch(()=>e([])).finally(()=>r(!1)))},[o]);const d=async h=>{try{await navigator.clipboard.writeText(h),l(!0),setTimeout(()=>{l(!1)},3e3)}catch(p){console.error("Copy failed:",p)}},f=async h=>{const p=t.filter(m=>m.id!==h);e(p);try{await fetch(`/api/drafts/${h}`,{method:"DELETE"})}catch(m){console.error("Failed to delete draft:",m),fetch("/api/drafts").then(v=>v.json()).then(v=>e(v.slice(0,5)))}};return M("div",{className:"max-w-6xl mx-auto space-y-6",children:[s&&M("div",{className:"fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg flex items-center space-x-2 z-50",children:[S(Cl,{className:"h-4 w-4"}),S("span",{children:i("messages.copySuccess")})]}),M("div",{className:"text-center",children:[S("h1",{className:"text-3xl font-bold text-tum-gray-900 mb-4",children:i("dashboard.welcome.title")}),S("p",{className:"text-lg text-tum-gray-600 mb-8 max-w-2xl mx-auto",children:i("dashboard.welcome.subtitle")}),M("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[M(on,{to:"/generate/structured",className:"btn-primary inline-flex items-center",children:[S(_i,{className:"h-6 w-6 mr-2"}),i("dashboard.welcome.structuredButton")]}),M(on,{to:"/generate/free",className:"btn-outline inline-flex items-center",children:[S(qs,{className:"h-6 w-6 mr-2"}),i("dashboard.welcome.freeButton")]})]})]}),M("div",{className:"card p-6",children:[M("div",{className:"flex items-center justify-between mb-6",children:[S("h2",{className:"text-xl font-semibold text-tum-gray-900",children:i("dashboard.recentDrafts.title")}),S(on,{to:"/history",className:"text-tum-blue-600 hover:text-tum-blue-700 text-sm font-medium",children:i("dashboard.recentDrafts.viewAll")})]}),t.length===0?M("div",{className:"card p-12 text-center",children:[S(_i,{className:"h-20 w-20 text-neutral-400 mx-auto mb-4"}),S("p",{className:"text-neutral-500 mb-2",children:i("dashboard.recentDrafts.empty.title")}),S(on,{to:"/generate/structured",className:"btn-primary block mt-4 mx-auto w-max",children:i("dashboard.recentDrafts.empty.button")})]}):S("div",{className:"space-y-4",children:t.map(h=>S("div",{className:"border border-tum-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:M("div",{className:"flex items-start justify-between",children:[M("div",{className:"flex-1",children:[M("div",{className:"flex items-center gap-2 mb-2",children:[S("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-tum-blue-100 text-tum-blue-800",children:a(h.type)}),S("span",{className:"text-sm text-tum-gray-500",children:c(h.createdAt)})]}),S("h3",{className:"font-medium text-tum-gray-900 mb-2",children:u(h)}),S("div",{className:"text-sm text-tum-gray-600 line-clamp-2",dangerouslySetInnerHTML:{__html:(h.content||"").substring(0,150)+"..."}})]}),M("div",{className:"flex items-center gap-2 ml-4",children:[S("button",{onClick:()=>d(h.content),className:"p-2 text-tum-gray-500 hover:text-tum-gray-700 hover:bg-tum-gray-100 rounded",title:i("actions.copy"),children:S(Nl,{className:"h-5 w-5"})}),S(on,{to:`/draft/${h.id}`,className:"p-2 text-tum-gray-500 hover:text-tum-gray-700 hover:bg-tum-gray-100 rounded",title:i("actions.edit"),children:S(Tg,{className:"h-5 w-5"})}),S("button",{onClick:()=>f(h.id),className:"p-2 text-tum-gray-500 hover:text-red-600 hover:bg-red-50 rounded",title:i("actions.delete"),children:S(Dg,{className:"h-5 w-5"})})]})]})},h.id))})]}),M("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[S("div",{className:"card p-6",children:M("div",{className:"flex items-center",children:[S("div",{className:"p-2 bg-tum-blue-100 rounded-lg",children:S(_i,{className:"h-8 w-8 text-tum-blue-600"})}),M("div",{className:"ml-4",children:[S("p",{className:"text-sm font-medium text-tum-gray-600",children:i("dashboard.stats.totalGenerated")}),S("p",{className:"text-2xl font-bold text-tum-gray-900",children:t.length})]})]})}),S("div",{className:"card p-6",children:M("div",{className:"flex items-center",children:[S("div",{className:"p-2 bg-tum-orange-100 rounded-lg",children:S(Yx,{className:"h-8 w-8 text-tum-orange-600"})}),M("div",{className:"ml-4",children:[S("p",{className:"text-sm font-medium text-tum-gray-600",children:i("dashboard.stats.todayGenerated")}),S("p",{className:"text-2xl font-bold text-tum-gray-900",children:t.filter(h=>h.createdAt&&new Date(h.createdAt).toDateString()===new Date().toDateString()).length})]})]})}),S("div",{className:"card p-6",children:M("div",{className:"flex items-center",children:[S("div",{className:"p-2 bg-tum-gray-100 rounded-lg",children:S(qs,{className:"h-8 w-8 text-tum-gray-600"})}),M("div",{className:"ml-4",children:[S("p",{className:"text-sm font-medium text-tum-gray-600",children:i("dashboard.stats.avgTime")}),S("p",{className:"text-2xl font-bold text-tum-gray-900",children:i("dashboard.stats.avgTimeValue")})]})]})})]})]})},gS=()=>{const t=Eo(),{t:e,isInitialized:n}=Ln(),[r,i]=b.useState({}),[o,s]=b.useState(null),[l,a]=b.useState(!1),[u,c]=b.useState(!1),[d,f]=b.useState(""),[h,p]=b.useState(null);if(!n)return null;const m=[{value:"course_registration",label:e("documentTypes.courseRegistration")},{value:"event_notice",label:e("documentTypes.eventNotice")},{value:"schedule_request",label:e("documentTypes.scheduleRequest")},{value:"schedule_announcement",label:e("documentTypes.scheduleAnnouncement")},{value:"schedule_change",label:e("documentTypes.scheduleChange")},{value:"student_reply",label:e("documentTypes.studentReply")},{value:"holiday_notice",label:e("documentTypes.holidayNotice")}],v={course_registration:[{name:"startDate",label:e("form.startDate"),placeholder:e("placeholders.startDate"),required:!0},{name:"endDate",label:e("form.endDate"),placeholder:e("placeholders.endDate"),required:!0},{name:"targetAudience",label:e("form.recipient"),placeholder:e("placeholders.recipient"),required:!0},{name:"name",label:e("form.author"),placeholder:e("form.author"),required:!0},{name:"additionalNote",label:e("form.additionalNote"),placeholder:e("placeholders.additionalNote"),type:"textarea",required:!1}],event_notice:[{name:"courseName",label:e("form.eventName"),placeholder:e("form.eventName"),required:!0},{name:"additionalNote",label:e("form.eventIntro"),placeholder:e("form.eventIntro"),type:"textarea",required:!0},{name:"eventTime",label:e("form.eventTime"),placeholder:e("form.eventTime"),required:!0},{name:"location",label:e("form.location"),placeholder:e("form.location"),required:!0},{name:"targetAudience",label:e("form.recipient"),placeholder:e("placeholders.recipient"),required:!0},{name:"language",label:e("form.language"),placeholder:e("form.language"),required:!0},{name:"name",label:e("form.author"),placeholder:e("form.author"),required:!0},{name:"registration",label:e("form.registration"),placeholder:e("form.registration"),required:!1}],schedule_request:[{name:"courseName",label:e("form.courseName"),placeholder:e("form.courseName"),required:!0},{name:"courseCode",label:e("form.courseCode"),placeholder:e("form.courseCode"),required:!0},{name:"semester",label:e("form.semester"),placeholder:e("form.semester"),required:!0},{name:"timeOptions",label:e("form.timeOptions"),placeholder:e("form.timeOptions"),type:"textarea",required:!0},{name:"replyDeadline",label:e("form.replyDeadline"),placeholder:e("form.replyDeadline"),required:!0},{name:"name",label:e("form.author"),placeholder:e("form.author"),required:!0},{name:"targetAudience",label:e("form.recipient"),placeholder:e("placeholders.recipient"),required:!0}],schedule_announcement:[{name:"courseName",label:e("form.courseName"),placeholder:e("form.courseName"),required:!0},{name:"courseCode",label:e("form.courseCode"),placeholder:e("form.courseCode"),required:!0},{name:"instructorName",label:e("form.instructorName"),placeholder:e("form.instructorName"),required:!0},{name:"courseStartDate",label:e("form.courseStartDate"),placeholder:e("form.courseStartDate"),required:!0},{name:"weeklyTime",label:e("form.weeklyTime"),placeholder:e("form.weeklyTime"),required:!0},{name:"weeklyLocation",label:e("form.weeklyLocation"),placeholder:e("form.weeklyLocation"),required:!0},{name:"targetAudience",label:e("form.recipient"),placeholder:e("placeholders.recipient"),required:!0},{name:"name",label:e("form.author"),placeholder:e("form.author"),required:!0}],schedule_change:[{name:"courseName",label:e("form.courseName"),placeholder:e("form.courseName"),required:!0},{name:"courseCode",label:e("form.courseCode"),placeholder:e("form.courseCode"),required:!0},{name:"reason",label:e("form.reason"),placeholder:e("form.reason"),type:"textarea",required:!0},{name:"oldTime",label:e("form.oldTime"),placeholder:e("form.oldTime"),required:!0},{name:"oldLocation",label:e("form.oldLocation"),placeholder:e("form.oldLocation"),required:!0},{name:"newTime",label:e("form.newTime"),placeholder:e("form.newTime"),required:!0},{name:"newLocation",label:e("form.newLocation"),placeholder:e("form.newLocation"),required:!0},{name:"targetAudience",label:e("form.recipient"),placeholder:e("placeholders.recipient"),required:!0},{name:"name",label:e("form.author"),placeholder:e("form.author"),required:!0}],student_reply:[{name:"studentName",label:e("form.studentName"),placeholder:e("form.studentName"),required:!0},{name:"name",label:e("form.author"),placeholder:e("form.author"),required:!0}],holiday_notice:[{name:"holidayName",label:e("form.holidayName"),placeholder:e("form.holidayName"),required:!0},{name:"holidayDate",label:e("form.holidayDate"),placeholder:e("form.holidayDate"),required:!0},{name:"name",label:e("form.author"),placeholder:e("form.author"),required:!0}]},g=v[r.documentType]||[],y=(E,C)=>{f(""),i(k=>({...k,[E]:C}))},x=async()=>{if(!r.documentType){f(e("structuredInput.form.selectType"));return}const C=v[r.documentType].find(k=>k.required&&!r[k.name]);if(C){f(`${e("structuredInput.error")} - ${C.label}`);return}a(!0),s(null),f("");try{const{documentType:k,...A}=r;let T="/api/generate",z={...A,templateType:k};k==="student_reply"?(T="/api/student_reply",z={student_name:r.studentName,name:r.name}):k==="holiday_notice"&&(T="/api/holiday_notice",z={holiday_name:r.holidayName,holiday_date:r.holidayDate,name:r.name});const _=await fetch(T,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(z)});if(!_.ok){const Rt=await _.json().catch(()=>({detail:"Generation failed"}));throw new Error(Rt.detail||"Generation failed")}const fe=await _.json();s(fe.content),p(r)}catch(k){console.error("Generation error:",k),f(k.message||e("structuredInput.generationError"))}finally{a(!1)}},w=async()=>{if(!(!o||!h)){c(!0),f("");try{const E=e(`documentTypes.${h.documentType}`)||h.documentType,C=h.targetAudience?`${E} - ${h.targetAudience}`:E,k={type:h.documentType,title:C,content:o,createdAt:new Date().toISOString(),source:h},A=await fetch("/api/drafts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});if(!A.ok){const z=await A.json().catch(()=>({}));throw new Error(z.detail||e("draftEditor.saveError"))}const T=await A.json();t(`/draft/${T.id}`)}catch(E){console.error("Save error:",E),f(E.message||e("draftEditor.saveError"))}finally{c(!1)}}},N=()=>{if(!o)return;const E=document.createElement("div");E.innerHTML=o.replace(/<br>/g,`
`),navigator.clipboard.writeText(E.innerText)};return M("div",{className:"max-w-7xl mx-auto space-y-6",children:[M("div",{children:[S("h1",{className:"text-3xl font-bold text-neutral-900 mb-2",children:e("structuredInput.title")}),S("p",{className:"text-lg text-neutral-600",children:e("structuredInput.subtitle")})]}),M("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[S("div",{className:"card p-6",children:M("div",{className:"space-y-6",children:[M("div",{children:[S("label",{className:"block text-sm font-medium text-tum-gray-700 mb-2",children:e("form.type")}),M("select",{value:r.documentType||"",onChange:E=>y("documentType",E.target.value),className:"select w-full",children:[S("option",{value:"",children:e("structuredInput.form.selectType")}),m.map(E=>S("option",{value:E.value,children:E.label},E.value))]})]}),g.map(E=>M("div",{children:[M("label",{className:"block text-sm font-medium text-tum-gray-700 mb-2",children:[E.label,E.required&&S("span",{className:"text-red-600 ml-1",children:"*"})]}),E.type==="textarea"?S("textarea",{value:r[E.name]||"",onChange:C=>y(E.name,C.target.value),className:"textarea h-32",placeholder:E.placeholder}):S("input",{type:"text",value:r[E.name]||"",onChange:C=>y(E.name,C.target.value),className:"input",placeholder:E.placeholder})]},E.name)),d&&S("div",{className:"text-red-600 text-sm",children:d}),S("button",{onClick:x,disabled:l||!r.documentType,className:"btn-primary w-full flex items-center justify-center",children:l?M(La,{children:[S(Zn,{className:"h-5 w-5 mr-2 animate-spin"}),e("messages.loading")]}):e("actions.generate")})]})}),M("div",{className:"card p-6 sticky top-4",children:[S("h2",{className:"text-xl font-bold text-neutral-900 mb-4",children:e("structuredInput.output.title")}),S("div",{className:"bg-neutral-50 p-4 rounded-lg min-h-[400px] max-h-[60vh] overflow-y-auto",children:l?M("div",{className:"flex items-center justify-center h-full",children:[S(Zn,{className:"h-8 w-8 mr-2 animate-spin text-tum-blue"}),S("span",{className:"text-neutral-600",children:e("messages.loading")})]}):o?S("div",{dangerouslySetInnerHTML:{__html:o},className:"prose prose-sm max-w-none"}):S("div",{className:"flex items-center justify-center h-full",children:S("p",{className:"text-neutral-500 text-center",children:e("structuredInput.output.fillForm")})})}),o&&!l&&M("div",{className:"mt-4 flex gap-4",children:[M("button",{onClick:N,className:"btn-secondary",children:[S(Nl,{className:"h-4 w-4 mr-2"}),e("actions.copy")]}),M("button",{onClick:w,disabled:u,className:"btn-primary",children:[u?S(Zn,{className:"h-4 w-4 mr-2 animate-spin"}):S(Og,{className:"h-4 w-4 mr-2"}),e(u?"draftEditor.saving":"structuredInput.output.saveEdit")]})]})]})]})]})},yS=({selectedTone:t,onToneChange:e})=>{const{t:n}=Ln(),r=[{value:"neutral",label:n("tone.neutral.label"),description:n("tone.neutral.description"),color:"bg-tum-gray-100 text-tum-gray-700 border-tum-gray-300"},{value:"friendly",label:n("tone.friendly.label"),description:n("tone.friendly.description"),color:"bg-tum-blue-100 text-tum-blue-700 border-tum-blue-300"},{value:"firm",label:n("tone.firm.label"),description:n("tone.firm.description"),color:"bg-tum-orange-100 text-tum-orange-700 border-tum-orange-300"}];return S("div",{className:"space-y-3",children:r.map(i=>M("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition-colors ${t===i.value?`${i.color} border-current`:"border-tum-gray-200 hover:border-tum-gray-300"}`,children:[S("input",{type:"radio",name:"tone",value:i.value,checked:t===i.value,onChange:o=>e(o.target.value),className:"sr-only"}),M("div",{className:"flex-1",children:[S("div",{className:"font-medium",children:i.label}),S("div",{className:"text-sm opacity-75",children:i.description})]}),S("div",{className:`w-4 h-4 rounded-full border-2 ${t===i.value?"border-current bg-current":"border-tum-gray-300"}`,children:t===i.value&&S("div",{className:"w-2 h-2 bg-white rounded-full m-0.5"})})]},i.value))})},vS=()=>{const t=Eo(),{t:e,isInitialized:n}=Ln(),[r,i]=b.useState(""),[o,s]=b.useState("neutral"),[l,a]=b.useState(null),[u,c]=b.useState(!1),[d,f]=b.useState(""),[h,p]=b.useState(!1),m=["Write a notice to inform students about exam schedule changes","Create a formal letter to faculty members about upcoming meeting","Generate a holiday announcement for the university","Write a course registration reminder for students"],v=async()=>{if(!r.trim()){f(e("freePrompt.error"));return}c(!0),f("");try{const N=await fetch("/api/free_prompt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:r,tone:o})});if(!N.ok)throw new Error(e("freePrompt.generationError"));const E=await N.json(),C={type:"freeTextGeneration",title:`${e("freePrompt.title")} - ${new Date().toLocaleDateString()}`,content:E.content,tone:o,prompt:r,createdAt:new Date().toISOString()};a(C)}catch(N){console.error("Free prompt generation error:",N),f(N.message||e("freePrompt.generationError"))}finally{c(!1)}},g=async()=>{if(console.log("handleCopy called, generatedDraft:",l),l)try{console.log("Copying content:",l.content),await navigator.clipboard.writeText(l.content),console.log("Copy successful, showing toast"),p(!0),console.log("showCopySuccess set to true"),setTimeout(()=>{console.log("Hiding copy success toast"),p(!1)},3e3)}catch(N){console.error("Copy failed:",N),f("Copy failed. Please try again.")}else console.log("No generated draft to copy")},y=async()=>{if(l)try{const N=await fetch("/api/drafts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!N.ok){const C=await N.json().catch(()=>({}));throw new Error(C.detail||e("draftEditor.saveError"))}const E=await N.json();t(`/draft/${E.id}`)}catch(N){console.error("Save error:",N),f(N.message||e("draftEditor.saveError"))}},x=()=>{a(null),v()},w=N=>{i(N)};return n?M("div",{className:"max-w-7xl mx-auto space-y-8",children:[M("div",{className:"text-center",children:[S("h1",{className:"text-3xl font-bold text-neutral-900 mb-4",children:e("freePrompt.title")}),S("p",{className:"text-lg text-neutral-600",children:e("freePrompt.subtitle")})]}),M("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[S("div",{className:"lg:col-span-1",children:M("div",{className:"card p-6",children:[S("h2",{className:"text-xl font-semibold text-neutral-900 mb-6",children:e("freePrompt.form.title")}),M("div",{className:"space-y-6",children:[M("div",{children:[M("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:[e("freePrompt.form.description")," ",S("span",{className:"text-red-500",children:"*"})]}),S("textarea",{value:r,onChange:N=>i(N.target.value),placeholder:e("freePrompt.form.placeholder"),className:"textarea w-full",rows:4})]}),M("div",{children:[S("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:e("freePrompt.form.examples")}),S("div",{className:"space-y-2",children:m.map((N,E)=>S("button",{onClick:()=>w(N),className:"w-full text-left p-3 text-sm text-neutral-600 bg-neutral-50 rounded-lg hover:bg-neutral-100 transition-colors",children:N},E))})]}),M("div",{children:[S("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:e("freePrompt.form.tone")}),S(yS,{selectedTone:o,onToneChange:s})]}),d&&S("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-md",children:d}),S("button",{onClick:v,disabled:u,className:"btn-primary w-full flex items-center justify-center",children:u?M(La,{children:[S(Zn,{className:"h-5 w-5 mr-2 animate-spin"}),e("freePrompt.generating")]}):M(La,{children:[S(aS,{className:"h-5 w-5 mr-2"}),e("freePrompt.generateDraft")]})})]})]})}),S("div",{className:"lg:col-span-2",children:M("div",{className:"card p-0 flex flex-col h-[600px] min-h-[400px]",children:[M("div",{className:"p-6 flex-1 overflow-auto",children:[S("h2",{className:"text-xl font-semibold text-neutral-900 mb-6",children:e("freePrompt.output.title")}),l?M("div",{className:"space-y-6",children:[M("div",{className:"flex items-center justify-between",children:[S("h3",{className:"font-medium text-neutral-900 text-lg",children:l.title}),S("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800",children:e("documentTypes.freeTextGeneration")})]}),S("div",{className:"bg-neutral-50 rounded-lg p-6 font-arial text-base leading-relaxed whitespace-pre-wrap",children:l.content})]}):M("div",{className:"text-center py-16",children:[S(qs,{className:"h-20 w-20 text-neutral-400 mx-auto mb-4"}),S("p",{className:"text-neutral-500 text-lg",children:e("freePrompt.output.fillForm")})]})]}),M("div",{className:"flex gap-3 p-4 border-t border-neutral-200 bg-white shrink-0 relative",children:[!1,h&&M("div",{className:"absolute -top-16 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg flex items-center space-x-2 z-50",children:[S(Cl,{className:"h-4 w-4"}),S("span",{children:e("messages.copySuccess")})]}),!1,M("button",{onClick:g,disabled:!l,className:"btn-outline flex-1 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:[S(Nl,{className:"h-5 w-5 mr-2"}),e("freePrompt.output.copyContent")]}),M("button",{onClick:y,className:"btn-primary flex-1 flex items-center justify-center",children:[S(Og,{className:"h-5 w-5 mr-2"}),e("freePrompt.output.saveEdit")]}),S("button",{onClick:x,className:"btn-secondary flex items-center justify-center",title:e("freePrompt.output.regenerate"),children:S(Mg,{className:"h-5 w-5"})})]})]})})]})]}):null};function we(t){this.content=t}we.prototype={constructor:we,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new we(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new we(n)},addToStart:function(t,e){return new we([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new we(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new we(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=we.from(t),t.size?new we(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=we.from(t),t.size?new we(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=we.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};we.from=function(t){if(t instanceof we)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new we(e)};function Ag(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=Ag(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function Pg(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),l=e.child(--o),a=s.nodeSize;if(s==l){n-=a,r-=a;continue}if(!s.sameMarkup(l))return{a:n,b:r};if(s.isText&&s.text!=l.text){let u=0,c=Math.min(s.text.length,l.text.length);for(;u<c&&s.text[s.text.length-u-1]==l.text[l.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||l.content.size){let u=Pg(s.content,l.content,n-1,r-1);if(u)return u}n-=a,r-=a}}class O{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,l=0;l<n;s++){let a=this.content[s],u=l+a.nodeSize;if(u>e&&r(a,i+l,o||null,s)!==!1&&a.content.size){let c=l+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,n-c),r,i+c)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(l,a)=>{let u=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&u||l.isTextblock)&&r&&(s?s=!1:o+=r),o+=u},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new O(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let l=this.content[o],a=s+l.nodeSize;a>e&&((s<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,n-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,n-s-1))),r.push(l),i+=l.nodeSize),s=a}return new O(r,i)}cutByIndex(e,n){return e==n?O.empty:e==0&&n==this.content.length?this:new O(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new O(i,o)}addToStart(e){return new O([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new O(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return Ag(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Pg(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Jo(0,e);if(e==this.size)return Jo(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||n>0?Jo(r+1,s):Jo(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return O.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new O(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return O.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new O(n||e,r)}static from(e){if(!e)return O.empty;if(e instanceof O)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new O([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}O.empty=new O([],0);const ha={index:0,offset:0};function Jo(t,e){return ha.index=t,ha.offset=e,ha}function Ks(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Ks(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Ks(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let K=class Pu{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ks(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Pu.none;if(e instanceof Pu)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};K.none=[];class Gs extends Error{}class P{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Rg(this.content,e+this.openStart,n);return r&&new P(r,this.openStart,this.openEnd)}removeBetween(e,n){return new P(Ig(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return P.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new P(O.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new P(e,r,i)}}P.empty=new P(O.empty,0,0);function Ig(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:l}=t.findIndex(n);if(i==e||o.isText){if(l!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(Ig(o.content,e-i-1,n-i-1)))}function Rg(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let l=Rg(s.content,e-o-1,n);return l&&t.replaceChild(i,s.copy(l))}function xS(t,e,n){if(n.openStart>t.depth)throw new Gs("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Gs("Inconsistent open depths");return Lg(t,e,n,0)}function Lg(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=Lg(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,l=s.content;return tr(s,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=SS(n,t);return tr(o,Bg(t,s,l,e,r))}else return tr(o,Js(t,e,r))}function zg(t,e){if(!e.type.compatibleContent(t.type))throw new Gs("Cannot join "+e.type.name+" onto "+t.type.name)}function Iu(t,e,n){let r=t.node(n);return zg(r,e.node(n)),r}function er(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Fi(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(er(t.nodeAfter,r),o++));for(let l=o;l<s;l++)er(i.child(l),r);e&&e.depth==n&&e.textOffset&&er(e.nodeBefore,r)}function tr(t,e){return t.type.checkContent(e),t.copy(e)}function Bg(t,e,n,r,i){let o=t.depth>i&&Iu(t,e,i+1),s=r.depth>i&&Iu(n,r,i+1),l=[];return Fi(null,t,i,l),o&&s&&e.index(i)==n.index(i)?(zg(o,s),er(tr(o,Bg(t,e,n,r,i+1)),l)):(o&&er(tr(o,Js(t,e,i+1)),l),Fi(e,n,i,l),s&&er(tr(s,Js(n,r,i+1)),l)),Fi(r,null,i,l),new O(l)}function Js(t,e,n){let r=[];if(Fi(null,t,n,r),t.depth>n){let i=Iu(t,e,n+1);er(tr(i,Js(t,e,n+1)),r)}return Fi(e,null,n,r),new O(r)}function SS(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(O.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class ao{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return K.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Qs(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(o),u=o-a;if(r.push(s,l,i+a),!u||(s=s.child(l),s.isText))break;o=u-1,i+=a+1}return new ao(n,r,o)}static resolveCached(e,n){let r=_f.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==n)return s}else _f.set(e,r=new kS);let i=r.elts[r.i]=ao.resolve(e,n);return r.i=(r.i+1)%wS,i}}class kS{constructor(){this.elts=[],this.i=0}}const wS=12,_f=new WeakMap;class Qs{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const CS=Object.create(null);let wn=class Ru{constructor(e,n,r,i=K.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||O.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Ks(this.attrs,n||e.defaultAttrs||CS)&&K.sameSet(this.marks,r||K.none)}copy(e=null){return e==this.content?this:new Ru(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Ru(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return P.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),l=i.start(s),u=i.node(s).content.cut(i.pos-l,o.pos-l);return new P(u,i.depth-s,o.depth-s)}replace(e,n,r){return xS(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return ao.resolveCached(this,e)}resolveNoCache(e){return ao.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),_g(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=O.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),l=s&&s.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<o;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=K.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!K.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=O.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};wn.prototype.text=void 0;class Ys extends wn{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):_g(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ys(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ys(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function _g(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class cr{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new NS(e,n);if(r.next==null)return cr.empty;let i=Fg(r);r.next&&r.err("Unexpected trailing text");let o=AS(DS(i));return PS(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,l){let a=s.matchFragment(e,r);if(a&&(!n||a.validEnd))return O.from(l.map(u=>u.createAndFill()));for(let u=0;u<s.next.length;u++){let{type:c,next:d}=s.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=o(d,l.concat(c));if(f)return f}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let l=i;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:l,next:a}=o.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}cr.empty=new cr(!0);class NS{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Fg(t){let e=[];do e.push(ES(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function ES(t){let e=[];do e.push(bS(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function bS(t){let e=OS(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=TS(t,e);else break;return e}function Ff(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function TS(t,e){let n=Ff(t),r=n;return t.eat(",")&&(t.next!="}"?r=Ff(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function MS(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.isInGroup(e)&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function OS(t){if(t.eat("(")){let e=Fg(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=MS(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function DS(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,l,a){let u={term:a,to:l};return e[s].push(u),u}function i(s,l){s.forEach(a=>a.to=l)}function o(s,l){if(s.type=="choice")return s.exprs.reduce((a,u)=>a.concat(o(u,l)),[]);if(s.type=="seq")for(let a=0;;a++){let u=o(s.exprs[a],l);if(a==s.exprs.length-1)return u;i(u,l=n())}else if(s.type=="star"){let a=n();return r(l,a),i(o(s.expr,a),a),[r(a)]}else if(s.type=="plus"){let a=n();return i(o(s.expr,l),a),i(o(s.expr,a),a),[r(a)]}else{if(s.type=="opt")return[r(l)].concat(o(s.expr,l));if(s.type=="range"){let a=l;for(let u=0;u<s.min;u++){let c=n();i(o(s.expr,a),c),a=c}if(s.max==-1)i(o(s.expr,a),a);else for(let u=s.min;u<s.max;u++){let c=n();r(a,c),i(o(s.expr,a),c),a=c}return[r(a)]}else{if(s.type=="name")return[r(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function $g(t,e){return e-t}function $f(t,e){let n=[];return r(e),n.sort($g);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:l,to:a}=o[s];!l&&n.indexOf(a)==-1&&r(a)}}}function AS(t){let e=Object.create(null);return n($f(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:l,to:a})=>{if(!l)return;let u;for(let c=0;c<i.length;c++)i[c][0]==l&&(u=i[c][1]);$f(t,a).forEach(c=>{u||i.push([l,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let o=e[r.join(",")]=new cr(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let l=i[s][1].sort($g);o.next.push({type:i[s][0],next:e[l.join(",")]||n(l)})}return o}}function PS(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let l=0;l<i.next.length;l++){let{type:a,next:u}=i.next[l];s.push(a.name),o&&!(a.isText||a.hasRequiredAttrs())&&(o=!1),r.indexOf(u)==-1&&r.push(u)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Vg(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function jg(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Hg(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function Wg(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new RS(t,r,e[r]);return n}let Vf=class Ug{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Wg(e,r.attrs),this.defaultAttrs=Vg(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==cr.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:jg(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new wn(this,this.computeAttrs(e),O.from(n),K.setFrom(r))}createChecked(e=null,n,r){return n=O.from(n),this.checkContent(n),new wn(this,this.computeAttrs(e),n,K.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=O.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(O.empty,!0);return o?new wn(this,e,n.append(o),K.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Hg(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:K.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new Ug(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function IS(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class RS{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?IS(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class El{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=Wg(e,i.attrs),this.excluded=null;let o=Vg(this.attrs);this.instance=o?new K(this,o):null}create(e=null){return!e&&this.instance?this.instance:new K(this,jg(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new El(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Hg(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class qg{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=we.from(e.nodes),n.marks=we.from(e.marks||{}),this.nodes=Vf.compile(this.spec.nodes,this),this.marks=El.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",l=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=cr.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=l=="_"?null:l?jf(this,l.split(" ")):l==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:jf(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Vf){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Ys(r,r.defaultAttrs,e,K.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return wn.fromJSON(this,e)}markFromJSON(e){return K.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function jf(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function LS(t){return t.tag!=null}function zS(t){return t.style!=null}class Cn{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(LS(i))this.tags.push(i);else if(zS(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new Wf(this,n,!1);return r.addAll(e,K.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Wf(this,n,!0);return r.addAll(e,K.none,n.from,n.to),P.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(FS(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(s.getAttrs){let a=s.getAttrs(n);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let l=n[s];if((l.priority==null?50:l.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Uf(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Uf(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Cn(e,Cn.schemaRules(e)))}}const Kg={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},BS={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Gg={ol:!0,ul:!0},uo=1,Lu=2,$i=4;function Hf(t,e,n){return e!=null?(e?uo:0)|(e==="full"?Lu:0):t&&t.whitespace=="pre"?uo|Lu:n&~$i}class Qo{constructor(e,n,r,i,o,s){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=K.none,this.match=o||(s&$i?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(O.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&uo)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=O.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(O.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Kg.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Wf{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,s=Hf(null,n.preserveWhitespace,0)|(r?$i:0);i?o=new Qo(i.type,i.attrs,K.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new Qo(null,null,K.none,!0,null,s):o=new Qo(e.schema.topNodeType,null,K.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&Lu?"full":this.localPreserveWS||(i.options&uo)>0;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],l=e.previousSibling;(!s||l&&l.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),l;Gg.hasOwnProperty(s)&&this.parser.normalizeLists&&_S(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(a?a.ignore:BS.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let u,c=this.needsBlock;if(Kg.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),u=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=a&&a.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),u&&this.sync(o),this.needsBlock=c}else{let u=this.readStyles(e,n);u&&this.addElementByRule(e,a,u,a.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let l=void 0;;){let a=this.parser.matchStyle(o,s,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(u=>!a.clearMark(u)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,i){let o,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let a=this.enter(s,n.attrs||null,r,n.preserveWhitespace);a&&(o=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r,!1));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}o&&this.sync(l)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let s=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];s!=l;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,n);this.findAtPoint(e,o)}findPlace(e,n,r){let i,o;for(let s=this.open,l=0;s>=0;s--){let a=this.nodes[s],u=a.findWrapping(e);if(u&&(!i||i.length>u.length+l)&&(i=u,o=a,!u.length))break;if(a.solid){if(r)break;l+=2}}if(!i)return null;this.sync(o);for(let s=0;s<i.length;s++)n=this.enterInner(i[s],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let s=K.none;for(let l of i.concat(e.marks))(o.type?o.type.allowsMarkType(l.type):qf(l.type,e.type))&&(s=l.addToSet(s));return o.content.push(e.mark(s)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r,!1);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let l=Hf(e,o,s.options);s.options&$i&&s.content.length==0&&(l|=$i);let a=K.none;return r=r.filter(u=>(s.type?s.type.allowsMarkType(u.type):qf(u.type,e))?(a=u.addToSet(a),!1):!0),this.nodes.push(new Qo(e,n,a,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=uo)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(l,a)=>{for(;l>=0;l--){let u=n[l];if(u==""){if(l==n.length-1||l==0)continue;for(;a>=o;a--)if(s(l-1,a))return!0;return!1}else{let c=a>0||a==0&&i?this.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!c||c.name!=u&&!c.isInGroup(u))return!1;a--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function _S(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Gg.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function FS(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Uf(t){let e={};for(let n in t)e[n]=t[n];return e}function qf(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=l=>{o.push(l);for(let a=0;a<l.edgeCount;a++){let{type:u,next:c}=l.edge(a);if(u==e||o.indexOf(c)<0&&s(c))return!0}};if(s(i.contentMatch))return!0}}class yr{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=pa(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let l=0,a=0;for(;l<o.length&&a<s.marks.length;){let u=s.marks[a];if(!this.marks[u.type.name]){a++;continue}if(!u.eq(o[l][0])||u.type.spec.spanning===!1)break;l++,a++}for(;l<o.length;)i=o.pop()[1];for(;a<s.marks.length;){let u=s.marks[a++],c=this.serializeMark(u,s.isInline,n);c&&(o.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=gs(pa(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&gs(pa(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return gs(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new yr(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Kf(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Kf(e.marks)}}function Kf(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function pa(t){return t.document||window.document}const Gf=new WeakMap;function $S(t){let e=Gf.get(t);return e===void 0&&Gf.set(t,e=VS(t)),e}function VS(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function gs(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=$S(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let l,a=n?t.createElementNS(n,i):t.createElement(i),u=e[1],c=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(let d in u)if(u[d]!=null){let f=d.indexOf(" ");f>0?a.setAttributeNS(d.slice(0,f),d.slice(f+1),u[d]):a.setAttribute(d,u[d])}}for(let d=c;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:h,contentDOM:p}=gs(t,f,n,r);if(a.appendChild(h),p){if(l)throw new RangeError("Multiple content holes");l=p}}}return{dom:a,contentDOM:l}}const Jg=65535,Qg=Math.pow(2,16);function jS(t,e){return t+e*Qg}function Jf(t){return t&Jg}function HS(t){return(t-(t&Jg))/Qg}const Yg=1,Xg=2,ys=4,Zg=8;class zu{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Zg)>0}get deletedBefore(){return(this.delInfo&(Yg|ys))>0}get deletedAfter(){return(this.delInfo&(Xg|ys))>0}get deletedAcross(){return(this.delInfo&ys)>0}}class Xe{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Xe.empty)return Xe.empty}recover(e){let n=0,r=Jf(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+HS(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let u=this.ranges[l+o],c=this.ranges[l+s],d=a+u;if(e<=d){let f=u?e==a?-1:e==d?1:n:n,h=a+i+(f<0?0:c);if(r)return h;let p=e==(n<0?a:d)?null:jS(l/3,e-a),m=e==a?Xg:e==d?Yg:ys;return(n<0?e!=a:e!=d)&&(m|=Zg),new zu(h,m,p)}i+=c-u}return r?e+i:new zu(e+i,0,null)}touches(e,n){let r=0,i=Jf(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+o],c=a+u;if(e<=c&&l==i*3)return!0;r+=this.ranges[l+s]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),u=this.ranges[i+n],c=this.ranges[i+r];e(l,l+u,a,a+c),o+=c-u}}invert(){return new Xe(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Xe.empty:new Xe(e<0?[0,-e,0]:[0,0,e])}}Xe.empty=new Xe([]);class co{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new co(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new co;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this._maps[o],l=s.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this._maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new zu(e,i,null)}}const ma=Object.create(null);class Re{getMap(){return Xe.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=ma[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in ma)throw new RangeError("Duplicate use of step JSON ID "+e);return ma[e]=n,n.prototype.jsonID=e,n}}class ae{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new ae(e,null)}static fail(e){return new ae(null,e)}static fromReplace(e,n,r,i){try{return ae.ok(e.replace(n,r,i))}catch(o){if(o instanceof Gs)return ae.fail(o.message);throw o}}}function Qc(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(Qc(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return O.fromArray(r)}class cn extends Re{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new P(Qc(n.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return ae.fromReplace(e,this.from,this.to,o)}invert(){return new Ot(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new cn(n.pos,r.pos,this.mark)}merge(e){return e instanceof cn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new cn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new cn(n.from,n.to,e.markFromJSON(n.mark))}}Re.jsonID("addMark",cn);class Ot extends Re{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new P(Qc(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return ae.fromReplace(e,this.from,this.to,r)}invert(){return new cn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ot(n.pos,r.pos,this.mark)}merge(e){return e instanceof Ot&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ot(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ot(n.from,n.to,e.markFromJSON(n.mark))}}Re.jsonID("removeMark",Ot);class dn extends Re{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ae.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return ae.fromReplace(e,this.pos,this.pos+1,new P(O.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new dn(this.pos,n.marks[i]);return new dn(this.pos,this.mark)}}return new dr(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new dn(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new dn(n.pos,e.markFromJSON(n.mark))}}Re.jsonID("addNodeMark",dn);class dr extends Re{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ae.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return ae.fromReplace(e,this.pos,this.pos+1,new P(O.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new dn(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new dr(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new dr(n.pos,e.markFromJSON(n.mark))}}Re.jsonID("removeNodeMark",dr);class ge extends Re{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Bu(e,this.from,this.to)?ae.fail("Structure replace would overwrite content"):ae.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Xe([this.from,this.to-this.from,this.slice.size])}invert(e){return new ge(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new ge(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof ge)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?P.empty:new P(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ge(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?P.empty:new P(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ge(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ge(n.from,n.to,P.fromJSON(e,n.slice),!!n.structure)}}Re.jsonID("replace",ge);class ve extends Re{constructor(e,n,r,i,o,s,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(Bu(e,this.from,this.gapFrom)||Bu(e,this.gapTo,this.to)))return ae.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return ae.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?ae.fromReplace(e,this.from,this.to,r):ae.fail("Content does not fit in gap")}getMap(){return new Xe([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new ve(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new ve(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ve(n.from,n.to,n.gapFrom,n.gapTo,P.fromJSON(e,n.slice),n.insert,!!n.structure)}}Re.jsonID("replaceAround",ve);function Bu(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function WS(t,e,n,r){let i=[],o=[],s,l;t.doc.nodesBetween(e,n,(a,u,c)=>{if(!a.isInline)return;let d=a.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let f=Math.max(u,e),h=Math.min(u+a.nodeSize,n),p=r.addToSet(d);for(let m=0;m<d.length;m++)d[m].isInSet(p)||(s&&s.to==f&&s.mark.eq(d[m])?s.to=h:i.push(s=new Ot(f,h,d[m])));l&&l.to==f?l.to=h:o.push(l=new cn(f,h,r))}}),i.forEach(a=>t.step(a)),o.forEach(a=>t.step(a))}function US(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,l)=>{if(!s.isInline)return;o++;let a=null;if(r instanceof El){let u=s.marks,c;for(;c=r.isInSet(u);)(a||(a=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(s.marks)&&(a=[r]):a=s.marks;if(a&&a.length){let u=Math.min(l+s.nodeSize,n);for(let c=0;c<a.length;c++){let d=a[c],f;for(let h=0;h<i.length;h++){let p=i[h];p.step==o-1&&d.eq(i[h].style)&&(f=p)}f?(f.to=u,f.step=o):i.push({style:d,from:Math.max(l,e),to:u,step:o})}}}),i.forEach(s=>t.step(new Ot(s.from,s.to,s.style)))}function Yc(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),s=[],l=e+1;for(let a=0;a<o.childCount;a++){let u=o.child(a),c=l+u.nodeSize,d=r.matchType(u.type);if(!d)s.push(new ge(l,c,P.empty));else{r=d;for(let f=0;f<u.marks.length;f++)n.allowsMarkType(u.marks[f].type)||t.step(new Ot(l,c,u.marks[f]));if(i&&u.isText&&n.whitespace!="pre"){let f,h=/\r?\n|\r/g,p;for(;f=h.exec(u.text);)p||(p=new P(O.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),s.push(new ge(l+f.index,l+f.index+f[0].length,p))}}l=c}if(!r.validEnd){let a=r.fillBefore(O.empty,!0);t.replace(l,l,new P(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function qS(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function fi(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!qS(i,o,s))break}return null}function KS(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),l=i.after(o+1),a=s,u=l,c=O.empty,d=0;for(let p=o,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,c=O.from(r.node(p).copy(c)),d++):a--;let f=O.empty,h=0;for(let p=o,m=!1;p>n;p--)m||i.after(p+1)<i.end(p)?(m=!0,f=O.from(i.node(p).copy(f)),h++):u++;t.step(new ve(a,u,s,l,new P(c.append(f),d,h),c.size-d,!0))}function Xc(t,e,n=null,r=t){let i=GS(t,e),o=i&&JS(r,e);return o?i.map(Qf).concat({type:e,attrs:n}).concat(o.map(Qf)):null}function Qf(t){return{type:t,attrs:null}}function GS(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function JS(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let u=r;a&&u<i;u++)a=a.matchType(n.child(u).type);return!a||!a.validEnd?null:s}function QS(t,e,n){let r=O.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let l=n[s].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=O.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new ve(i,o,i,o,new P(r,0,0),n.length,!0))}function YS(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,l)=>{let a=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,a)&&XS(t.doc,t.mapping.slice(o).map(l),r)){let u=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!p?u=!1:!h&&p&&(u=!0)}u===!1&&ty(t,s,l,o),Yc(t,t.mapping.slice(o).map(l,1),r,void 0,u===null);let c=t.mapping.slice(o),d=c.map(l,1),f=c.map(l+s.nodeSize,1);return t.step(new ve(d,f,d+1,f-1,new P(O.from(r.create(a,null,s.marks)),0,0),1,!0)),u===!0&&ey(t,s,l,o),!1}})}function ey(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let s,l=/\r?\n|\r/g;for(;s=l.exec(i.text);){let a=t.mapping.slice(r).map(n+1+o+s.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function ty(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+o);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function XS(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function ZS(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new ve(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new P(O.from(s),0,0),1,!0))}function Ur(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=n-2;u>o;u--,c--){let d=i.node(u),f=i.index(u);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=r&&r[c+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[c]||d;if(!d.canReplace(f+1,d.childCount)||!m.type.validContent(h))return!1}let l=i.indexAfter(o),a=r&&r[0];return i.node(o).canReplaceWith(l,l,a?a.type:i.node(o+1).type)}function ek(t,e,n=1,r){let i=t.doc.resolve(e),o=O.empty,s=O.empty;for(let l=i.depth,a=i.depth-n,u=n-1;l>a;l--,u--){o=O.from(i.node(l).copy(o));let c=r&&r[u];s=O.from(c?c.type.create(c.attrs,s):i.node(l).copy(s))}t.step(new ge(e,e,new P(o.append(s),n,n),!0))}function zn(t,e){let n=t.resolve(e),r=n.index();return ny(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function tk(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),s=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function ny(t,e){return!!(t&&e&&!t.isLeaf&&tk(t,e))}function bl(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,l=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),l++,s=r.node(i).maybeChild(l)):(o=r.node(i).maybeChild(l-1),s=r.node(i+1)),o&&!o.isTextblock&&ny(o,s)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function nk(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),s=o.node().type;if(i&&s.inlineContent){let c=s.whitespace=="pre",d=!!s.contentMatch.matchType(i);c&&!d?r=!1:!c&&d&&(r=!0)}let l=t.steps.length;if(r===!1){let c=t.doc.resolve(e+n);ty(t,c.node(),c.before(),l)}s.inlineContent&&Yc(t,e+n-1,s,o.node().contentMatchAt(o.index()),r==null);let a=t.mapping.slice(l),u=a.map(e-n);if(t.step(new ge(u,a.map(e+n,-1),P.empty,!0)),r===!0){let c=t.doc.resolve(u);ey(t,c.node(),c.before(),t.steps.length)}return t}function rk(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function ry(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,a=r.index(s)+(l>0?1:0),u=r.node(s),c=!1;if(o==1)c=u.canReplace(a,a,i);else{let d=u.contentMatchAt(a).findWrapping(i.firstChild.type);c=d&&u.canReplaceWith(a,a,d[0])}if(c)return l==0?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}function Tl(t,e,n=e,r=P.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return iy(i,o,r)?new ge(e,n,r):new ik(i,o,r).fit()}function iy(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class ik{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=O.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=O.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,l=i.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new P(o,s,l);return e>-1?new ve(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new ge(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=ga(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:u}=this.frontier[l],c,d=null;if(n==1&&(s?u.matchType(s.type)||(d=u.fillBefore(O.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:l,parent:o,inject:d};if(n==2&&s&&(c=u.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:l,parent:o,wrap:c};if(o&&u.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=ga(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new P(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=ga(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new P(bi(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new P(bi(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,u=0,c=[],{match:d,type:f}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)c.push(i.child(m));d=d.matchFragment(i)}let h=l.size+e-(s.content.size-s.openEnd);for(;u<l.childCount;){let m=l.child(u),v=d.matchType(m.type);if(!v)break;u++,(u>1||a==0||m.content.size)&&(d=v,c.push(oy(m.mark(f.allowedMarks(m.marks)),u==1?a:0,u==l.childCount?h:-1)))}let p=u==l.childCount;p||(h=-1),this.placed=Ti(this.placed,n,O.from(c)),this.frontier[n].match=d,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,v=l;m<h;m++){let g=v.lastChild;this.frontier.push({type:g.type,match:g.contentMatchAt(g.childCount)}),v=g.content}this.unplaced=p?e==0?P.empty:new P(bi(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new P(bi(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!ya(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=ya(e,n,i,r,o);if(s){for(let l=n-1;l>=0;l--){let{match:a,type:u}=this.frontier[l],c=ya(e,l,u,a,!0);if(!c||c.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Ti(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Ti(this.placed,this.depth,O.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(O.empty,!0);n.childCount&&(this.placed=Ti(this.placed,this.frontier.length,n))}}function bi(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(bi(t.firstChild.content,e-1,n)))}function Ti(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Ti(t.lastChild.content,e-1,n)))}function ga(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function oy(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,oy(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(O.empty,!0)))),t.copy(r)}function ya(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,s);return l&&!ok(n,o.content,s)?l:null}function ok(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function sk(t){return t.spec.defining||t.spec.definingForContent}function lk(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(iy(i,o,r))return t.step(new ge(e,n,r));let s=ly(i,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let l=-(i.depth+1);s.unshift(l);for(let f=i.depth,h=i.pos-1;f>0;f--,h--){let p=i.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;s.indexOf(f)>-1?l=f:i.before(f)==h&&s.splice(1,0,-f)}let a=s.indexOf(l),u=[],c=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(u.push(p),h==r.openStart)break;f=p.content}for(let f=c-1;f>=0;f--){let h=u[f],p=sk(h.type);if(p&&!h.sameMarkup(i.node(Math.abs(l)-1)))c=f;else if(p||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+c+1)%(r.openStart+1),p=u[h];if(p)for(let m=0;m<s.length;m++){let v=s[(m+a)%s.length],g=!0;v<0&&(g=!1,v=-v);let y=i.node(v-1),x=i.index(v-1);if(y.canReplaceWith(x,x,p.type,p.marks))return t.replace(i.before(v),g?o.after(v):n,new P(sy(r.content,0,r.openStart,h),h,r.openEnd))}}let d=t.steps.length;for(let f=s.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let h=s[f];h<0||(e=i.before(h),n=o.after(h))}}function sy(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(sy(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(O.empty,!0))}return t}function ak(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=rk(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new P(O.from(r),0,0))}function uk(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=ly(r,i);for(let s=0;s<o.length;s++){let l=o[s],a=s==o.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function ly(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class qr extends Re{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return ae.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return ae.fromReplace(e,this.pos,this.pos+1,new P(O.from(i),0,n.isLeaf?0:1))}getMap(){return Xe.empty}invert(e){return new qr(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new qr(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new qr(n.pos,n.attr,n.value)}}Re.jsonID("attr",qr);class fo extends Re{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return ae.ok(r)}getMap(){return Xe.empty}invert(e){return new fo(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new fo(n.attr,n.value)}}Re.jsonID("docAttr",fo);let ti=class extends Error{};ti=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};ti.prototype=Object.create(Error.prototype);ti.prototype.constructor=ti;ti.prototype.name="TransformError";class ck{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new co}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new ti(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=P.empty){let i=Tl(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new P(O.from(r),0,0))}delete(e,n){return this.replace(e,n,P.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return lk(this,e,n,r),this}replaceRangeWith(e,n,r){return ak(this,e,n,r),this}deleteRange(e,n){return uk(this,e,n),this}lift(e,n){return KS(this,e,n),this}join(e,n=1){return nk(this,e,n),this}wrap(e,n){return QS(this,e,n),this}setBlockType(e,n=e,r,i=null){return YS(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return ZS(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new qr(e,n,r)),this}setDocAttribute(e,n){return this.step(new fo(e,n)),this}addNodeMark(e,n){return this.step(new dn(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof K)n.isInSet(r.marks)&&this.step(new dr(e,n));else{let i=r.marks,o,s=[];for(;o=n.isInSet(i);)s.push(new dr(e,o)),i=o.removeFromSet(i);for(let l=s.length-1;l>=0;l--)this.step(s[l])}return this}split(e,n=1,r){return ek(this,e,n,r),this}addMark(e,n,r){return WS(this,e,n,r),this}removeMark(e,n,r){return US(this,e,n,r),this}clearIncompatible(e,n,r){return Yc(this,e,n,r),this}}const va=Object.create(null);class j{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new dk(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=P.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:u}=s[l],c=e.mapping.slice(o);e.replaceRange(c.map(a.pos),c.map(u.pos),l?P.empty:n),l==0&&Zf(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:l}=i[o],a=e.mapping.slice(r),u=a.map(s.pos),c=a.map(l.pos);o?e.deleteRange(u,c):(e.replaceRangeWith(u,c,n),Zf(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new $(e):Cr(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?Cr(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Cr(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new dt(e.node(0))}static atStart(e){return Cr(e,e,0,0,1)||new dt(e)}static atEnd(e){return Cr(e,e,e.content.size,e.childCount,-1)||new dt(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=va[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in va)throw new RangeError("Duplicate use of selection JSON ID "+e);return va[e]=n,n.prototype.jsonID=e,n}getBookmark(){return $.between(this.$anchor,this.$head).getBookmark()}}j.prototype.visible=!0;class dk{constructor(e,n){this.$from=e,this.$to=n}}let Yf=!1;function Xf(t){!Yf&&!t.parent.inlineContent&&(Yf=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class $ extends j{constructor(e,n=e){Xf(e),Xf(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return j.near(r);let i=e.resolve(n.map(this.anchor));return new $(i.parent.inlineContent?i:r,r)}replace(e,n=P.empty){if(super.replace(e,n),n==P.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof $&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ml(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new $(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=j.findFrom(n,r,!0)||j.findFrom(n,-r,!0);if(o)n=o.$head;else return j.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(j.findFrom(e,-r,!0)||j.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new $(e,n)}}j.jsonID("text",$);class Ml{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Ml(e.map(this.anchor),e.map(this.head))}resolve(e){return $.between(e.resolve(this.anchor),e.resolve(this.head))}}class B extends j{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?j.near(o):new B(o)}content(){return new P(O.from(this.node),0,0)}eq(e){return e instanceof B&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Zc(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new B(e.resolve(n.anchor))}static create(e,n){return new B(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}B.prototype.visible=!1;j.jsonID("node",B);class Zc{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Ml(r,r):new Zc(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&B.isSelectable(r)?new B(n):j.near(n)}}class dt extends j{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=P.empty){if(n==P.empty){e.delete(0,e.doc.content.size);let r=j.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new dt(e)}map(e){return new dt(e)}eq(e){return e instanceof dt}getBookmark(){return fk}}j.jsonID("all",dt);const fk={map(){return this},resolve(t){return new dt(t)}};function Cr(t,e,n,r,i,o=!1){if(e.inlineContent)return $.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let l=e.child(s);if(l.isAtom){if(!o&&B.isSelectable(l))return B.create(t,n-(i<0?l.nodeSize:0))}else{let a=Cr(t,l,n+i,i<0?l.childCount:0,i,o);if(a)return a}n+=l.nodeSize*i}return null}function Zf(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof ge||i instanceof ve))return;let o=t.mapping.maps[r],s;o.forEach((l,a,u,c)=>{s==null&&(s=c)}),t.setSelection(j.near(t.doc.resolve(s),n))}const eh=1,Yo=2,th=4;class hk extends ck{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|eh)&~Yo,this.storedMarks=null,this}get selectionSet(){return(this.updated&eh)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Yo,this}ensureMarks(e){return K.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Yo)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Yo,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||K.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),this.selection.empty||this.setSelection(j.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=th,this}get scrolledIntoView(){return(this.updated&th)>0}}function nh(t,e){return!e||!t?t:t.bind(e)}class Mi{constructor(e,n,r){this.name=e,this.init=nh(n.init,r),this.apply=nh(n.apply,r)}}const pk=[new Mi("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Mi("selection",{init(t,e){return t.selection||j.atStart(e.doc)},apply(t){return t.selection}}),new Mi("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Mi("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class xa{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=pk.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Mi(r.key,r.spec.state,r))})}}class Br{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let l=this.config.plugins[s];if(l.spec.appendTransaction){let a=i?i[s].n:0,u=i?i[s].state:this,c=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,u,r);if(c&&r.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<s?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Br(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new hk(this)}static create(e){let n=new xa(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Br(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new xa(this.schema,e.plugins),r=n.fields,i=new Br(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new xa(e.schema,e.plugins),o=new Br(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=wn.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=j.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],u=a.spec.state;if(a.key==s.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){o[s.name]=u.fromJSON.call(a,e,n[l],o);return}}o[s.name]=s.init(e,o)}}),o}}function ay(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=ay(i,e,{})),n[r]=i}return n}class He{constructor(e){this.spec=e,this.props={},e.props&&ay(e.props,this,this.props),this.key=e.key?e.key.key:uy("plugin")}getState(e){return e[this.key]}}const Sa=Object.create(null);function uy(t){return t in Sa?t+"$"+ ++Sa[t]:(Sa[t]=0,t+"$")}class Nt{constructor(e="key"){this.key=uy(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ce=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},ni=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let _u=null;const Bt=function(t,e,n){let r=_u||(_u=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},mk=function(){_u=null},fr=function(t,e,n,r){return n&&(rh(t,e,n,r,-1)||rh(t,e,n,r,1))},gk=/^(img|br|input|textarea|hr)$/i;function rh(t,e,n,r,i){for(var o;;){if(t==n&&e==r)return!0;if(e==(i<0?0:at(t))){let s=t.parentNode;if(!s||s.nodeType!=1||bo(t)||gk.test(t.nodeName)||t.contentEditable=="false")return!1;e=Ce(t)+(i<0?0:1),t=s}else if(t.nodeType==1){let s=t.childNodes[e+(i<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((o=s.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=i;else return!1;else t=s,e=i<0?at(t):0}else return!1}}function at(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function yk(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=at(t)}else if(t.parentNode&&!bo(t))e=Ce(t),t=t.parentNode;else return null}}function vk(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!bo(t))e=Ce(t)+1,t=t.parentNode;else return null}}function xk(t,e,n){for(let r=e==0,i=e==at(t);r||i;){if(t==n)return!0;let o=Ce(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==at(t)}}function bo(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Ol=function(t){return t.focusNode&&fr(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Hn(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Sk(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function kk(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(at(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(at(r.startContainer),r.startOffset)}}}const Pt=typeof navigator<"u"?navigator:null,ih=typeof document<"u"?document:null,Bn=Pt&&Pt.userAgent||"",Fu=/Edge\/(\d+)/.exec(Bn),cy=/MSIE \d/.exec(Bn),$u=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Bn),Je=!!(cy||$u||Fu),Nn=cy?document.documentMode:$u?+$u[1]:Fu?+Fu[1]:0,Ct=!Je&&/gecko\/(\d+)/i.test(Bn);Ct&&+(/Firefox\/(\d+)/.exec(Bn)||[0,0])[1];const Vu=!Je&&/Chrome\/(\d+)/.exec(Bn),Ae=!!Vu,dy=Vu?+Vu[1]:0,Be=!Je&&!!Pt&&/Apple Computer/.test(Pt.vendor),ri=Be&&(/Mobile\/\w+/.test(Bn)||!!Pt&&Pt.maxTouchPoints>2),ot=ri||(Pt?/Mac/.test(Pt.platform):!1),wk=Pt?/Win/.test(Pt.platform):!1,Vt=/Android \d/.test(Bn),To=!!ih&&"webkitFontSmoothing"in ih.documentElement.style,Ck=To?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Nk(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Lt(t,e){return typeof t=="number"?t:t[e]}function Ek(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function oh(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=ni(s);continue}let l=s,a=l==o.body,u=a?Nk(o):Ek(l),c=0,d=0;if(e.top<u.top+Lt(r,"top")?d=-(u.top-e.top+Lt(i,"top")):e.bottom>u.bottom-Lt(r,"bottom")&&(d=e.bottom-e.top>u.bottom-u.top?e.top+Lt(i,"top")-u.top:e.bottom-u.bottom+Lt(i,"bottom")),e.left<u.left+Lt(r,"left")?c=-(u.left-e.left+Lt(i,"left")):e.right>u.right-Lt(r,"right")&&(c=e.right-u.right+Lt(i,"right")),c||d)if(a)o.defaultView.scrollBy(c,d);else{let h=l.scrollLeft,p=l.scrollTop;d&&(l.scrollTop+=d),c&&(l.scrollLeft+=c);let m=l.scrollLeft-h,v=l.scrollTop-p;e={left:e.left-m,top:e.top-v,right:e.right-m,bottom:e.bottom-v}}let f=a?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(f))break;s=f=="absolute"?s.offsetParent:ni(s)}}function bk(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let l=t.root.elementFromPoint(o,s);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:fy(t.dom)}}function fy(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=ni(r));return e}function Tk({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;hy(n,r==0?0:r-e)}function hy(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Sr=null;function Mk(t){if(t.setActive)return t.setActive();if(Sr)return t.focus(Sr);let e=fy(t);t.focus(Sr==null?{get preventScroll(){return Sr={preventScroll:!0},!0}}:void 0),Sr||(Sr=!1,hy(e,0))}function py(t,e){let n,r=2e8,i,o=0,s=e.top,l=e.top,a,u;for(let c=t.firstChild,d=0;c;c=c.nextSibling,d++){let f;if(c.nodeType==1)f=c.getClientRects();else if(c.nodeType==3)f=Bt(c).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=s&&p.bottom>=l){s=Math.max(p.bottom,s),l=Math.min(p.top,l);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=c,r=m,i=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,c.nodeType==1&&m&&(o=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!a&&p.left<=e.left&&p.right>=e.left&&(a=c,u={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(o=d+1)}}return!n&&a&&(n=a,i=u,r=0),n&&n.nodeType==3?Ok(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:py(n,i)}function Ok(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=Yt(r,1);if(o.top!=o.bottom&&ed(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function ed(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Dk(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function Ak(t,e,n){let{node:r,offset:i}=py(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function Pk(t,e,n,r){let i=-1;for(let o=e,s=!1;o!=t.dom;){let l=t.docView.nearestDesc(o,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&(!s&&a.left>r.left||a.top>r.top?i=l.posBefore:(!s&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),s=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;o=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function my(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=t.childNodes[o];if(s.nodeType==1){let l=s.getClientRects();for(let a=0;a<l.length;a++){let u=l[a];if(ed(e,u))return my(s,e,u)}}if((o=(o+1)%r)==i)break}return t}function Ik(t,e){let n=t.dom.ownerDocument,r,i=0,o=kk(n,e.left,e.top);o&&({node:r,offset:i}=o);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let u=t.dom.getBoundingClientRect();if(!ed(e,u)||(s=my(t.dom,e,u),!s))return null}if(Be)for(let u=s;r&&u;u=ni(u))u.draggable&&(r=void 0);if(s=Dk(s,e),r){if(Ct&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],d;c.nodeName=="IMG"&&(d=c.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let u;To&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=Pk(t,r,i,e))}l==null&&(l=Ak(t,s,e));let a=t.docView.nearestDesc(s,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function sh(t){return t.top<t.bottom||t.left<t.right}function Yt(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(sh(r))return r}return Array.prototype.find.call(n,sh)||t.getBoundingClientRect()}const Rk=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function gy(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=To||Ct;if(r.nodeType==3)if(s&&(Rk.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=Yt(Bt(r,i,i),n);if(Ct&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=Yt(Bt(r,i-1,i-1),-1);if(u.top==a.top){let c=Yt(Bt(r,i,i+1),-1);if(c.top!=a.top)return ki(c,c.left<u.left)}}return a}else{let a=i,u=i,c=n<0?1:-1;return n<0&&!i?(u++,c=-1):n>=0&&i==r.nodeValue.length?(a--,c=1):n<0?a--:u++,ki(Yt(Bt(r,a,u),c),c<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==at(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return ka(a.getBoundingClientRect(),!1)}if(o==null&&i<at(r)){let a=r.childNodes[i];if(a.nodeType==1)return ka(a.getBoundingClientRect(),!0)}return ka(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==at(r))){let a=r.childNodes[i-1],u=a.nodeType==3?Bt(a,at(a)-(s?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(u)return ki(Yt(u,1),!1)}if(o==null&&i<at(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let u=a?a.nodeType==3?Bt(a,0,s?0:1):a.nodeType==1?a:null:null;if(u)return ki(Yt(u,-1),!0)}return ki(Yt(r.nodeType==3?Bt(r):r,-n),n>=0)}function ki(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function ka(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function yy(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function Lk(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return yy(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(o,!0);if(!l)break;if(l.node.isBlock){o=l.contentDOM||l.dom;break}o=l.dom.parentNode}let s=gy(t,i.pos,1);for(let l=o.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Bt(l,0,l.nodeValue.length).getClientRects();else continue;for(let u=0;u<a.length;u++){let c=a[u];if(c.bottom>c.top+1&&(n=="up"?s.top-c.top>(c.bottom-s.top)*2:c.bottom-s.bottom>(s.bottom-c.top)*2))return!1}}return!0})}const zk=/[\u0590-\u08ac]/;function Bk(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,l=t.domSelection();return l?!zk.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?o:s:yy(t,e,()=>{let{focusNode:a,focusOffset:u,anchorNode:c,anchorOffset:d}=t.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),v=p&&!h.contains(p.nodeType==1?p:p.parentNode)||a==p&&u==m;try{l.collapse(c,d),a&&(a!=c||u!=d)&&l.extend&&l.extend(a,u)}catch{}return f!=null&&(l.caretBidiLevel=f),v}):r.pos==r.start()||r.pos==r.end()}let lh=null,ah=null,uh=!1;function _k(t,e,n){return lh==e&&ah==n?uh:(lh=e,ah=n,uh=n=="up"||n=="down"?Lk(t,e,n):Bk(t,e,n))}const ft=0,ch=1,Gn=2,It=3;class Mo{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=ft,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Ce(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let l=i.children[s];if(l.size){i=l;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],l=o+s.size;if(l>e||s instanceof xy){i=e-o;break}o=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof vy&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Ce(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Ce(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,l=0;;l++){let a=this.children[l],u=s+a.size;if(i==-1&&e<=u){let c=s+a.border;if(e>=c&&n<=u-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,c);e=s;for(let d=l;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=Ce(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(u>n||l==this.children.length-1)){n=u;for(let c=l+1;c<this.children.length;c++){let d=this.children[c];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=Ce(d.dom);break}n+=d.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=u}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let h=0,p=0;h<this.children.length;h++){let m=this.children[h],v=p+m.size;if(o>p&&s<v)return m.setSelection(e-p-m.border,n-p-m.border,r,i);p=v}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),c=r.domSelectionRange(),d=!1;if((Ct||Be)&&e==n){let{node:h,offset:p}=l;if(h.nodeType==3){if(d=!!(p&&h.nodeValue[p-1]==`
`),d&&p==h.nodeValue.length)for(let m=h,v;m;m=m.parentNode){if(v=m.nextSibling){v.nodeName=="BR"&&(l=a={node:v.parentNode,offset:Ce(v)+1});break}let g=m.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let m=h.childNodes[p-1];d=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(Ct&&c.focusNode&&c.focusNode!=a.node&&c.focusNode.nodeType==1){let h=c.focusNode.childNodes[c.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||d&&Be)&&fr(l.node,l.offset,c.anchorNode,c.anchorOffset)&&fr(a.node,a.offset,c.focusNode,c.focusOffset))return;let f=!1;if((u.extend||e==n)&&!d){u.collapse(l.node,l.offset);try{e!=n&&u.extend(a.node,a.offset),f=!0}catch{}}if(!f){if(e>n){let p=l;l=a,a=p}let h=document.createRange();h.setEnd(a.node,a.offset),h.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let l=r+o.border,a=s-o.border;if(e>=l&&n<=a){this.dirty=e==r||n==s?Gn:ch,e==l&&n==a&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=It:o.markDirty(e-l,n-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Gn:It}r=s}this.dirty=Gn}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Gn:ch;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class vy extends Mo{constructor(e,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let l=document.createElement("span");l.appendChild(s),s=l}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==ft&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Fk extends Mo{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class hr extends Mo{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=yr.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new hr(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&It||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=It&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ft){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ft}}slice(e,n,r){let i=hr.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=Hu(o,n,s,r)),e>0&&(o=Hu(o,0,e,r));for(let l=0;l<o.length;l++)o[l].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class En extends Mo{constructor(e,n,r,i,o,s,l,a,u){super(e,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,o,s){let l=o.nodeViews[n.type.name],a,u=l&&l(n,o,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)},r,i),c=u&&u.dom,d=u&&u.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:d}=yr.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let f=c;return c=wy(c,r,n),u?a=new $k(e,n,r,i,c,d||null,f,u,o,s+1):n.isText?new Dl(e,n,r,i,c,f,o):new En(e,n,r,i,c,d||null,f,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>O.empty)}return e}matchesNode(e,n,r){return this.dirty==ft&&e.eq(this.node)&&Xs(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,l=o&&o.pos<0,a=new jk(this,s&&s.node,e);Uk(this.node,this.innerDeco,(u,c,d)=>{u.spec.marks?a.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!d&&a.syncToMarks(c==this.node.childCount?K.none:this.node.child(c).marks,r,e),a.placeWidget(u,e,i)},(u,c,d,f)=>{a.syncToMarks(u.marks,r,e);let h;a.findNodeMatch(u,c,d,f)||l&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(h=a.findIndexWithChild(o.node))>-1&&a.updateNodeAt(u,c,d,h,e)||a.updateNextNode(u,c,d,e,f,i)||a.addNode(u,c,d,e,i),i+=u.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Gn)&&(s&&this.protectLocalComposition(e,s),Sy(this.contentDOM,this.children,e),ri&&qk(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof $)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,l=Kk(this.node.content,s,r-n,i-n);return l<0?null:{node:o,pos:l,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new Fk(this,o,n,i);e.input.compositionNodes.push(s),this.children=Hu(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==It||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=ft}updateOuterDeco(e){if(Xs(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=ky(this.dom,this.nodeDOM,ju(this.outerDeco,this.node,n),ju(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function dh(t,e,n,r,i){wy(r,e,t);let o=new En(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Dl extends En{constructor(e,n,r,i,o,s,l){super(e,n,r,i,o,null,s,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==It||this.dirty!=ft&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ft||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=ft,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new Dl(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=It)}get domAtom(){return!1}isText(e){return this.node.text==e}}class xy extends Mo{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ft&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class $k extends En{constructor(e,n,r,i,o,s,l,a,u,c){super(e,n,r,i,o,s,l,u,c),this.spec=a}update(e,n,r,i){if(this.dirty==It)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Sy(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],l=s.dom;if(l.parentNode==t){for(;l!=r;)r=fh(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(s instanceof hr){let a=r?r.previousSibling:t.lastChild;Sy(s.contentDOM,s.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=fh(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Vi=function(t){t&&(this.nodeName=t)};Vi.prototype=Object.create(null);const Jn=[new Vi];function ju(t,e,n){if(t.length==0)return Jn;let r=n?Jn[0]:new Vi,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new Vi(s.nodeName));for(let l in s){let a=s[l];a!=null&&(n&&i.length==1&&i.push(r=new Vi(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function ky(t,e,n,r){if(n==Jn&&r==Jn)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],l=n[o];if(o){let a;l&&l.nodeName==s.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==s.nodeName||(a=document.createElement(s.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=Jn[0]),i=a}Vk(i,l||Jn[0],s)}return i}function Vk(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function wy(t,e,n){return ky(t,t,Jn,ju(e,n,t.nodeType!=1))}function Xs(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function fh(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class jk{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Hk(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=ft,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let u=this.top.children[a];if(u.matchesMark(e[o])&&!this.isLocked(u.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=hr.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))o=this.top.children.indexOf(s,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let u=this.top.children[l];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){o=l;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let s=this.top.children[i];return s.dirty==It&&s.dom==s.contentDOM&&(s.dirty=Gn),s.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,s){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof En){let u=this.preMatch.matched.get(a);if(u!=null&&u!=o)return!1;let c=a.dom,d,f=this.isLocked(c)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=It&&Xs(n,a.outerDeco));if(!f&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=c&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(a,e,n,r,i,s)))return this.destroyBetween(this.index,l),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Gn,d.updateChildren(i,s+1),d.dirty=ft),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Xs(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=En.create(this.top,n,r,i,o,s);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,i,o){let s=En.create(this.top,e,n,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new vy(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof hr;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Dl)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Be||Ae)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new xy(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Hk(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];e:for(;i>0;){let l;for(;;)if(r){let u=n.children[r-1];if(u instanceof hr)n=u,r=u.children.length;else{l=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,o.set(l,i),s.push(l)}}return{index:i,matched:o,matches:s.reverse()}}function Wk(t,e){return t.type.side-e.type.side}function Uk(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let c=t.child(u);r(c,i,e.forChild(o,c),u),o+=c.nodeSize}return}let s=0,l=[],a=null;for(let u=0;;){let c,d;for(;s<i.length&&i[s].to==o;){let v=i[s++];v.widget&&(c?(d||(d=[c])).push(v):c=v)}if(c)if(d){d.sort(Wk);for(let v=0;v<d.length;v++)n(d[v],u,!!a)}else n(c,u,!!a);let f,h;if(a)h=-1,f=a,a=null;else if(u<t.childCount)h=u,f=t.child(u++);else break;for(let v=0;v<l.length;v++)l[v].to<=o&&l.splice(v--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)l.push(i[s++]);let p=o+f.nodeSize;if(f.isText){let v=p;s<i.length&&i[s].from<v&&(v=i[s].from);for(let g=0;g<l.length;g++)l[g].to<v&&(v=l[g].to);v<p&&(a=f.cut(v-o),f=f.cut(0,v-o),p=v,h=-1)}else for(;s<i.length&&i[s].to<p;)s++;let m=f.isInline&&!f.isLeaf?l.filter(v=>!v.inline):l.slice();r(f,m,e.forChild(o,f),h),o=p}}function qk(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Kk(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),l=o;if(o+=s.nodeSize,!s.isText)continue;let a=s.text;for(;i<t.childCount;){let u=t.child(i++);if(o+=u.nodeSize,!u.isText)break;a+=u.text}if(o>=n){if(o>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let u=l<r?a.lastIndexOf(e,r-l-1):-1;if(u>=0&&u+e.length+l>=n)return l+u;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function Hu(t,e,n,r,i){let o=[];for(let s=0,l=0;s<t.length;s++){let a=t[s],u=l,c=l+=a.size;u>=n||c<=e?o.push(a):(u<e&&o.push(a.slice(0,e-u,r)),i&&(o.push(i),i=void 0),c>n&&o.push(a.slice(n-u,a.size,r)))}return o}function td(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let l=r.resolve(s),a,u;if(Ol(n)){for(a=s;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&B.isSelectable(d)&&i.parent&&!(d.isInline&&xk(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;u=new B(s==f?l:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=s,f=s;for(let h=0;h<n.rangeCount;h++){let p=n.getRangeAt(h);d=Math.min(d,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(d<0)return null;[a,s]=f==t.state.selection.anchor?[f,d]:[d,f],l=r.resolve(s)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let c=r.resolve(a);if(!u){let d=e=="pointer"||t.state.selection.head<l.pos&&!o?1:-1;u=nd(t,c,l,d)}return u}function Cy(t){return t.editable?t.hasFocus():Ey(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Ht(t,e=!1){let n=t.state.selection;if(Ny(t,n),!!Cy(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Ae){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&fr(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)Jk(t);else{let{anchor:r,head:i}=n,o,s;hh&&!(n instanceof $)&&(n.$from.parent.inlineContent||(o=ph(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=ph(t,n.to))),t.docView.setSelection(r,i,t,e),hh&&(o&&mh(o),s&&mh(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Gk(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const hh=Be||Ae&&dy<63;function ph(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Be&&i&&i.contentEditable=="false")return wa(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return wa(i);if(o)return wa(o)}}function wa(t){return t.contentEditable="true",Be&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function mh(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Gk(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Cy(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function Jk(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,Ce(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Je&&Nn<=11&&(r.disabled=!0,r.disabled=!1)}function Ny(t,e){if(e instanceof B){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(gh(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else gh(t)}function gh(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function nd(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||$.between(e,n,r)}function yh(t){return t.editable&&!t.hasFocus()?!1:Ey(t)}function Ey(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Qk(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return fr(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Wu(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&j.findFrom(o,e)}function en(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function vh(t,e,n){let r=t.state.selection;if(r instanceof $)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return en(t,new $(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Wu(t.state,e);return i&&i instanceof B?en(t,i):!1}else if(!(ot&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let l=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(l))&&!s.contentDOM?B.isSelectable(o)?en(t,new B(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):To?en(t,new $(t.state.doc.resolve(e<0?l:l+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof B&&r.node.isInline)return en(t,new $(e>0?r.$to:r.$from));{let i=Wu(t.state,e);return i?en(t,i):!1}}}function Zs(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ji(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function kr(t,e){return e<0?Yk(t):Xk(t)}function Yk(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(Ct&&n.nodeType==1&&r<Zs(n)&&ji(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(ji(l,-1))i=n,o=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(by(n))break;{let l=n.previousSibling;for(;l&&ji(l,-1);)i=n.parentNode,o=Ce(l),l=l.previousSibling;if(l)n=l,r=Zs(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?Uu(t,n,r):i&&Uu(t,i,o)}function Xk(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Zs(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(ji(l,1))o=n,s=++r;else break}else{if(by(n))break;{let l=n.nextSibling;for(;l&&ji(l,1);)o=l.parentNode,s=Ce(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Zs(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&Uu(t,o,s)}function by(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Zk(t,e){for(;t&&e==t.childNodes.length&&!bo(t);)e=Ce(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function ew(t,e){for(;t&&!e&&!bo(t);)e=Ce(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Uu(t,e,n){if(e.nodeType!=3){let o,s;(s=Zk(e,n))?(e=s,n=0):(o=ew(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Ol(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Ht(t)},50)}function xh(t,e){let n=t.state.doc.resolve(e);if(!(Ae||wk)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Sh(t,e,n){let r=t.state.selection;if(r instanceof $&&!r.empty||n.indexOf("s")>-1||ot&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=Wu(t.state,e);if(s&&s instanceof B)return en(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,l=r instanceof dt?j.near(s,e):j.findFrom(s,e);return l?en(t,l):!1}return!1}function kh(t,e){if(!(t.state.selection instanceof $))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function wh(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function tw(t){if(!Be||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;wh(t,r,"true"),setTimeout(()=>wh(t,r,"false"),20)}return!1}function nw(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function rw(t,e){let n=e.keyCode,r=nw(e);if(n==8||ot&&n==72&&r=="c")return kh(t,-1)||kr(t,-1);if(n==46&&!e.shiftKey||ot&&n==68&&r=="c")return kh(t,1)||kr(t,1);if(n==13||n==27)return!0;if(n==37||ot&&n==66&&r=="c"){let i=n==37?xh(t,t.state.selection.from)=="ltr"?-1:1:-1;return vh(t,i,r)||kr(t,i)}else if(n==39||ot&&n==70&&r=="c"){let i=n==39?xh(t,t.state.selection.from)=="ltr"?1:-1:1;return vh(t,i,r)||kr(t,i)}else{if(n==38||ot&&n==80&&r=="c")return Sh(t,-1,r)||kr(t,-1);if(n==40||ot&&n==78&&r=="c")return tw(t)||Sh(t,1,r)||kr(t,1);if(r==(ot?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function rd(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=t.someProp("clipboardSerializer")||yr.fromSchema(t.state.schema),l=Py(),a=l.createElement("div");a.appendChild(s.serializeFragment(r,{document:l}));let u=a.firstChild,c,d=0;for(;u&&u.nodeType==1&&(c=Ay[u.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let p=l.createElement(c[h]);for(;a.firstChild;)p.appendChild(a.firstChild);a.appendChild(p),d++}u=a.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:f,slice:e}}function Ty(t,e,n,r,i){let o=i.parent.type.spec.code,s,l;if(!n&&!e)return null;let a=e&&(r||o||!n);if(a){if(t.someProp("transformPastedText",f=>{e=f(e,o||r,t)}),o)return e?new P(O.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):P.empty;let d=t.someProp("clipboardTextParser",f=>f(e,i,r,t));if(d)l=d;else{let f=i.marks(),{schema:h}=t.state,p=yr.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let v=s.appendChild(document.createElement("p"));m&&v.appendChild(p.serializeNode(h.text(m,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),s=lw(n),To&&aw(s);let u=s&&s.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0;d--){let f=s.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;s=f}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||Cn.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(a||c),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!iw.test(f.parentNode.nodeName)?{ignore:!0}:null}})),c)l=uw(Ch(l,+c[1],+c[2]),c[4]);else if(l=P.maxOpen(ow(l.content,i),!0),l.openStart||l.openEnd){let d=0,f=0;for(let h=l.content.firstChild;d<l.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=l.content.lastChild;f<l.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);l=Ch(l,d,f)}return t.someProp("transformPasted",d=>{l=d(l,t)}),l}const iw=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function ow(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(l=>{if(!s)return;let a=i.findWrapping(l.type),u;if(!a)return s=null;if(u=s.length&&o.length&&Oy(a,o,l,s[s.length-1],0))s[s.length-1]=u;else{s.length&&(s[s.length-1]=Dy(s[s.length-1],o.length));let c=My(l,a);s.push(c),i=i.matchType(c.type),o=a}}),s)return O.from(s)}return t}function My(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,O.from(t));return t}function Oy(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=Oy(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(O.from(My(n,t,i+1))))}}function Dy(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Dy(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(O.empty,!0);return t.copy(n.append(r))}function qu(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,l=s.content;return t.childCount>1&&(o=0),i<r-1&&(l=qu(l,e,n,r,i+1,o)),i>=n&&(l=e<0?s.contentMatchAt(0).fillBefore(l,o<=i).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(O.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(l))}function Ch(t,e,n){return e<t.openStart&&(t=new P(qu(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new P(qu(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const Ay={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Nh=null;function Py(){return Nh||(Nh=document.implementation.createHTMLDocument("title"))}let Ca=null;function sw(t){let e=window.trustedTypes;return e?(Ca||(Ca=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Ca.createHTML(t)):t}function lw(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=Py().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&Ay[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=sw(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function aw(t){let e=t.querySelectorAll(Ae?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function uw(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=O.from(a.create(r[l+1],i)),o++,s++}return new P(i,o,s)}const _e={},Fe={},cw={touchstart:!0,touchmove:!0};class dw{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function fw(t){for(let e in _e){let n=_e[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{pw(t,r)&&!id(t,r)&&(t.editable||!(r.type in Fe))&&n(t,r)},cw[e]?{passive:!0}:void 0)}Be&&t.dom.addEventListener("input",()=>null),Ku(t)}function fn(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function hw(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Ku(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>id(t,r))})}function id(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function pw(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function mw(t,e){!id(t,e)&&_e[e.type]&&(t.editable||!(e.type in Fe))&&_e[e.type](t,e)}Fe.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!Ry(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Vt&&Ae&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ri&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Hn(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||rw(t,n)?n.preventDefault():fn(t,"key")};Fe.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Fe.keypress=(t,e)=>{let n=e;if(Ry(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||ot&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof $)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),o=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i,o))&&t.dispatch(o()),n.preventDefault()}};function Al(t){return{left:t.clientX,top:t.clientY}}function gw(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function od(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,l=>s>o.depth?l(t,n,o.nodeAfter,o.before(s),i,!0):l(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function Kr(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function yw(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&B.isSelectable(r)?(Kr(t,new B(n),"pointer"),!0):!1}function vw(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof B&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let l=s>o.depth?o.nodeAfter:o.node(s);if(B.isSelectable(l)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(Kr(t,B.create(t.state.doc,i),"pointer"),!0):!1}function xw(t,e,n,r,i){return od(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?vw(t,n):yw(t,n))}function Sw(t,e,n,r){return od(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function kw(t,e,n,r){return od(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||ww(t,n,r)}function ww(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Kr(t,$.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),l=i.before(o);if(s.inlineContent)Kr(t,$.create(r,l+1,l+1+s.content.size),"pointer");else if(B.isSelectable(s))Kr(t,B.create(r,l),"pointer");else continue;return!0}}function sd(t){return el(t)}const Iy=ot?"metaKey":"ctrlKey";_e.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=sd(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&gw(n,t.input.lastClick)&&!n[Iy]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o,button:n.button};let s=t.posAtCoords(Al(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Cw(t,s,n,!!r)):(o=="doubleClick"?Sw:kw)(t,s.pos,s.inside,n)?n.preventDefault():fn(t,"pointer"))};class Cw{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Iy],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let c=e.state.doc.resolve(n.pos);o=c.parent,s=c.depth?c.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:u}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||u instanceof B&&u.from<=s&&u.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ct&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),fn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ht(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Al(e))),this.updateAllowDefault(e),this.allowDefault||!n?fn(this.view,"pointer"):xw(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Be&&this.mightDrag&&!this.mightDrag.node.isAtom||Ae&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Kr(this.view,j.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):fn(this.view,"pointer")}move(e){this.updateAllowDefault(e),fn(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}_e.touchstart=t=>{t.input.lastTouch=Date.now(),sd(t),fn(t,"pointer")};_e.touchmove=t=>{t.input.lastTouch=Date.now(),fn(t,"pointer")};_e.contextmenu=t=>sd(t);function Ry(t,e){return t.composing?!0:Be&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Nw=Vt?5e3:-1;Fe.compositionstart=Fe.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof $&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),el(t,!0),t.markCursor=null;else if(el(t,!e.selection.empty),Ct&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let l=t.domSelection();l&&l.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}Ly(t,Nw)};Fe.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,Ly(t,20))};function Ly(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>el(t),e))}function zy(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=bw());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Ew(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=yk(e.focusNode,e.focusOffset),r=vk(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function bw(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function el(t,e=!1){if(!(Vt&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),zy(t),e||t.docView&&t.docView.dirty){let n=td(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Tw(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const ho=Je&&Nn<15||ri&&Ck<604;_e.copy=Fe.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=ho?null:n.clipboardData,s=r.content(),{dom:l,text:a}=rd(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",l.innerHTML),o.setData("text/plain",a)):Tw(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Mw(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Ow(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?po(t,r.value,null,i,e):po(t,r.textContent,r.innerHTML,i,e)},50)}function po(t,e,n,r,i){let o=Ty(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,o||P.empty)))return!0;if(!o)return!1;let s=Mw(o),l=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(o);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function By(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Fe.paste=(t,e)=>{let n=e;if(t.composing&&!Vt)return;let r=ho?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&po(t,By(r),r.getData("text/html"),i,n)?n.preventDefault():Ow(t,n)};class _y{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const Dw=ot?"altKey":"ctrlKey";function Fy(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[Dw]}_e.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(Al(n)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof B?i.to-1:i.to))){if(r&&r.mightDrag)s=B.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(s=B.create(t.state.doc,d.posBefore))}}let l=(s||t.state.selection).content(),{dom:a,text:u,slice:c}=rd(t,l);(!n.dataTransfer.files.length||!Ae||dy>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(ho?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",ho||n.dataTransfer.setData("text/plain",u),t.dragging=new _y(c,Fy(t,n),s)};_e.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Fe.dragover=Fe.dragenter=(t,e)=>e.preventDefault();Fe.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Al(n));if(!i)return;let o=t.state.doc.resolve(i.pos),s=r&&r.slice;s?t.someProp("transformPasted",p=>{s=p(s,t)}):s=Ty(t,By(n.dataTransfer),ho?null:n.dataTransfer.getData("text/html"),!1,o);let l=!!(r&&Fy(t,n));if(t.someProp("handleDrop",p=>p(t,n,s||P.empty,l))){n.preventDefault();return}if(!s)return;n.preventDefault();let a=s?ry(t.state.doc,o.pos,s):o.pos;a==null&&(a=o.pos);let u=t.state.tr;if(l){let{node:p}=r;p?p.replace(u):u.deleteSelection()}let c=u.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,f=u.doc;if(d?u.replaceRangeWith(c,c,s.content.firstChild):u.replaceRange(c,c,s),u.doc.eq(f))return;let h=u.doc.resolve(c);if(d&&B.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new B(h));else{let p=u.mapping.map(a);u.mapping.maps[u.mapping.maps.length-1].forEach((m,v,g,y)=>p=y),u.setSelection(nd(t,h,u.doc.resolve(p)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};_e.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Ht(t)},20))};_e.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};_e.beforeinput=(t,e)=>{if(Ae&&Vt&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,Hn(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Fe)_e[t]=Fe[t];function mo(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class tl{constructor(e,n){this.toDOM=e,this.spec=n||nr,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new et(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof tl&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&mo(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class bn{constructor(e,n){this.attrs=e,this.spec=n||nr}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new et(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof bn&&mo(this.attrs,e.attrs)&&mo(this.spec,e.spec)}static is(e){return e.type instanceof bn}destroy(){}}class ld{constructor(e,n){this.attrs=e,this.spec=n||nr}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new et(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof ld&&mo(this.attrs,e.attrs)&&mo(this.spec,e.spec)}destroy(){}}class et{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new et(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new et(e,e,new tl(n,r))}static inline(e,n,r,i){return new et(e,n,new bn(r,i))}static node(e,n,r,i){return new et(e,n,new ld(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof bn}get widget(){return this.type instanceof tl}}const Nr=[],nr={};class se{constructor(e,n){this.local=e.length?e:Nr,this.children=n.length?n:Nr}static create(e,n){return n.length?nl(n,e,0,nr):Oe}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let l=this.local[s];l.from<=n&&l.to>=e&&(!o||o(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let l=this.children[s]+1;this.children[s+2].findInner(e-l,n-l,r,i+l,o)}}map(e,n,r){return this==Oe||e.maps.length==0?this:this.mapInner(e,n,0,0,r||nr)}mapInner(e,n,r,i,o){let s;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(s||(s=[])).push(a):o.onRemove&&o.onRemove(this.local[l].spec)}return this.children.length?Aw(this.children,s||[],e,n,r,i,o):s?new se(s.sort(rr),Nr):Oe}add(e,n){return n.length?this==Oe?se.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((l,a)=>{let u=a+r,c;if(c=Vy(n,l,u)){for(i||(i=this.children.slice());o<i.length&&i[o]<a;)o+=3;i[o]==a?i[o+2]=i[o+2].addInner(l,c,u+1):i.splice(o,0,a,a+l.nodeSize,nl(c,l,u+1,nr)),o+=3}});let s=$y(o?jy(n):n,-r);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||s.splice(l--,1);return new se(s.length?this.local.concat(s).sort(rr):this.local,i||this.children)}remove(e){return e.length==0||this==Oe?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,l=r[o]+n,a=r[o+1]+n;for(let c=0,d;c<e.length;c++)(d=e[c])&&d.from>l&&d.to<a&&(e[c]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let u=r[o+2].removeInner(s,l+1);u!=Oe?r[o+2]=u:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let l=0;l<i.length;l++)i[l].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new se(i,r):Oe}forChild(e,n){if(this==Oe)return this;if(n.isLeaf)return se.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let o=e+1,s=o+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<s&&a.to>o&&a.type instanceof bn){let u=Math.max(o,a.from)-o,c=Math.min(s,a.to)-o;u<c&&(i||(i=[])).push(a.copy(u,c))}}if(i){let l=new se(i.sort(rr),Nr);return r?new sn([l,r]):l}return r||Oe}eq(e){if(this==e)return!0;if(!(e instanceof se)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return ad(this.localsInner(e))}localsInner(e){if(this==Oe)return Nr;if(e.inlineContent||!this.local.some(bn.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof bn||n.push(this.local[r]);return n}forEachSet(e){e(this)}}se.empty=new se([],[]);se.removeOverlap=ad;const Oe=se.empty;class sn{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,nr));return sn.from(r)}forChild(e,n){if(n.isLeaf)return se.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=Oe&&(o instanceof sn?r=r.concat(o.members):r.push(o))}return sn.from(r)}eq(e){if(!(e instanceof sn)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?ad(r?n:n.sort(rr)):Nr}static from(e){switch(e.length){case 0:return Oe;case 1:return e[0];default:return new sn(e.every(n=>n instanceof se)?e:e.reduce((n,r)=>n.concat(r instanceof se?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function Aw(t,e,n,r,i,o,s){let l=t.slice();for(let u=0,c=o;u<n.maps.length;u++){let d=0;n.maps[u].forEach((f,h,p,m)=>{let v=m-p-(h-f);for(let g=0;g<l.length;g+=3){let y=l[g+1];if(y<0||f>y+c-d)continue;let x=l[g]+c-d;h>=x?l[g+1]=f<=x?-2:-1:f>=c&&v&&(l[g]+=v,l[g+1]+=v)}d+=v}),c=n.maps[u].map(c,-1)}let a=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){a=!0,l[u+1]=-1;continue}let c=n.map(t[u]+o),d=c-i;if(d<0||d>=r.content.size){a=!0;continue}let f=n.map(t[u+1]+o,-1),h=f-i,{index:p,offset:m}=r.content.findIndex(d),v=r.maybeChild(p);if(v&&m==d&&m+v.nodeSize==h){let g=l[u+2].mapInner(n,v,c+1,t[u]+o+1,s);g!=Oe?(l[u]=d,l[u+1]=h,l[u+2]=g):(l[u+1]=-2,a=!0)}else a=!0}if(a){let u=Pw(l,t,e,n,i,o,s),c=nl(u,r,0,s);e=c.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,f=0;d<c.children.length;d+=3){let h=c.children[d];for(;f<l.length&&l[f]<h;)f+=3;l.splice(f,0,c.children[d],c.children[d+1],c.children[d+2])}}return new se(e.sort(rr),l)}function $y(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new et(i.from+e,i.to+e,i.type))}return n}function Pw(t,e,n,r,i,o,s){function l(a,u){for(let c=0;c<a.local.length;c++){let d=a.local[c].map(r,i,u);d?n.push(d):s.onRemove&&s.onRemove(a.local[c].spec)}for(let c=0;c<a.children.length;c+=3)l(a.children[c+2],a.children[c]+u+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+o+1);return n}function Vy(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function jy(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function nl(t,e,n,r){let i=[],o=!1;e.forEach((l,a)=>{let u=Vy(t,l,a+n);if(u){o=!0;let c=nl(u,l,n+a+1,r);c!=Oe&&i.push(a,a+l.nodeSize,c)}});let s=$y(o?jy(t):t,-n).sort(rr);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||(r.onRemove&&r.onRemove(s[l].spec),s.splice(l--,1));return s.length||i.length?new se(s,i):Oe}function rr(t,e){return t.from-e.from||t.to-e.to}function ad(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),Eh(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),Eh(e,i,r.copy(o.from,r.to)));break}}}return e}function Eh(t,e,n){for(;e<t.length&&rr(n,t[e])>0;)e++;t.splice(e,0,n)}function Na(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Oe&&e.push(r)}),t.cursorWrapper&&e.push(se.create(t.state.doc,[t.cursorWrapper.deco])),sn.from(e)}const Iw={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Rw=Je&&Nn<=11;class Lw{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class zw{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Lw,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Je&&Nn<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Rw&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Iw)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(yh(this.view)){if(this.suppressingSelectionUpdates)return Ht(this.view);if(Je&&Nn<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&fr(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=ni(o))n.add(o);for(let o=e.anchorNode;o;o=ni(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&yh(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,l=!1,a=[];if(e.editable)for(let c=0;c<n.length;c++){let d=this.registerMutation(n[c],a);d&&(o=o<0?d.from:Math.min(d.from,o),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(l=!0))}if(Ct&&a.length){let c=a.filter(d=>d.nodeName=="BR");if(c.length==2){let[d,f]=c;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of c){let h=f.parentNode;h&&h.nodeName=="LI"&&(!d||Fw(e,d)!=h)&&f.remove()}}}let u=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ol(r)&&(u=td(e))&&u.eq(j.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ht(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),Bw(e)),this.handleDOMChange(o,s,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Ht(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++){let d=e.addedNodes[c];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(Je&&Nn<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:d,nextSibling:f}=e.addedNodes[c];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(o=f)}let s=i&&i.parentNode==e.target?Ce(i)+1:0,l=r.localPosFromDOM(e.target,s,-1),a=o&&o.parentNode==e.target?Ce(o):e.target.childNodes.length,u=r.localPosFromDOM(e.target,a,1);return{from:l,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let bh=new WeakMap,Th=!1;function Bw(t){if(!bh.has(t)&&(bh.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Ct,Th)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Th=!0}}function Mh(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return fr(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function _w(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Mh(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Mh(t,n):null}function Fw(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function $w(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),u,c=a.anchorNode;if(c&&t.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:a.anchorOffset}],Ol(a)||u.push({node:a.focusNode,offset:a.focusOffset})),Ae&&t.input.lastKeyCode===8)for(let v=o;v>i;v--){let g=r.childNodes[v-1],y=g.pmViewDesc;if(g.nodeName=="BR"&&!y){o=v;break}if(!y||y.size)break}let d=t.state.doc,f=t.someProp("domParser")||Cn.fromSchema(t.state.schema),h=d.resolve(s),p=null,m=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:o,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:Vw,context:h});if(u&&u[0].pos!=null){let v=u[0].pos,g=u[1]&&u[1].pos;g==null&&(g=v),p={anchor:v+s,head:g+s}}return{doc:m,sel:p,from:s,to:l}}function Vw(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Be&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Be&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const jw=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Hw(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let k=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,A=td(t,k);if(A&&!t.state.selection.eq(A)){if(Ae&&Vt&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",z=>z(t,Hn(13,"Enter"))))return;let T=t.state.tr.setSelection(A);k=="pointer"?T.setMeta("pointer",!0):k=="key"&&T.scrollIntoView(),o&&T.setMeta("composition",o),t.dispatch(T)}return}let s=t.state.doc.resolve(e),l=s.sharedDepth(n);e=s.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,u=$w(t,e,n),c=t.state.doc,d=c.slice(u.from,u.to),f,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,h="end"):(f=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let p=qw(d.content,u.doc.content,u.from,f,h);if(p&&t.input.domChangeCount++,(ri&&t.input.lastIOSEnter>Date.now()-225||Vt)&&i.some(k=>k.nodeType==1&&!jw.test(k.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",k=>k(t,Hn(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&a instanceof $&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))p={start:a.from,endA:a.to,endB:a.to};else{if(u.sel){let k=Oh(t,t.state.doc,u.sel);if(k&&!k.eq(t.state.selection)){let A=t.state.tr.setSelection(k);o&&A.setMeta("composition",o),t.dispatch(A)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof $&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),Je&&Nn<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>u.from&&u.doc.textBetween(p.start-u.from-1,p.start-u.from+1)=="  "&&(p.start--,p.endA--,p.endB--);let m=u.doc.resolveNoCache(p.start-u.from),v=u.doc.resolveNoCache(p.endB-u.from),g=c.resolve(p.start),y=m.sameParent(v)&&m.parent.inlineContent&&g.end()>=p.endA,x;if((ri&&t.input.lastIOSEnter>Date.now()-225&&(!y||i.some(k=>k.nodeName=="DIV"||k.nodeName=="P"))||!y&&m.pos<u.doc.content.size&&(!m.sameParent(v)||!m.parent.inlineContent)&&!/\S/.test(u.doc.textBetween(m.pos,v.pos,"",""))&&(x=j.findFrom(u.doc.resolve(m.pos+1),1,!0))&&x.head>m.pos)&&t.someProp("handleKeyDown",k=>k(t,Hn(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&Uw(c,p.start,p.endA,m,v)&&t.someProp("handleKeyDown",k=>k(t,Hn(8,"Backspace")))){Vt&&Ae&&t.domObserver.suppressSelectionUpdates();return}Ae&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),Vt&&!y&&m.start()!=v.start()&&v.parentOffset==0&&m.depth==v.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==p.endA&&(p.endB-=2,v=u.doc.resolveNoCache(p.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(k){return k(t,Hn(13,"Enter"))})},20));let w=p.start,N=p.endA,E=k=>{let A=k||t.state.tr.replace(w,N,u.doc.slice(p.start-u.from,p.endB-u.from));if(u.sel){let T=Oh(t,A.doc,u.sel);T&&!(Ae&&t.composing&&T.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(T.head==w||T.head==A.mapping.map(N)-1)||Je&&T.empty&&T.head==w)&&A.setSelection(T)}return o&&A.setMeta("composition",o),A.scrollIntoView()},C;if(y){if(m.pos==v.pos){Je&&Nn<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ht(t),20));let k=E(t.state.tr.delete(w,N)),A=c.resolve(p.start).marksAcross(c.resolve(p.endA));A&&k.ensureMarks(A),t.dispatch(k)}else if(p.endA==p.endB&&(C=Ww(m.parent.content.cut(m.parentOffset,v.parentOffset),g.parent.content.cut(g.parentOffset,p.endA-g.start())))){let k=E(t.state.tr);C.type=="add"?k.addMark(w,N,C.mark):k.removeMark(w,N,C.mark),t.dispatch(k)}else if(m.parent.child(m.index()).isText&&m.index()==v.index()-(v.textOffset?0:1)){let k=m.parent.textBetween(m.parentOffset,v.parentOffset),A=()=>E(t.state.tr.insertText(k,w,N));t.someProp("handleTextInput",T=>T(t,w,N,k,A))||t.dispatch(A())}}else t.dispatch(E())}function Oh(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:nd(t,e.resolve(n.anchor),e.resolve(n.head))}function Ww(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,s,l,a;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)o=n[c].removeFromSet(o);if(i.length==1&&o.length==0)l=i[0],s="add",a=c=>c.mark(l.addToSet(c.marks));else if(i.length==0&&o.length==1)l=o[0],s="remove",a=c=>c.mark(l.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(a(e.child(c)));if(O.from(u).eq(t))return{mark:l,type:s}}function Uw(t,e,n,r,i){if(n-e<=i.pos-r.pos||Ea(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let l=o.nodeAfter;return l!=null&&n==e+l.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(Ea(o,!0,!0));return!s.parent.isTextblock||s.pos>n||Ea(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Ea(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function qw(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:s,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,o-Math.min(s,l));r-=s+a-o}if(s<o&&t.size<e.size){let a=r<=o&&r>=s?o-r:0;o-=a,o&&o<e.size&&Dh(e.textBetween(o-1,o+1))&&(o+=a?1:-1),l=o+(l-s),s=o}else if(l<o){let a=r<=o&&r>=l?o-r:0;o-=a,o&&o<t.size&&Dh(t.textBetween(o-1,o+1))&&(o+=a?1:-1),s=o+(s-l),l=o}return{start:o,endA:s,endB:l}}function Dh(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class Hy{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new dw,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Lh),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Ih(this),Ph(this),this.nodeViews=Rh(this),this.docView=dh(this.state.doc,Ah(this),Na(this),this.dom,this),this.domObserver=new zw(this,(r,i,o,s)=>Hw(this,r,i,o,s)),this.domObserver.start(),fw(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ku(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Lh),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(zy(this),s=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=Rh(this);Gw(h,this.nodeViews)&&(this.nodeViews=h,o=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&Ku(this),this.editable=Ih(this),Ph(this);let a=Na(this),u=Ah(this),c=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=o||!this.docView.matchesNode(e.doc,u,a);(d||!e.selection.eq(i.selection))&&(s=!0);let f=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&bk(this);if(s){this.domObserver.stop();let h=d&&(Je||Ae)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Kw(i.selection,e.selection);if(d){let p=Ae?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Ew(this)),(o||!this.docView.update(e.doc,u,a,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=dh(e.doc,u,a,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Qk(this))?Ht(this,h):(Ny(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():f&&Tk(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof B){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&oh(this,n.getBoundingClientRect(),e)}else oh(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new _y(e.slice,e.move,i<0?void 0:B.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let l=this.directPlugins[s].props[e];if(l!=null&&(i=n?n(l):l))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let l=o[s].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(Je){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Mk(this.dom),Ht(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Ik(this,e)}coordsAtPos(e,n=1){return gy(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return _k(this,n||this.state,e)}pasteHTML(e,n){return po(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return po(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return rd(this,e)}destroy(){this.docView&&(hw(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Na(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,mk())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return mw(this,e)}domSelectionRange(){let e=this.domSelection();return e?Be&&this.root.nodeType===11&&Sk(this.dom.ownerDocument)==this.dom&&_w(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Hy.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function Ah(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[et.node(0,t.state.doc.content.size,e)]}function Ph(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:et.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Ih(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Kw(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Rh(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Gw(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Lh(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var On={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},rl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Jw=typeof navigator<"u"&&/Mac/.test(navigator.platform),Qw=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ne=0;Ne<10;Ne++)On[48+Ne]=On[96+Ne]=String(Ne);for(var Ne=1;Ne<=24;Ne++)On[Ne+111]="F"+Ne;for(var Ne=65;Ne<=90;Ne++)On[Ne]=String.fromCharCode(Ne+32),rl[Ne]=String.fromCharCode(Ne);for(var ba in On)rl.hasOwnProperty(ba)||(rl[ba]=On[ba]);function Yw(t){var e=Jw&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Qw&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?rl:On)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Xw=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Zw=typeof navigator<"u"&&/Win/.test(navigator.platform);function eC(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))Xw?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function tC(t){let e=Object.create(null);for(let n in t)e[eC(n)]=t[n];return e}function Ta(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function nC(t){return new He({props:{handleKeyDown:Wy(t)}})}function Wy(t){let e=tC(t);return function(n,r){let i=Yw(r),o,s=e[Ta(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[Ta(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Zw&&r.ctrlKey&&r.altKey)&&(o=On[r.keyCode])&&o!=i){let l=e[Ta(o,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const rC=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Uy(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const iC=(t,e,n)=>{let r=Uy(t,n);if(!r)return!1;let i=ud(r);if(!i){let s=r.blockRange(),l=s&&fi(s);return l==null?!1:(e&&e(t.tr.lift(s,l).scrollIntoView()),!0)}let o=i.nodeBefore;if(Jy(t,i,e,-1))return!0;if(r.parent.content.size==0&&(ii(o,"end")||B.isSelectable(o)))for(let s=r.depth;;s--){let l=Tl(t.doc,r.before(s),r.after(s),P.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(ii(o,"end")?j.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):B.create(a.doc,i.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},oC=(t,e,n)=>{let r=Uy(t,n);if(!r)return!1;let i=ud(r);return i?qy(t,i,e):!1},sC=(t,e,n)=>{let r=Ky(t,n);if(!r)return!1;let i=cd(r);return i?qy(t,i,e):!1};function qy(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let s=e.nodeAfter,l=s,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let c=l.firstChild;if(!c)return!1;l=c}let u=Tl(t.doc,o,a,P.empty);if(!u||u.from!=o||u instanceof ge&&u.slice.size>=a-o)return!1;if(n){let c=t.tr.step(u);c.setSelection($.create(c.doc,o)),n(c.scrollIntoView())}return!0}function ii(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const lC=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=ud(r)}let s=o&&o.nodeBefore;return!s||!B.isSelectable(s)?!1:(e&&e(t.tr.setSelection(B.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function ud(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Ky(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const aC=(t,e,n)=>{let r=Ky(t,n);if(!r)return!1;let i=cd(r);if(!i)return!1;let o=i.nodeAfter;if(Jy(t,i,e,1))return!0;if(r.parent.content.size==0&&(ii(o,"start")||B.isSelectable(o))){let s=Tl(t.doc,r.before(),r.after(),P.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=t.tr.step(s);l.setSelection(ii(o,"start")?j.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):B.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},uC=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=cd(r)}let s=o&&o.nodeAfter;return!s||!B.isSelectable(s)?!1:(e&&e(t.tr.setSelection(B.create(t.doc,o.pos)).scrollIntoView()),!0)};function cd(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const cC=(t,e)=>{let n=t.selection,r=n instanceof B,i;if(r){if(n.node.isTextblock||!zn(t.doc,n.from))return!1;i=n.from}else if(i=bl(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(B.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},dC=(t,e)=>{let n=t.selection,r;if(n instanceof B){if(n.node.isTextblock||!zn(t.doc,n.to))return!1;r=n.to}else if(r=bl(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},fC=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&fi(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},hC=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Gy(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const pC=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=Gy(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,s.createAndFill());a.setSelection(j.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},mC=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof dt||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Gy(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(s,o.createAndFill());l.setSelection($.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},gC=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Ur(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&fi(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},yC=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(B.create(t.doc,i))),!0)};function vC(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||zn(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function Jy(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,s,l,a=i.type.spec.isolating||o.type.spec.isolating;if(!a&&vC(t,e,n))return!0;let u=!a&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(s=(l=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&l.matchType(s[0]||o.type).validEnd){if(n){let h=e.pos+o.nodeSize,p=O.empty;for(let g=s.length-1;g>=0;g--)p=O.from(s[g].create(null,p));p=O.from(i.copy(p));let m=t.tr.step(new ve(e.pos-1,h,e.pos,h,new P(p,1,0),s.length,!0)),v=m.doc.resolve(h+2*s.length);v.nodeAfter&&v.nodeAfter.type==i.type&&zn(m.doc,v.pos)&&m.join(v.pos),n(m.scrollIntoView())}return!0}let c=o.type.spec.isolating||r>0&&a?null:j.findFrom(e,1),d=c&&c.$from.blockRange(c.$to),f=d&&fi(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(u&&ii(o,"start",!0)&&ii(i,"end")){let h=i,p=[];for(;p.push(h),!h.isTextblock;)h=h.lastChild;let m=o,v=1;for(;!m.isTextblock;m=m.firstChild)v++;if(h.canReplace(h.childCount,h.childCount,m.content)){if(n){let g=O.empty;for(let x=p.length-1;x>=0;x--)g=O.from(p[x].copy(g));let y=t.tr.step(new ve(e.pos-p.length,e.pos+o.nodeSize,e.pos+v,e.pos+o.nodeSize-v,new P(g,p.length,0),0,!0));n(y.scrollIntoView())}return!0}}return!1}function Qy(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection($.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const xC=Qy(-1),SC=Qy(1);function kC(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),l=s&&Xc(s,t,e);return l?(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0):!1}}function zh(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:l}}=n.selection.ranges[o];n.doc.nodesBetween(s,l,(a,u)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let c=n.doc.resolve(u),d=c.index();i=c.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[s];o.setBlockType(l,a,t,e)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wC(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o);if(!s)return!1;let l=r?n.tr:null;return CC(l,s,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function CC(t,e,n,r=null){let i=!1,o=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=s.resolve(e.start-2);o=new Qs(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new Qs(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let l=Xc(o,n,r,e);return l?(t&&NC(t,e,l,i,n),!0):!1}function NC(t,e,n,r,i){let o=O.empty;for(let c=n.length-1;c>=0;c--)o=O.from(n[c].type.create(n[c].attrs,o));t.step(new ve(e.start-(r?2:0),e.end,e.start,e.end,new P(o,0,0),n.length,!0));let s=0;for(let c=0;c<n.length;c++)n[c].type==i&&(s=c+1);let l=n.length-s,a=e.start+n.length-(r?2:0),u=e.parent;for(let c=e.startIndex,d=e.endIndex,f=!0;c<d;c++,f=!1)!f&&Ur(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=u.child(c).nodeSize;return t}function EC(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?bC(e,n,t,o):TC(e,n,o):!0:!1}}function bC(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new ve(o-1,s,o,s,new P(O.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Qs(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const l=fi(r);if(l==null)return!1;i.lift(r,l);let a=i.doc.resolve(i.mapping.map(o,-1)-1);return zn(i.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&i.join(a.pos),e(i.scrollIntoView()),!0}function TC(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,u=o.node(-1),c=o.index(-1);if(!u.canReplace(c+(l?0:1),c+1,s.content.append(a?O.empty:O.from(i))))return!1;let d=o.pos,f=d+s.nodeSize;return r.step(new ve(d-(l?1:0),f+(a?1:0),d+1,f-1,new P((l?O.empty:O.from(i.copy(O.empty))).append(a?O.empty:O.from(i.copy(O.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function MC(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let l=o.parent,a=l.child(s-1);if(a.type!=t)return!1;if(n){let u=a.lastChild&&a.lastChild.type==l.type,c=O.from(u?t.create():null),d=new P(O.from(t.create(null,O.from(l.type.create(null,c)))),u?3:1,0),f=o.start,h=o.end;n(e.tr.step(new ve(f-(u?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function Pl(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class Il{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...c)=>{const d=a(...c)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l=[],a=!!e,u=e||o.tr,c=()=>(!a&&n&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),l.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const v=this.buildProps(u,n),g=h(...m)(v);return l.push(g),d}])),run:c};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(n).map(([a,u])=>[a,(...c)=>u(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l={tr:e,editor:i,view:s,state:Pl({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,u])=>[a,(...c)=>u(...c)(l)]))}};return l}}class OC{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function L(t,e,n){return t.config[e]===void 0&&t.parent?L(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?L(t.parent,e,n):null}):t.config[e]}function Rl(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Yy(t){const e=[],{nodeExtensions:n,markExtensions:r}=Rl(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage,extensions:i},a=L(s,"addGlobalAttributes",l);if(!a)return;a().forEach(c=>{c.types.forEach(d=>{Object.entries(c.attributes).forEach(([f,h])=>{e.push({type:d,name:f,attribute:{...o,...h}})})})})}),i.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=L(s,"addAttributes",l);if(!a)return;const u=a();Object.entries(u).forEach(([c,d])=>{const f={...o,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:s.name,name:c,attribute:f})})}),e}function Se(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function $e(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const l=o?String(o).split(" "):[],a=r[i]?r[i].split(" "):[],u=l.filter(c=>!a.includes(c));r[i]=[...a,...u].join(" ")}else if(i==="style"){const l=o?o.split(";").map(c=>c.trim()).filter(Boolean):[],a=r[i]?r[i].split(";").map(c=>c.trim()).filter(Boolean):[],u=new Map;a.forEach(c=>{const[d,f]=c.split(":").map(h=>h.trim());u.set(d,f)}),l.forEach(c=>{const[d,f]=c.split(":").map(h=>h.trim());u.set(d,f)}),r[i]=Array.from(u.entries()).map(([c,d])=>`${c}: ${d}`).join("; ")}else r[i]=o}),r},{})}function Gu(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>$e(n,r),{})}function Xy(t){return typeof t=="function"}function H(t,e=void 0,...n){return Xy(t)?e?t.bind(e)(...n):t(...n):t}function DC(t={}){return Object.keys(t).length===0&&t.constructor===Object}function AC(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Bh(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const l=s.attribute.parseHTML?s.attribute.parseHTML(n):AC(n.getAttribute(s.name));return l==null?o:{...o,[s.name]:l}},{});return{...r,...i}}}}function _h(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&DC(n)?!1:n!=null))}function PC(t,e){var n;const r=Yy(t),{nodeExtensions:i,markExtensions:o}=Rl(t),s=(n=i.find(u=>L(u,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(i.map(u=>{const c=r.filter(g=>g.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((g,y)=>{const x=L(y,"extendNodeSchema",d);return{...g,...x?x(u):{}}},{}),h=_h({...f,content:H(L(u,"content",d)),marks:H(L(u,"marks",d)),group:H(L(u,"group",d)),inline:H(L(u,"inline",d)),atom:H(L(u,"atom",d)),selectable:H(L(u,"selectable",d)),draggable:H(L(u,"draggable",d)),code:H(L(u,"code",d)),whitespace:H(L(u,"whitespace",d)),linebreakReplacement:H(L(u,"linebreakReplacement",d)),defining:H(L(u,"defining",d)),isolating:H(L(u,"isolating",d)),attrs:Object.fromEntries(c.map(g=>{var y;return[g.name,{default:(y=g==null?void 0:g.attribute)===null||y===void 0?void 0:y.default}]}))}),p=H(L(u,"parseHTML",d));p&&(h.parseDOM=p.map(g=>Bh(g,c)));const m=L(u,"renderHTML",d);m&&(h.toDOM=g=>m({node:g,HTMLAttributes:Gu(g,c)}));const v=L(u,"renderText",d);return v&&(h.toText=v),[u.name,h]})),a=Object.fromEntries(o.map(u=>{const c=r.filter(v=>v.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((v,g)=>{const y=L(g,"extendMarkSchema",d);return{...v,...y?y(u):{}}},{}),h=_h({...f,inclusive:H(L(u,"inclusive",d)),excludes:H(L(u,"excludes",d)),group:H(L(u,"group",d)),spanning:H(L(u,"spanning",d)),code:H(L(u,"code",d)),attrs:Object.fromEntries(c.map(v=>{var g;return[v.name,{default:(g=v==null?void 0:v.attribute)===null||g===void 0?void 0:g.default}]}))}),p=H(L(u,"parseHTML",d));p&&(h.parseDOM=p.map(v=>Bh(v,c)));const m=L(u,"renderHTML",d);return m&&(h.toDOM=v=>m({mark:v,HTMLAttributes:Gu(v,c)})),[u.name,h]}));return new qg({topNode:s,nodes:l,marks:a})}function Ma(t,e){return e.nodes[t]||e.marks[t]||null}function Fh(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function dd(t,e){const n=yr.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const IC=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,s,l)=>{var a,u;const c=((u=(a=i.type.spec).toText)===null||u===void 0?void 0:u.call(a,{node:i,pos:o,parent:s,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?c:c.slice(0,Math.max(0,r-o))}),n};function fd(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Ll{constructor(e){this.find=e.find,this.handler=e.handler}}const RC=(t,e)=>{if(fd(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Xo(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const u=a.state.doc.resolve(r);if(u.parent.type.spec.code||!((e=u.nodeBefore||u.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let c=!1;const d=IC(u)+o;return s.forEach(f=>{if(c)return;const h=RC(d,f.find);if(!h)return;const p=a.state.tr,m=Pl({state:a.state,transaction:p}),v={from:r-(h[0].length-o.length),to:i},{commands:g,chain:y,can:x}=new Il({editor:n,state:m});f.handler({state:m,range:v,match:h,commands:g,chain:y,can:x})===null||!p.steps.length||(p.setMeta(l,{transform:p,from:r,to:i,text:o}),a.dispatch(p),c=!0)}),c}function LC(t){const{editor:e,rules:n}=t,r=new He({state:{init(){return null},apply(i,o,s){const l=i.getMeta(r);if(l)return l;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:c}=a;typeof c=="string"?c=c:c=dd(O.from(c),s.schema);const{from:d}=a,f=d+c.length;Xo({editor:e,from:d,to:f,text:c,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,s,l){return Xo({editor:e,from:o,to:s,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&Xo({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?Xo({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function zC(t){return Object.prototype.toString.call(t).slice(8,-1)}function Zo(t){return zC(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function zl(t,e){const n={...t};return Zo(t)&&Zo(e)&&Object.keys(e).forEach(r=>{Zo(e[r])&&Zo(t[r])?n[r]=zl(t[r],e[r]):n[r]=e[r]}),n}class Dn{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=H(L(this,"addOptions",{name:this.name}))),this.storage=H(L(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Dn(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>zl(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Dn(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=H(L(n,"addOptions",{name:n.name})),n.storage=H(L(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const a=s.find(u=>(u==null?void 0:u.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function BC(t){return typeof t=="number"}class _C{constructor(e){this.find=e.find,this.handler=e.handler}}const FC=(t,e,n)=>{if(fd(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function $C(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:s,dropEvent:l}=t,{commands:a,chain:u,can:c}=new Il({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;const m=Math.max(r,p),v=Math.min(i,p+h.content.size),g=h.textBetween(m-p,v-p,void 0,"￼");FC(g,o.find,s).forEach(x=>{if(x.index===void 0)return;const w=m+x.index+1,N=w+x[0].length,E={from:n.tr.mapping.map(w),to:n.tr.mapping.map(N)},C=o.handler({state:n,range:E,match:x,commands:a,chain:u,can:c,pasteEvent:s,dropEvent:l});d.push(C)})}),d.every(h=>h!==null)}let es=null;const VC=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function jC(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:c,from:d,to:f,rule:h,pasteEvt:p})=>{const m=c.tr,v=Pl({state:c,transaction:m});if(!(!$C({editor:e,state:v,from:Math.max(d-1,0),to:f.b-1,rule:h,pasteEvent:p,dropEvent:l})||!m.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m}};return n.map(c=>new He({view(d){const f=p=>{var m;r=!((m=d.dom.parentElement)===null||m===void 0)&&m.contains(p.target)?d.dom.parentElement:null,r&&(es=e)},h=()=>{es&&(es=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(d,f)=>{if(o=r===d.dom.parentElement,l=f,!o){const h=es;h&&setTimeout(()=>{const p=h.state.selection;p&&h.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(d,f)=>{var h;const p=(h=f.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return s=f,i=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,h)=>{const p=d[0],m=p.getMeta("uiEvent")==="paste"&&!i,v=p.getMeta("uiEvent")==="drop"&&!o,g=p.getMeta("applyPasteRules"),y=!!g;if(!m&&!v&&!y)return;if(y){let{text:N}=g;typeof N=="string"?N=N:N=dd(O.from(N),h.schema);const{from:E}=g,C=E+N.length,k=VC(N);return a({rule:c,state:h,from:E,to:{b:C},pasteEvt:k})}const x=f.doc.content.findDiffStart(h.doc.content),w=f.doc.content.findDiffEnd(h.doc.content);if(!(!BC(x)||!w||x===w.b))return a({rule:c,state:h,from:x,to:w,pasteEvt:s})}}))}function HC(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class _r{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=_r.resolve(e),this.schema=PC(this.extensions,n),this.setupExtensions()}static resolve(e){const n=_r.sort(_r.flatten(e)),r=HC(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=L(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=L(r,"priority")||100,s=L(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Ma(n.name,this.schema)},i=L(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=_r.sort([...this.extensions].reverse()),r=[],i=[],o=n.map(s=>{const l={name:s.name,options:s.options,storage:s.storage,editor:e,type:Ma(s.name,this.schema)},a=[],u=L(s,"addKeyboardShortcuts",l);let c={};if(s.type==="mark"&&L(s,"exitable",l)&&(c.ArrowRight=()=>Dn.handleExit({editor:e,mark:s})),u){const m=Object.fromEntries(Object.entries(u()).map(([v,g])=>[v,()=>g({editor:e})]));c={...c,...m}}const d=nC(c);a.push(d);const f=L(s,"addInputRules",l);Fh(s,e.options.enableInputRules)&&f&&r.push(...f());const h=L(s,"addPasteRules",l);Fh(s,e.options.enablePasteRules)&&h&&i.push(...h());const p=L(s,"addProseMirrorPlugins",l);if(p){const m=p();a.push(...m)}return a}).flat();return[LC({editor:e,rules:r}),...jC({editor:e,rules:i}),...o]}get attributes(){return Yy(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Rl(this.extensions);return Object.fromEntries(n.filter(r=>!!L(r,"addNodeView")).map(r=>{const i=this.attributes.filter(a=>a.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:Se(r.name,this.schema)},s=L(r,"addNodeView",o);if(!s)return[];const l=(a,u,c,d,f)=>{const h=Gu(a,i);return s()({node:a,view:u,getPos:c,decorations:d,innerDecorations:f,editor:e,extension:r,HTMLAttributes:h})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Ma(e.name,this.schema)};e.type==="mark"&&(!((n=H(L(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=L(e,"onBeforeCreate",r),o=L(e,"onCreate",r),s=L(e,"onUpdate",r),l=L(e,"onSelectionUpdate",r),a=L(e,"onTransaction",r),u=L(e,"onFocus",r),c=L(e,"onBlur",r),d=L(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),s&&this.editor.on("update",s),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),u&&this.editor.on("focus",u),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}}class Ie{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=H(L(this,"addOptions",{name:this.name}))),this.storage=H(L(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ie(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>zl(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Ie({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=H(L(n,"addOptions",{name:n.name})),n.storage=H(L(n,"addStorage",{name:n.name,options:n.options})),n}}function Zy(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let l="";return t.nodesBetween(r,i,(a,u,c,d)=>{var f;a.isBlock&&u>r&&(l+=o);const h=s==null?void 0:s[a.type.name];if(h)return c&&(l+=h({node:a,pos:u,parent:c,index:d,range:e})),!1;a.isText&&(l+=(f=a==null?void 0:a.text)===null||f===void 0?void 0:f.slice(Math.max(r,u)-u,i-u))}),l}function e0(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const WC=Ie.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new He({key:new Nt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(c=>c.$from.pos)),l=Math.max(...o.map(c=>c.$to.pos)),a=e0(n);return Zy(r,{from:s,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),UC=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),qC=(t=!1)=>({commands:e})=>e.setContent("",t),KC=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(l,a)=>{if(l.type.isText)return;const{doc:u,mapping:c}=e,d=u.resolve(c.map(a)),f=u.resolve(c.map(a+l.nodeSize)),h=d.blockRange(f);if(!h)return;const p=fi(h);if(l.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},GC=t=>e=>t(e),JC=()=>({state:t,dispatch:e})=>mC(t,e),QC=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new $(r.doc.resolve(s-1))),!0},YC=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const l=i.before(o),a=i.after(o);t.delete(l,a).scrollIntoView()}return!0}return!1},XC=t=>({tr:e,state:n,dispatch:r})=>{const i=Se(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const a=o.before(s),u=o.after(s);e.delete(a,u).scrollIntoView()}return!0}return!1},ZC=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},eN=()=>({state:t,dispatch:e})=>rC(t,e),tN=()=>({commands:t})=>t.keyboardShortcut("Enter"),nN=()=>({state:t,dispatch:e})=>pC(t,e);function il(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:fd(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function t0(t,e,n={}){return t.find(r=>r.type===e&&il(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function $h(t,e,n={}){return!!t0(t,e,n)}function hd(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(c=>c.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(c=>c.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!t0([...i.node.marks],e,n)))return;let s=i.index,l=t.start()+i.offset,a=s+1,u=l+i.node.nodeSize;for(;s>0&&$h([...t.parent.child(s-1).marks],e,n);)s-=1,l-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&$h([...t.parent.child(a).marks],e,n);)u+=t.parent.child(a).nodeSize,a+=1;return{from:l,to:u}}function _n(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const rN=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=_n(t,r.schema),{doc:s,selection:l}=n,{$from:a,from:u,to:c}=l;if(i){const d=hd(a,o,e);if(d&&d.from<=u&&d.to>=c){const f=$.create(s,d.from,d.to);n.setSelection(f)}}return!0},iN=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function n0(t){return t instanceof $}function Qn(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function r0(t,e=null){if(!e)return null;const n=j.atStart(t),r=j.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?$.create(t,Qn(0,i,o),Qn(t.content.size,i,o)):$.create(t,Qn(e,i,o),Qn(e,i,o))}function oN(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function pd(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const sN=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{(pd()||oN())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!n0(n.state.selection))return s(),!0;const l=r0(i.doc,t)||n.state.selection,a=n.state.selection.eq(l);return o&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},lN=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),aN=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),i0=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&i0(r)}return t};function ts(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return i0(n)}function go(t,e,n){if(t instanceof wn||t instanceof O)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return O.fromArray(t.map(l=>e.nodeFromJSON(l)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),go("",e,n)}if(i){if(n.errorOnInvalidContent){let s=!1,l="";const a=new qg({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(s=!0,l=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?Cn.fromSchema(a).parseSlice(ts(t),n.parseOptions):Cn.fromSchema(a).parse(ts(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const o=Cn.fromSchema(e);return n.slice?o.parseSlice(ts(t),n.parseOptions).content:o.parse(ts(t),n.parseOptions)}return go("",e,n)}function uN(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof ge||i instanceof ve))return;const o=t.mapping.maps[r];let s=0;o.forEach((l,a,u,c)=>{s===0&&(s=c)}),t.setSelection(j.near(t.doc.resolve(s),n))}const cN=t=>!("type"in t),dN=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const a=v=>{o.emit("contentError",{editor:o,error:v,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{go(e,o.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(v){a(v)}try{l=go(e,o.schema,{parseOptions:u,errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:o.options.enableContentCheck})}catch(v){return a(v),!1}let{from:c,to:d}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,h=!0;if((cN(l)?l:[l]).forEach(v=>{v.check(),f=f?v.isText&&v.marks.length===0:!1,h=h?v.isBlock:!1}),c===d&&h){const{parent:v}=r.doc.resolve(c);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(c-=1,d+=1)}let m;if(f){if(Array.isArray(e))m=e.map(v=>v.text||"").join("");else if(e instanceof O){let v="";e.forEach(g=>{g.text&&(v+=g.text)}),m=v}else typeof e=="object"&&e&&e.text?m=e.text:m=e;r.insertText(m,c,d)}else m=l,r.replaceWith(c,d,m);n.updateSelection&&uN(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:m}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:m})}return!0},fN=()=>({state:t,dispatch:e})=>cC(t,e),hN=()=>({state:t,dispatch:e})=>dC(t,e),pN=()=>({state:t,dispatch:e})=>iC(t,e),mN=()=>({state:t,dispatch:e})=>aC(t,e),gN=()=>({state:t,dispatch:e,tr:n})=>{try{const r=bl(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},yN=()=>({state:t,dispatch:e,tr:n})=>{try{const r=bl(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},vN=()=>({state:t,dispatch:e})=>oC(t,e),xN=()=>({state:t,dispatch:e})=>sC(t,e);function o0(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function SN(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))pd()||o0()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const kN=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=SN(t).split(/-(?!$)/),s=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),l=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,l))});return a==null||a.steps.forEach(u=>{const c=u.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function yo(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?Se(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);l.push({node:d,from:h,to:p})});const a=i-r,u=l.filter(d=>s?s.name===d.node.type.name:!0).filter(d=>il(d.node.attrs,n,{strict:!1}));return o?!!u.length:u.reduce((d,f)=>d+f.to-f.from,0)>=a}const wN=(t,e={})=>({state:n,dispatch:r})=>{const i=Se(t,n.schema);return yo(n,i,e)?fC(n,r):!1},CN=()=>({state:t,dispatch:e})=>gC(t,e),NN=t=>({state:e,dispatch:n})=>{const r=Se(t,e.schema);return EC(r)(e,n)},EN=()=>({state:t,dispatch:e})=>hC(t,e);function Bl(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Vh(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const bN=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=Bl(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=Se(t,r.schema)),l==="mark"&&(s=_n(t,r.schema)),i&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(u,c)=>{o&&o===u.type&&n.setNodeMarkup(c,void 0,Vh(u.attrs,e)),s&&u.marks.length&&u.marks.forEach(d=>{s===d.type&&n.addMark(c,c+u.nodeSize,s.create(Vh(d.attrs,e)))})})}),!0):!1},TN=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),MN=()=>({tr:t,dispatch:e})=>{if(e){const n=new dt(t.doc);t.setSelection(n)}return!0},ON=()=>({state:t,dispatch:e})=>lC(t,e),DN=()=>({state:t,dispatch:e})=>uC(t,e),AN=()=>({state:t,dispatch:e})=>yC(t,e),PN=()=>({state:t,dispatch:e})=>SC(t,e),IN=()=>({state:t,dispatch:e})=>xC(t,e);function Ju(t,e,n={},r={}){return go(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const RN=(t,e=!1,n={},r={})=>({editor:i,tr:o,dispatch:s,commands:l})=>{var a,u;const{doc:c}=o;if(n.preserveWhitespace!=="full"){const d=Ju(t,i.schema,n,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:i.options.enableContentCheck});return s&&o.replaceWith(0,c.content.size,d).setMeta("preventUpdate",!e),!0}return s&&o.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:c.content.size},t,{parseOptions:n,errorOnInvalidContent:(u=r.errorOnInvalidContent)!==null&&u!==void 0?u:i.options.enableContentCheck})};function s0(t,e){const n=_n(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,a=>{s.push(...a.marks)});const l=s.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function LN(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function zN(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function md(t){return e=>zN(e.$from,t)}function BN(t,e){const n={from:0,to:t.content.size};return Zy(t,n,e)}function _N(t,e){const n=Se(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,l=>{o.push(l)});const s=o.reverse().find(l=>l.type.name===n.name);return s?{...s.attrs}:{}}function FN(t,e){const n=Bl(typeof e=="string"?e:e.name,t.schema);return n==="node"?_N(t,e):n==="mark"?s0(t,e):{}}function l0(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),s=hd(o,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(t,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function vs(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function Qu(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?_n(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>o?o.name===d.type.name:!0).find(d=>il(d.attrs,n,{strict:!1}));let s=0;const l=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;t.doc.nodesBetween(h,p,(m,v)=>{if(!m.isText&&!m.marks.length)return;const g=Math.max(h,v),y=Math.min(p,v+m.nodeSize),x=y-g;s+=x,l.push(...m.marks.map(w=>({mark:w,from:g,to:y})))})}),s===0)return!1;const a=l.filter(d=>o?o.name===d.mark.type.name:!0).filter(d=>il(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),u=l.filter(d=>o?d.mark.type!==o&&d.mark.type.excludes(o):!0).reduce((d,f)=>d+f.to-f.from,0);return(a>0?a+u:a)>=s}function $N(t,e,n={}){if(!e)return yo(t,null,n)||Qu(t,null,n);const r=Bl(e,t.schema);return r==="node"?yo(t,e,n):r==="mark"?Qu(t,e,n):!1}function jh(t,e){const{nodeExtensions:n}=Rl(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=H(L(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function _l(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(_l(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function VN(t){return t instanceof B}function jN(t,e,n){var r;const{selection:i}=e;let o=null;if(n0(i)&&(o=i.$cursor),o){const l=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:s}=i;return s.some(({$from:l,$to:a})=>{let u=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(c,d,f)=>{if(u)return!1;if(c.isInline){const h=!f||f.type.allowsMarkType(n),p=!!n.isInSet(c.marks)||!c.marks.some(m=>m.type.excludes(n));u=h&&p}return!u}),u})}const HN=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:l}=o,a=_n(t,r.schema);if(i)if(s){const u=s0(r,a);n.addStoredMark(a.create({...u,...e}))}else l.forEach(u=>{const c=u.$from.pos,d=u.$to.pos;r.doc.nodesBetween(c,d,(f,h)=>{const p=Math.max(h,c),m=Math.min(h+f.nodeSize,d);f.marks.find(g=>g.type===a)?f.marks.forEach(g=>{a===g.type&&n.addMark(p,m,a.create({...g.attrs,...e}))}):n.addMark(p,m,a.create(e))})});return jN(r,n,a)},WN=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),UN=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=Se(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:l})=>zh(o,{...s,...e})(n)?!0:l.clearNodes()).command(({state:l})=>zh(o,{...s,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},qN=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Qn(t,0,r.content.size),o=B.create(r,i);e.setSelection(o)}return!0},KN=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=$.atStart(r).from,l=$.atEnd(r).to,a=Qn(i,s,l),u=Qn(o,s,l),c=$.create(r,a,u);e.setSelection(c)}return!0},GN=t=>({state:e,dispatch:n})=>{const r=Se(t,e.schema);return MC(r)(e,n)};function Hh(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const JN=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:l,$to:a}=o,u=i.extensionManager.attributes,c=vs(u,l.node().type.name,l.node().attrs);if(o instanceof B&&o.node.isBlock)return!l.parentOffset||!Ur(s,l.pos)?!1:(r&&(t&&Hh(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const d=a.parentOffset===a.parent.content.size,f=l.depth===0?void 0:LN(l.node(-1).contentMatchAt(l.indexAfter(-1)));let h=d&&f?[{type:f,attrs:c}]:void 0,p=Ur(e.doc,e.mapping.map(l.pos),1,h);if(!h&&!p&&Ur(e.doc,e.mapping.map(l.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:c}]:void 0),r){if(p&&(o instanceof $&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,h),f&&!d&&!l.parentOffset&&l.parent.type!==f)){const m=e.mapping.map(l.before()),v=e.doc.resolve(m);l.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&e.setNodeMarkup(e.mapping.map(l.before()),f)}t&&Hh(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return p},QN=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var s;const l=Se(t,r.schema),{$from:a,$to:u}=r.selection,c=r.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(u))return!1;const d=a.node(-1);if(d.type!==l)return!1;const f=o.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let g=O.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let k=a.depth-y;k>=a.depth-3;k-=1)g=O.from(a.node(k).copy(g));const x=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,w={...vs(f,a.node().type.name,a.node().attrs),...e},N=((s=l.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(w))||void 0;g=g.append(O.from(l.createAndFill(null,N)||void 0));const E=a.before(a.depth-(y-1));n.replace(E,a.after(-x),new P(g,4-y,0));let C=-1;n.doc.nodesBetween(E,n.doc.content.size,(k,A)=>{if(C>-1)return!1;k.isTextblock&&k.content.size===0&&(C=A+1)}),C>-1&&n.setSelection($.near(n.doc.resolve(C))),n.scrollIntoView()}return!0}const h=u.pos===a.end()?d.contentMatchAt(0).defaultType:null,p={...vs(f,d.type.name,d.attrs),...e},m={...vs(f,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,u.pos);const v=h?[{type:l,attrs:p},{type:h,attrs:m}]:[{type:l,attrs:p}];if(!Ur(n.doc,a.pos,2))return!1;if(i){const{selection:g,storedMarks:y}=r,{splittableMarks:x}=o.extensionManager,w=y||g.$to.parentOffset&&g.$from.marks();if(n.split(a.pos,2,v).scrollIntoView(),!w||!i)return!0;const N=w.filter(E=>x.includes(E.type.name));n.ensureMarks(N)}return!0},Oa=(t,e)=>{const n=md(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&zn(t.doc,n.pos)&&t.join(n.pos),!0},Da=(t,e)=>{const n=md(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&zn(t.doc,r)&&t.join(r),!0},YN=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:l,chain:a,commands:u,can:c})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Se(t,s.schema),p=Se(e,s.schema),{selection:m,storedMarks:v}=s,{$from:g,$to:y}=m,x=g.blockRange(y),w=v||m.$to.parentOffset&&m.$from.marks();if(!x)return!1;const N=md(E=>jh(E.type.name,d))(m);if(x.depth>=1&&N&&x.depth-N.depth<=1){if(N.node.type===h)return u.liftListItem(p);if(jh(N.node.type.name,d)&&h.validContent(N.node.content)&&l)return a().command(()=>(o.setNodeMarkup(N.pos,h),!0)).command(()=>Oa(o,h)).command(()=>Da(o,h)).run()}return!n||!w||!l?a().command(()=>c().wrapInList(h,r)?!0:u.clearNodes()).wrapInList(h,r).command(()=>Oa(o,h)).command(()=>Da(o,h)).run():a().command(()=>{const E=c().wrapInList(h,r),C=w.filter(k=>f.includes(k.type.name));return o.ensureMarks(C),E?!0:u.clearNodes()}).wrapInList(h,r).command(()=>Oa(o,h)).command(()=>Da(o,h)).run()},XN=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=_n(t,r.schema);return Qu(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},ZN=(t,e,n={})=>({state:r,commands:i})=>{const o=Se(t,r.schema),s=Se(e,r.schema),l=yo(r,o,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?i.setNode(s,a):i.setNode(o,{...a,...n})},eE=(t,e={})=>({state:n,commands:r})=>{const i=Se(t,n.schema);return yo(n,i,e)?r.lift(i):r.wrapIn(i,e)},tE=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,l=o.transform;for(let a=l.steps.length-1;a>=0;a-=1)s.step(l.steps[a].invert(l.docs[a]));if(o.text){const a=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,a))}else s.delete(o.from,o.to)}return!0}}return!1},nE=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},rE=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:l}=n,a=_n(t,r.schema),{$from:u,empty:c,ranges:d}=l;if(!i)return!0;if(c&&s){let{from:f,to:h}=l;const p=(o=u.marks().find(v=>v.type===a))===null||o===void 0?void 0:o.attrs,m=hd(u,a,p);m&&(f=m.from,h=m.to),n.removeMark(f,h,a)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,a)});return n.removeStoredMark(a),!0},iE=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=Bl(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=Se(t,r.schema)),l==="mark"&&(s=_n(t,r.schema)),i&&n.selection.ranges.forEach(a=>{const u=a.$from.pos,c=a.$to.pos;let d,f,h,p;n.selection.empty?r.doc.nodesBetween(u,c,(m,v)=>{o&&o===m.type&&(h=Math.max(v,u),p=Math.min(v+m.nodeSize,c),d=v,f=m)}):r.doc.nodesBetween(u,c,(m,v)=>{v<u&&o&&o===m.type&&(h=Math.max(v,u),p=Math.min(v+m.nodeSize,c),d=v,f=m),v>=u&&v<=c&&(o&&o===m.type&&n.setNodeMarkup(v,void 0,{...m.attrs,...e}),s&&m.marks.length&&m.marks.forEach(g=>{if(s===g.type){const y=Math.max(v,u),x=Math.min(v+m.nodeSize,c);n.addMark(y,x,s.create({...g.attrs,...e}))}}))}),f&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...f.attrs,...e}),s&&f.marks.length&&f.marks.forEach(m=>{s===m.type&&n.addMark(h,p,s.create({...m.attrs,...e}))}))}),!0):!1},oE=(t,e={})=>({state:n,dispatch:r})=>{const i=Se(t,n.schema);return kC(i,e)(n,r)},sE=(t,e={})=>({state:n,dispatch:r})=>{const i=Se(t,n.schema);return wC(i,e)(n,r)};var lE=Object.freeze({__proto__:null,blur:UC,clearContent:qC,clearNodes:KC,command:GC,createParagraphNear:JC,cut:QC,deleteCurrentNode:YC,deleteNode:XC,deleteRange:ZC,deleteSelection:eN,enter:tN,exitCode:nN,extendMarkRange:rN,first:iN,focus:sN,forEach:lN,insertContent:aN,insertContentAt:dN,joinBackward:pN,joinDown:hN,joinForward:mN,joinItemBackward:gN,joinItemForward:yN,joinTextblockBackward:vN,joinTextblockForward:xN,joinUp:fN,keyboardShortcut:kN,lift:wN,liftEmptyBlock:CN,liftListItem:NN,newlineInCode:EN,resetAttributes:bN,scrollIntoView:TN,selectAll:MN,selectNodeBackward:ON,selectNodeForward:DN,selectParentNode:AN,selectTextblockEnd:PN,selectTextblockStart:IN,setContent:RN,setMark:HN,setMeta:WN,setNode:UN,setNodeSelection:qN,setTextSelection:KN,sinkListItem:GN,splitBlock:JN,splitListItem:QN,toggleList:YN,toggleMark:XN,toggleNode:ZN,toggleWrap:eE,undoInputRule:tE,unsetAllMarks:nE,unsetMark:rE,updateAttributes:iE,wrapIn:oE,wrapInList:sE});const aE=Ie.create({name:"commands",addCommands(){return{...lE}}}),uE=Ie.create({name:"drop",addProseMirrorPlugins(){return[new He({key:new Nt("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),cE=Ie.create({name:"editable",addProseMirrorPlugins(){return[new He({key:new Nt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),dE=new Nt("focusEvents"),fE=Ie.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new He({key:dE,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),hE=Ie.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:l})=>{const{selection:a,doc:u}=l,{empty:c,$anchor:d}=a,{pos:f,parent:h}=d,p=d.parent.isTextblock&&f>0?l.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,v=d.pos-d.parentOffset,g=m&&p.parent.childCount===1?v===d.pos:j.atStart(u).from===f;return!c||!h.type.isTextblock||h.textContent.length||!g||g&&d.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return pd()||o0()?o:i},addProseMirrorPlugins(){return[new He({key:new Nt("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(m=>m.getMeta("composition")))return;const r=t.some(m=>m.docChanged)&&!e.doc.eq(n.doc),i=t.some(m=>m.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:s,to:l}=e.selection,a=j.atStart(e.doc).from,u=j.atEnd(e.doc).to;if(o||!(s===a&&l===u)||!_l(n.doc))return;const f=n.tr,h=Pl({state:n,transaction:f}),{commands:p}=new Il({editor:this.editor,state:h});if(p.clearNodes(),!!f.steps.length)return f}})]}}),pE=Ie.create({name:"paste",addProseMirrorPlugins(){return[new He({key:new Nt("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),mE=Ie.create({name:"tabindex",addProseMirrorPlugins(){return[new He({key:new Nt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Wn{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Wn(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Wn(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Wn(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,s=this.pos+r+(o?0:1),l=this.resolvedPos.doc.resolve(s);if(!i&&l.depth<=this.depth)return;const a=new Wn(l,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new Wn(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,s=Object.keys(n);for(let l=0;l<s.length;l+=1){const a=s[l];if(o[a]!==n[a])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&o.every(a=>n[a]===s.node.attrs[a])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const gE=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function yE(t,e,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${n?`-${n}`:""}`,""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class vE extends OC{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=yE(gE,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=Xy(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(o=>{const s=typeof o=="string"?`${o}$`:o.key;r=r.filter(l=>!l.key.startsWith(s))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[cE,WC.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),aE,fE,hE,mE,uE,pE].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new _r(i,this)}createCommandManager(){this.commandManager=new Il({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=Ju(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),n=Ju(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=r0(n,this.options.autofocus);this.view=new Hy(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Br.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return FN(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return $N(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return dd(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return BN(this.state.doc,{blockSeparator:n,textSerializers:{...e0(this.schema),...r}})}get isEmpty(){return _l(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Wn(n,this)}get $doc(){return this.$pos(0)}}function oi(t){return new Ll({find:t.find,handler:({state:e,range:n,match:r})=>{const i=H(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],l=r[0];if(s){const a=l.search(/\S/),u=n.from+l.indexOf(s),c=u+s.length;if(l0(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===t.type&&m!==h.mark.type)).filter(h=>h.to>u).length)return null;c<n.to&&o.delete(c,n.to),u>n.from&&o.delete(n.from+a,u);const f=n.from+a+s.length;o.addMark(n.from+a,f,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function xE(t){return new Ll({find:t.find,handler:({state:e,range:n,match:r})=>{const i=H(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from;let l=n.to;const a=t.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let c=s+u;c>l?c=l:l=c+r[1].length;const d=r[0][r[0].length-1];o.insertText(d,s+r[0].length-1),o.replaceWith(c,l,a)}else if(r[0]){const u=t.type.isInline?s:s-1;o.insert(u,t.type.create(i)).delete(o.mapping.map(s),o.mapping.map(l))}o.scrollIntoView()}})}function Yu(t){return new Ll({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=H(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function vo(t){return new Ll({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=H(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),a=s.doc.resolve(n.from).blockRange(),u=a&&Xc(a,t.type,o);if(!u)return null;if(s.wrap(a,u),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:h}=t.editor.extensionManager,p=f||d.$to.parentOffset&&d.$from.marks();if(p){const m=p.filter(v=>h.includes(v.type.name));s.ensureMarks(m)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,o).run()}const c=s.doc.resolve(n.from-1).nodeBefore;c&&c.type===t.type&&zn(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,c))&&s.join(n.from-1)}})}class Qe{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=H(L(this,"addOptions",{name:this.name}))),this.storage=H(L(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Qe(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>zl(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Qe(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=H(L(n,"addOptions",{name:n.name})),n.storage=H(L(n,"addStorage",{name:n.name,options:n.options})),n}}function si(t){return new _C({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=H(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:s}=e,l=r[r.length-1],a=r[0];let u=n.to;if(l){const c=a.search(/\S/),d=n.from+a.indexOf(l),f=d+l.length;if(l0(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(v=>v===t.type&&v!==p.mark.type)).filter(p=>p.to>d).length)return null;f<n.to&&s.delete(f,n.to),d>n.from&&s.delete(n.from+c,d),u=n.from+c+l.length,s.addMark(n.from+c,u,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}function SE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var a0={exports:{}},Aa={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wh;function kE(){if(Wh)return Aa;Wh=1;var t=me;function e(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function l(d,f){var h=f(),p=r({inst:{value:h,getSnapshot:f}}),m=p[0].inst,v=p[1];return o(function(){m.value=h,m.getSnapshot=f,a(m)&&v({inst:m})},[d,h,f]),i(function(){return a(m)&&v({inst:m}),d(function(){a(m)&&v({inst:m})})},[d]),s(h),h}function a(d){var f=d.getSnapshot;d=d.value;try{var h=f();return!n(d,h)}catch{return!0}}function u(d,f){return f()}var c=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return Aa.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:c,Aa}a0.exports=kE();var gd=a0.exports;const wE=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},CE=({contentComponent:t})=>{const e=gd.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return me.createElement(me.Fragment,null,Object.values(e))};function NE(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:Vv.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class EE extends me.Component{constructor(e){var n;super(e),this.editorContentRef=me.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=NE(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return me.createElement(me.Fragment,null,me.createElement("div",{ref:wE(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&me.createElement(CE,{contentComponent:e.contentComponent}))}}const bE=b.forwardRef((t,e)=>{const n=me.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return me.createElement(EE,{key:n,innerRef:e,...t})}),TE=me.memo(bE);var ME=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!(s==="_owner"&&e.$$typeof)&&!t(e[s],n[s]))return!1}return!0}return e!==e&&n!==n},OE=SE(ME),u0={exports:{}},Pa={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uh;function DE(){if(Uh)return Pa;Uh=1;var t=me,e=gd;function n(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,s=t.useEffect,l=t.useMemo,a=t.useDebugValue;return Pa.useSyncExternalStoreWithSelector=function(u,c,d,f,h){var p=o(null);if(p.current===null){var m={hasValue:!1,value:null};p.current=m}else m=p.current;p=l(function(){function g(E){if(!y){if(y=!0,x=E,E=f(E),h!==void 0&&m.hasValue){var C=m.value;if(h(C,E))return w=C}return w=E}if(C=w,r(x,E))return C;var k=f(E);return h!==void 0&&h(C,k)?C:(x=E,w=k)}var y=!1,x,w,N=d===void 0?null:d;return[function(){return g(c())},N===null?void 0:function(){return g(N())}]},[c,d,f,h]);var v=i(u,p[0],p[1]);return s(function(){m.hasValue=!0,m.value=v},[v]),a(v),v},Pa}u0.exports=DE();var AE=u0.exports;const PE=typeof window<"u"?b.useLayoutEffect:b.useEffect;class IE{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function RE(t){var e;const[n]=b.useState(()=>new IE(t.editor)),r=AE.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:OE);return PE(()=>n.watch(t.editor),[t.editor,n]),b.useDebugValue(r),r}const LE=!1,Xu=typeof window>"u",zE=Xu||!!(typeof window<"u"&&window.next);class yd{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return Xu||zE?null:this.createEditor();if(this.options.current.immediatelyRender&&Xu&&LE)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onBeforeCreate)===null||o===void 0?void 0:o.call(i,...r)},onBlur:(...r)=>{var i,o;return(o=(i=this.options.current).onBlur)===null||o===void 0?void 0:o.call(i,...r)},onCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onCreate)===null||o===void 0?void 0:o.call(i,...r)},onDestroy:(...r)=>{var i,o;return(o=(i=this.options.current).onDestroy)===null||o===void 0?void 0:o.call(i,...r)},onFocus:(...r)=>{var i,o;return(o=(i=this.options.current).onFocus)===null||o===void 0?void 0:o.call(i,...r)},onSelectionUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onSelectionUpdate)===null||o===void 0?void 0:o.call(i,...r)},onTransaction:(...r)=>{var i,o;return(o=(i=this.options.current).onTransaction)===null||o===void 0?void 0:o.call(i,...r)},onUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onUpdate)===null||o===void 0?void 0:o.call(i,...r)},onContentError:(...r)=>{var i,o;return(o=(i=this.options.current).onContentError)===null||o===void 0?void 0:o.call(i,...r)},onDrop:(...r)=>{var i,o;return(o=(i=this.options.current).onDrop)===null||o===void 0?void 0:o.call(i,...r)},onPaste:(...r)=>{var i,o;return(o=(i=this.options.current).onPaste)===null||o===void 0?void 0:o.call(i,...r)}};return new vE(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,o)=>{var s;return i===((s=n.extensions)===null||s===void 0?void 0:s[o])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?yd.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function BE(t={},e=[]){const n=b.useRef(t);n.current=t;const[r]=b.useState(()=>new yd(n)),i=gd.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return b.useDebugValue(i),b.useEffect(r.onRender(e)),RE({editor:i,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&o===0?0:o+1}),i}const _E=b.createContext({editor:null});_E.Consumer;const FE=b.createContext({onDragStart:void 0}),$E=()=>b.useContext(FE);me.forwardRef((t,e)=>{const{onDragStart:n}=$E(),r=t.as||"div";return me.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const VE=/^\s*>\s$/,jE=Qe.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",$e(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[vo({find:VE,type:this.type})]}}),HE=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,WE=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,UE=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,qE=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,KE=Dn.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",$e(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[oi({find:HE,type:this.type}),oi({find:UE,type:this.type})]},addPasteRules(){return[si({find:WE,type:this.type}),si({find:qE,type:this.type})]}}),GE="listItem",qh="textStyle",Kh=/^\s*([-+*])\s$/,JE=Qe.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",$e(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(GE,this.editor.getAttributes(qh)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=vo({find:Kh,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=vo({find:Kh,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(qh),editor:this.editor})),[t]}}),QE=/(^|[^`])`([^`]+)`(?!`)/,YE=/(^|[^`])`([^`]+)`(?!`)/g,XE=Dn.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",$e(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[oi({find:QE,type:this.type})]},addPasteRules(){return[si({find:YE,type:this.type})]}}),ZE=/^```([a-z]+)?[\s\n]$/,eb=/^~~~([a-z]+)?[\s\n]$/,tb=Qe.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,o=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",$e(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:u})=>(u.setSelection(j.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[Yu({find:ZE,type:this.type,getAttributes:t=>({language:t[1]})}),Yu({find:eb,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new He({key:new Nt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:s,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:o},a)),s.selection.$from.parent.type!==this.type&&s.setSelection($.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),nb=Qe.create({name:"doc",topNode:!0,content:"block+"});function rb(t={}){return new He({view(e){return new ib(e,t)}})}class ib{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,o=i.getBoundingClientRect(),s=o.width/i.offsetWidth,l=o.height/i.offsetHeight;if(n){let d=e.nodeBefore,f=e.nodeAfter;if(d||f){let h=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(h){let p=h.getBoundingClientRect(),m=d?p.bottom:p.top;d&&f&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*l;r={left:p.left,right:p.right,top:m-v,bottom:m+v}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*s;r={left:d.left-f,right:d.left+f,top:d.top,bottom:d.bottom}}let a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let u,c;if(!a||a==document.body&&getComputedStyle(a).position=="static")u=-pageXOffset,c=-pageYOffset;else{let d=a.getBoundingClientRect(),f=d.width/a.offsetWidth,h=d.height/a.offsetHeight;u=d.left-a.scrollLeft*f,c=d.top-a.scrollTop*h}this.element.style.left=(r.left-u)/s+"px",this.element.style.top=(r.top-c)/l+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=ry(this.editorView.state.doc,s,this.editorView.dragging.slice);l!=null&&(s=l)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const ob=Ie.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[rb(this.options)]}});class re extends j{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return re.valid(r)?new re(r):j.near(r)}content(){return P.empty}eq(e){return e instanceof re&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new re(e.resolve(n.pos))}getBookmark(){return new vd(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!sb(e)||!lb(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&re.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let l=e.node(s);if(n>0?e.indexAfter(s)<l.childCount:e.index(s)>0){o=l.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let a=e.doc.resolve(i);if(re.valid(a))return a}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!B.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let l=e.doc.resolve(i);if(re.valid(l))return l}return null}}}re.prototype.visible=!1;re.findFrom=re.findGapCursorFrom;j.jsonID("gapcursor",re);class vd{constructor(e){this.pos=e}map(e){return new vd(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return re.valid(n)?new re(n):j.near(n)}}function sb(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function lb(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function ab(){return new He({props:{decorations:fb,createSelectionBetween(t,e,n){return e.pos==n.pos&&re.valid(n)?new re(n):null},handleClick:cb,handleKeyDown:ub,handleDOMEvents:{beforeinput:db}}})}const ub=Wy({ArrowLeft:ns("horiz",-1),ArrowRight:ns("horiz",1),ArrowUp:ns("vert",-1),ArrowDown:ns("vert",1)});function ns(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,l=e>0?s.$to:s.$from,a=s.empty;if(s instanceof $){if(!o.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let u=re.findGapCursorFrom(l,e,a);return u?(i&&i(r.tr.setSelection(new re(u))),!0):!1}}function cb(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!re.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&B.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new re(r))),!0)}function db(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof re))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=O.empty;for(let s=r.length-1;s>=0;s--)i=O.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new P(i,0,0));return o.setSelection($.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function fb(t){if(!(t.selection instanceof re))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",se.create(t.doc,[et.widget(t.selection.head,e,{key:"gapcursor"})])}const hb=Ie.create({name:"gapCursor",addProseMirrorPlugins(){return[ab()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=H(L(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),pb=Qe.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",$e(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:l}=r.extensionManager,a=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&a&&s){const d=a.filter(f=>l.includes(f.type.name));u.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),mb=Qe.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,$e(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Yu({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var ol=200,xe=function(){};xe.prototype.append=function(e){return e.length?(e=xe.from(e),!this.length&&e||e.length<ol&&this.leafAppend(e)||this.length<ol&&e.leafPrepend(this)||this.appendInner(e)):this};xe.prototype.prepend=function(e){return e.length?xe.from(e).append(this):this};xe.prototype.appendInner=function(e){return new gb(this,e)};xe.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?xe.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};xe.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};xe.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};xe.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};xe.from=function(e){return e instanceof xe?e:e&&e.length?new c0(e):xe.empty};var c0=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,l){for(var a=o;a<s;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,l){for(var a=o-1;a>=s;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=ol)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=ol)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(xe);xe.empty=new c0([]);var gb=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(o,l),s)===!1||o>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,o)-l,s+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(o,l)-l,s+l)===!1||o<l&&this.left.forEachInvertedInner(r,Math.min(i,l),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(xe);const yb=500;class xt{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,l,a,u=[],c=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),o=i.maps.length),o--,c.push(d);return}if(i){c.push(new Tt(d.map));let h=d.step.map(i.slice(o)),p;h&&s.maybeStep(h).doc&&(p=s.mapping.maps[s.mapping.maps.length-1],u.push(new Tt(p,void 0,void 0,u.length+c.length))),o--,p&&i.appendMap(p,o)}else s.maybeStep(d.step);if(d.selection)return l=i?d.selection.map(i.slice(o)):d.selection,a=new xt(this.items.slice(0,r).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:s,selection:l}}addTransform(e,n,r,i){let o=[],s=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let c=0;c<e.steps.length;c++){let d=e.steps[c].invert(e.docs[c]),f=new Tt(e.mapping.maps[c],d,n),h;(h=a&&a.merge(f))&&(f=h,c?o.pop():l=l.slice(0,l.length-1)),o.push(f),n&&(s++,n=void 0),i||(a=f)}let u=s-r.depth;return u>xb&&(l=vb(l,u),s-=u),new xt(l.append(o),s)}remapping(e,n){let r=new co;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new xt(this.items.append(e.map(n=>new Tt(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},i);let a=n;this.items.forEach(f=>{let h=o.getMirror(--a);if(h==null)return;s=Math.min(s,h);let p=o.maps[h];if(f.step){let m=e.steps[h].invert(e.docs[h]),v=f.selection&&f.selection.map(o.slice(a+1,h));v&&l++,r.push(new Tt(p,m,v))}else r.push(new Tt(p))},i);let u=[];for(let f=n;f<s;f++)u.push(new Tt(o.maps[f]));let c=this.items.slice(0,i).append(u).append(r),d=new xt(c,l);return d.emptyItemCount()>yb&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,l)=>{if(l>=e)i.push(s),s.selection&&o++;else if(s.step){let a=s.step.map(n.slice(r)),u=a&&a.getMap();if(r--,u&&n.appendMap(u,r),a){let c=s.selection&&s.selection.map(n.slice(r));c&&o++;let d=new Tt(u.invert(),a,c),f,h=i.length-1;(f=i.length&&i[h].merge(d))?i[h]=f:i.push(d)}}else s.map&&r--},this.items.length,0),new xt(xe.from(i.reverse()),o)}}xt.empty=new xt(xe.empty,0);function vb(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Tt{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Tt(n.getMap().invert(),n,this.selection)}}}class tn{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const xb=20;function Sb(t,e,n,r){let i=n.getMeta(ir),o;if(i)return i.historyState;n.getMeta(Cb)&&(t=new tn(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(ir))return s.getMeta(ir).redo?new tn(t.done.addTransform(n,void 0,r,xs(e)),t.undone,Gh(n.mapping.maps),t.prevTime,t.prevComposition):new tn(t.done,t.undone.addTransform(n,void 0,r,xs(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!s&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!kb(n,t.prevRanges)),u=s?Ia(t.prevRanges,n.mapping):Gh(n.mapping.maps);return new tn(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,xs(e)),xt.empty,u,n.time,l??t.prevComposition)}else return(o=n.getMeta("rebased"))?new tn(t.done.rebased(n,o),t.undone.rebased(n,o),Ia(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new tn(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Ia(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function kb(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function Gh(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,s)=>e.push(o,s));return e}function Ia(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function wb(t,e,n){let r=xs(e),i=ir.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),l=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),a=new tn(n?l:o.remaining,n?o.remaining:l,null,0,-1);return o.transform.setSelection(s).setMeta(ir,{redo:n,historyState:a})}let Ra=!1,Jh=null;function xs(t){let e=t.plugins;if(Jh!=e){Ra=!1,Jh=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Ra=!0;break}}return Ra}const ir=new Nt("history"),Cb=new Nt("closeHistory");function Nb(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new He({key:ir,state:{init(){return new tn(xt.empty,xt.empty,null,0,-1)},apply(e,n,r){return Sb(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?f0:r=="historyRedo"?h0:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function d0(t,e){return(n,r)=>{let i=ir.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=wb(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const f0=d0(!1,!0),h0=d0(!0,!0),Eb=Ie.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>f0(t,e),redo:()=>({state:t,dispatch:e})=>h0(t,e)}},addProseMirrorPlugins(){return[Nb(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),bb=Qe.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",$e(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:i}=n,o=t();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):VN(n)?o.insertContentAt(i.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:s,dispatch:l})=>{var a;if(l){const{$to:u}=s.selection,c=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?s.setSelection($.create(s.doc,u.pos+1)):u.nodeAfter.isBlock?s.setSelection(B.create(s.doc,u.pos)):s.setSelection($.create(s.doc,u.pos));else{const d=(a=u.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();d&&(s.insert(c,d),s.setSelection($.create(s.doc,c+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[xE({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),Tb=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Mb=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Ob=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Db=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Ab=Dn.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",$e(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[oi({find:Tb,type:this.type}),oi({find:Ob,type:this.type})]},addPasteRules(){return[si({find:Mb,type:this.type}),si({find:Db,type:this.type})]}}),Pb=Qe.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",$e(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Ib="listItem",Qh="textStyle",Yh=/^(\d+)\.\s$/,Rb=Qe.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",$e(this.options.HTMLAttributes,n),0]:["ol",$e(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Ib,this.editor.getAttributes(Qh)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=vo({find:Yh,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=vo({find:Yh,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Qh)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),Lb=Qe.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",$e(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),zb=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Bb=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,_b=Dn.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",$e(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[oi({find:zb,type:this.type})]},addPasteRules(){return[si({find:Bb,type:this.type})]}}),Fb=Qe.create({name:"text",group:"inline"}),$b=Ie.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(KE.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(jE.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(JE.configure(this.options.bulletList)),this.options.code!==!1&&t.push(XE.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(tb.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(nb.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(ob.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(hb.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(pb.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(mb.configure(this.options.heading)),this.options.history!==!1&&t.push(Eb.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(bb.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(Ab.configure(this.options.italic)),this.options.listItem!==!1&&t.push(Pb.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(Rb.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(Lb.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(_b.configure(this.options.strike)),this.options.text!==!1&&t.push(Fb.configure(this.options.text)),t}}),Vb=Ie.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new He({key:new Nt("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const o=this.editor.isEmpty;return t.descendants((s,l)=>{const a=r>=l&&r<=l+s.nodeSize,u=!s.isLeaf&&_l(s);if((a||!this.options.showOnlyCurrent)&&u){const c=[this.options.emptyNodeClass];o&&c.push(this.options.emptyEditorClass);const d=et.node(l,l+s.nodeSize,{class:c.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:s,pos:l,hasAnchor:a}):this.options.placeholder});i.push(d)}return this.options.includeChildren}),se.create(t,i)}}})]}}),jb=()=>{const{id:t}=gx(),{t:e,language:n,isInitialized:r}=Ln(),i=Eo(),[o,s]=b.useState(null),[l,a]=b.useState(!0),[u,c]=b.useState(!1),[d,f]=b.useState(!1),[h,p]=b.useState([]),[m,v]=b.useState(!1);b.useState("");const[g,y]=b.useState(!1),x=b.useMemo(()=>e("draftEditor.placeholder"),[e]),w=BE({extensions:[$b,Vb.configure({placeholder:x})],content:"",onUpdate:({editor:T})=>{}},[n]);b.useEffect(()=>{(async()=>{try{const z=await fetch(`/api/drafts/${t}`);if(!z.ok)throw new Error("Not found");const _=await z.json();s(_)}catch{s({id:t,content:"",type:"announcement",createdAt:new Date().toISOString()})}})()},[t]),b.useEffect(()=>{if(w&&o)try{w.commands.setContent(o.content||""),a(!1)}catch(T){console.error("Error setting editor content:",T),a(!1)}},[w,o]),b.useEffect(()=>{a(!0)},[t]);const N=async()=>{if(w){c(!0);try{const T={...o,content:w.getHTML(),updatedAt:new Date().toISOString(),type:o.type||"announcement"};s(T),await fetch(`/api/drafts/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)}),setTimeout(()=>c(!1),1e3)}catch{c(!1)}}},E=async()=>{try{const T=w.getHTML(),z=document.createElement("div");z.innerHTML=T,await navigator.clipboard.writeText(z.innerText),y(!0),setTimeout(()=>{y(!1)},3e3)}catch(T){console.error("Copy failed:",T)}},C=async()=>{if(!w)return;const z=`Regenerated content:

${w.getText()}

This is a regenerated version based on your current content. Please adjust as needed.`;w.commands.setContent(z)},k=async()=>{if(w){v(!0),f(!0);try{await new Promise(z=>setTimeout(z,1500));const T=[{id:1,original:"Please make necessary modifications and adjustments according to actual circumstances",suggestion:"Please make appropriate modifications and adjustments based on specific circumstances",reason:e("draftEditor.moreFormal")},{id:2,original:"If you have any questions",suggestion:"If you have any questions or need further clarification",reason:e("draftEditor.moreDetailed")},{id:3,original:"contact the relevant department promptly",suggestion:"please contact the relevant responsible department promptly",reason:e("draftEditor.morePolite")}];p(T)}catch(T){console.error(e("draftEditor.suggestionsError"),T)}finally{v(!1)}}},A=T=>{if(!w)return;const _=w.getHTML().replace(T.original,T.suggestion);w.commands.setContent(_)};return l||!w||!o?S("div",{className:"flex items-center justify-center min-h-64",children:S(Zn,{className:"h-10 w-10 animate-spin text-primary-600"})}):M("div",{className:"max-w-6xl mx-auto space-y-6",children:[g&&M("div",{className:"fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg flex items-center space-x-2 z-50",children:[S(Cl,{className:"h-4 w-4"}),S("span",{children:e("messages.copySuccess")})]}),M("div",{className:"flex items-center justify-between mb-6",children:[M("div",{children:[S("h1",{className:"text-3xl font-bold text-neutral-900 mb-2",children:e("draftEditor.title")}),S("p",{className:"text-lg text-neutral-600",children:o.title})]}),M("div",{className:"flex items-center gap-2",children:[M("button",{onClick:()=>i(-1),className:"btn-outline flex items-center",children:[S(Eg,{className:"h-4 w-4 mr-2"}),e("draftEditor.back")]}),S("button",{onClick:E,className:"btn-secondary",children:e("draftEditor.copy")}),S("button",{onClick:N,className:"btn-primary",disabled:u,children:e(u?"draftEditor.saving":"draftEditor.save")})]})]}),M("div",{className:"card p-4",children:[M("div",{className:"flex items-center gap-2 mb-4 border-b border-neutral-200 pb-4",children:[S("button",{onClick:()=>w.chain().focus().undo().run(),disabled:!w.can().undo(),className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 rounded disabled:opacity-50",title:"Undo",children:S(uS,{className:"h-4 w-4"})}),S("button",{onClick:()=>w.chain().focus().redo().run(),disabled:!w.can().redo(),className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 rounded disabled:opacity-50",title:"Redo",children:S(sS,{className:"h-4 w-4"})}),S("div",{className:"w-px h-6 bg-neutral-300 mx-2"}),S("button",{onClick:()=>w.chain().focus().toggleBold().run(),className:`p-2 rounded ${w.isActive("bold")?"bg-blue-100 text-blue-600":"text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100"}`,title:"Bold",children:S(Qx,{className:"h-4 w-4"})}),S("button",{onClick:()=>w.chain().focus().toggleItalic().run(),className:`p-2 rounded ${w.isActive("italic")?"bg-blue-100 text-blue-600":"text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100"}`,title:"Italic",children:S(tS,{className:"h-4 w-4"})}),S("div",{className:"w-px h-6 bg-neutral-300 mx-2"}),S("button",{onClick:()=>w.chain().focus().toggleBulletList().run(),className:`p-2 rounded ${w.isActive("bulletList")?"bg-blue-100 text-blue-600":"text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100"}`,title:"Bullet List",children:S(iS,{className:"h-4 w-4"})}),S("button",{onClick:()=>w.chain().focus().toggleOrderedList().run(),className:`p-2 rounded ${w.isActive("orderedList")?"bg-blue-100 text-blue-600":"text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100"}`,title:"Numbered List",children:S(rS,{className:"h-4 w-4"})}),S("button",{onClick:()=>w.chain().focus().toggleBlockquote().run(),className:`p-2 rounded ${w.isActive("blockquote")?"bg-blue-100 text-blue-600":"text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100"}`,title:"Quote",children:S(oS,{className:"h-4 w-4"})})]}),S("div",{className:"min-h-[400px] prose prose-sm max-w-none",children:S(TE,{editor:w})})]}),d&&M("div",{className:"card p-6",children:[M("div",{className:"flex items-center justify-between mb-4",children:[S("h3",{className:"text-lg font-semibold text-neutral-900",children:e("draftEditor.suggestions")}),S("button",{onClick:()=>f(!1),className:"text-neutral-500 hover:text-neutral-700",children:"×"})]}),m?M("div",{className:"flex items-center justify-center py-8",children:[S(Zn,{className:"h-6 w-6 animate-spin text-blue-600 mr-2"}),e("draftEditor.generatingSuggestions")]}):h.length>0?S("div",{className:"space-y-4",children:h.map(T=>M("div",{className:"border border-neutral-200 rounded-lg p-4",children:[M("div",{className:"flex items-start justify-between mb-2",children:[S("span",{className:"text-sm font-medium text-neutral-700",children:T.reason}),S("button",{onClick:()=>A(T),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:e("draftEditor.applySuggestion")})]}),M("div",{className:"text-sm text-neutral-600",children:[M("div",{className:"mb-1",children:[S("strong",{children:"Original:"})," ",T.original]}),M("div",{children:[S("strong",{children:"Suggestion:"})," ",T.suggestion]})]})]},T.id))}):S("p",{className:"text-neutral-500 text-center py-4",children:e("draftEditor.noSuggestions")})]}),M("div",{className:"flex items-center gap-4",children:[M("button",{onClick:k,className:"btn-outline flex items-center",disabled:m,children:[S(nS,{className:"h-4 w-4 mr-2"}),e("draftEditor.suggestions")]}),M("button",{onClick:C,className:"btn-secondary flex items-center",children:[S(Mg,{className:"h-4 w-4 mr-2"}),e("draftEditor.regenerate")]})]})]})},Hb=()=>{const{t,isInitialized:e}=Ln(),[n,r]=b.useState([]),[i,o]=b.useState([]),[s,l]=b.useState(""),[a,u]=b.useState("all"),[c,d]=b.useState("newest"),[f,h]=b.useState(!0),[p,m]=b.useState(!1);b.useEffect(()=>{e&&(h(!0),fetch("/api/drafts").then(C=>C.json()).then(C=>{const k=Array.isArray(C)?C:[];r(k),o(k)}).catch(()=>{r([]),o([])}).finally(()=>h(!1)))},[e]),b.useEffect(()=>{let C=n.filter(k=>{if(!k||!k.title||!k.content)return!1;const A=(k.title||"").toLowerCase().includes(s.toLowerCase())||(k.content||"").toLowerCase().includes(s.toLowerCase()),T=a==="all"||(k.type||"")===a;return A&&T});C.sort((k,A)=>{if(c==="newest"){const T=k.createdAt&&!isNaN(Date.parse(k.createdAt))?Date.parse(k.createdAt):0;return(A.createdAt&&!isNaN(Date.parse(A.createdAt))?Date.parse(A.createdAt):0)-T}else if(c==="oldest"){const T=k.createdAt&&!isNaN(Date.parse(k.createdAt))?Date.parse(k.createdAt):0,z=A.createdAt&&!isNaN(Date.parse(A.createdAt))?Date.parse(A.createdAt):0;return T-z}else if(c==="type")return(k.type||"").localeCompare(A.type||"");return 0}),o(C)},[n,s,a,c]);const v=[{value:"all",label:t("draftHistory.allTypes")},{value:"course_registration",label:t("documentTypes.courseRegistration")},{value:"event_notice",label:t("documentTypes.eventNotice")},{value:"schedule_request",label:t("documentTypes.scheduleRequest")},{value:"schedule_announcement",label:t("documentTypes.scheduleAnnouncement")},{value:"schedule_change",label:t("documentTypes.scheduleChange")},{value:"student_reply",label:t("documentTypes.studentReply")},{value:"holiday_notice",label:t("documentTypes.holidayNotice")},{value:"free_prompt",label:t("documentTypes.freeTextGeneration")}],g=C=>C.replace(/_([a-z])/g,(k,A)=>A.toUpperCase()),y=C=>{if(!C)return"N/A";const k=g(C),A=t(`documentTypes.${k}`);return A&&A!==`documentTypes.${k}`?A:{course_registration:t("documentTypes.courseRegistration"),event_notice:t("documentTypes.eventNotice"),schedule_request:t("documentTypes.scheduleRequest"),schedule_announcement:t("documentTypes.scheduleAnnouncement"),schedule_change:t("documentTypes.scheduleChange"),student_reply:t("documentTypes.studentReply"),holiday_notice:t("documentTypes.holidayNotice"),free_prompt:t("documentTypes.freeTextGeneration"),freeTextGeneration:t("documentTypes.freeTextGeneration"),announcement:t("documentTypes.announcement"),student_notice:t("documentTypes.studentNotice"),meeting_minutes:t("documentTypes.meetingMinutes"),formal_letter:t("documentTypes.formalLetter"),notification:t("documentTypes.notification"),report:t("documentTypes.report"),letter:t("documentTypes.letter"),memo:t("documentTypes.memo"),policy:t("documentTypes.policy"),guideline:t("documentTypes.guideline")}[C]||C||"N/A"},x=C=>{if(!C)return"Untitled Draft";if(C.source){const k=C.source;switch(C.type){case"student_reply":return k.studentName?`Reply to ${k.studentName}`:"Student Reply";case"holiday_notice":return k.holidayName&&k.holidayDate?`${k.holidayName} - ${k.holidayDate}`:k.holidayName?k.holidayName:k.holidayDate?`Holiday - ${k.holidayDate}`:"Holiday Notice";case"course_registration":const A=k.targetAudience||"Students",T=k.startDate||"",z=k.endDate||"";return T&&z?`${A} - ${T} to ${z}`:T?`${A} - From ${T}`:`${A} Registration`;case"event_notice":const _=k.courseName||k.eventName||"",fe=k.eventTime||"";return _&&fe?`${_} - ${fe}`:_||"Event Notice";case"schedule_request":const Rt=k.courseName||"",Oo=k.courseCode||"";return Rt&&Oo?`${Rt} (${Oo}) - Schedule Request`:Rt?`${Rt} - Schedule Request`:"Schedule Request";case"schedule_announcement":const Jt=k.courseName||"";k.courseCode;const vr=k.weeklyTime||"";return Jt&&vr?`${Jt} - ${vr}`:Jt?`${Jt} - Schedule Announcement`:"Schedule Announcement";case"schedule_change":const I=k.courseName||"",F=k.oldTime||"",V=k.newTime||"";return I&&F&&V?`${I} - ${F} → ${V}`:I?`${I} - Schedule Change`:"Schedule Change"}}if(C.type==="freeTextGeneration"&&C.content){const k=C.content.replace(/<[^>]*>/g,"").replace(/<br>/g," "),A=k.split(`
`).filter(z=>z.trim().length>0);for(const z of A){const _=z.trim();if(_.includes("**")||/^[A-Z\s]+$/.test(_)){const fe=_.replace(/\*\*/g,"").trim();if(fe.length>5&&fe.length<80)return fe}if(_.startsWith("Dear ")||_.startsWith("Sehr geehrte ")){const fe=_.match(/(?:Dear|Sehr geehrte)\s+([^,]+)/);if(fe&&fe[1])return`Letter to ${fe[1].trim()}`}if(_.toLowerCase().includes("notice")||_.toLowerCase().includes("bekanntmachung"))return"Notice";if(_.toLowerCase().includes("announcement")||_.toLowerCase().includes("ankündigung"))return"Announcement";if(_.toLowerCase().includes("schedule")||_.toLowerCase().includes("termin"))return"Schedule Information";if(_.toLowerCase().includes("exam")||_.toLowerCase().includes("prüfung"))return"Exam Information";if(_.toLowerCase().includes("course")||_.toLowerCase().includes("kurs"))return"Course Information";if(_.toLowerCase().includes("holiday")||_.toLowerCase().includes("feiertag"))return"Holiday Notice";if(_.toLowerCase().includes("meeting")||_.toLowerCase().includes("sitzung"))return"Meeting Information"}const T=k.split(/[.!?。！？]/).filter(z=>z.trim().length>10);if(T.length>0){const _=T[0].trim().replace(/^\s*[A-Z\s]+\s*/,"");if(_.length>5)return _.length>60?_.substring(0,60)+"...":_}if(C.prompt){const z=C.prompt.trim();if(z.length>0)return z.length>60?z.substring(0,60)+"...":z}}if(C.content){const k=C.content.replace(/<[^>]*>/g,"").replace(/<br>/g," "),A=k.split(/[.!?。！？]/).filter(T=>T.trim().length>0);if(A.length>0){const T=A[0].trim();if(T.length>10)return T.length>60?T.substring(0,60)+"...":T}return k.length>50?k.substring(0,50)+"...":k||"Untitled Draft"}return"Untitled Draft"},w=C=>{if(!C||isNaN(Date.parse(C)))return"-";const k=new Date(C),A=new Date,T=(A-k)/(1e3*60*60);if(T<24)if(T<1){const z=Math.floor((A-k)/6e4);return z<1?t("draftHistory.timeAgo.justNow"):t("draftHistory.timeAgo.minutesAgo",{minutes:z})}else{const z=Math.floor(T);return z===1?t("draftHistory.timeAgo.hourAgo"):t("draftHistory.timeAgo.hoursAgo",{hours:z})}return k.toLocaleString(t("language")==="de"?"de-DE":"en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},N=async C=>{try{const k=document.createElement("div");k.innerHTML=C.replace(/<br>/g,`
`),await navigator.clipboard.writeText(k.innerText),m(!0),setTimeout(()=>{m(!1)},3e3)}catch(k){console.error("Copy failed:",k)}},E=async C=>{await fetch(`/api/drafts/${C}`,{method:"DELETE"});const k=n.filter(A=>A.id!==C);r(k)};return M("div",{className:"max-w-6xl mx-auto space-y-6",children:[p&&M("div",{className:"fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg flex items-center space-x-2 z-50",children:[S(Cl,{className:"h-4 w-4"}),S("span",{children:t("messages.copySuccess")})]}),M("div",{className:"flex items-center justify-between",children:[M("div",{children:[S("h1",{className:"text-3xl font-bold text-neutral-900 mb-2",children:t("draftHistory.title")}),S("p",{className:"text-lg text-neutral-600",children:t("draftHistory.subtitle")})]}),S("div",{className:"flex items-center gap-2",children:S("span",{className:"text-sm text-neutral-500",children:t("draftHistory.totalDrafts",{count:i.length})})})]}),S("div",{className:"card p-6",children:M("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[M("div",{className:"relative",children:[S(lS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),S("input",{type:"text",placeholder:t("draftHistory.search"),value:s,onChange:C=>l(C.target.value),className:"input pl-10 w-full"})]}),M("div",{className:"relative",children:[S(Xx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),S("select",{value:a,onChange:C=>u(C.target.value),className:"select pl-10 w-full",children:v.map(C=>S("option",{value:C.value,children:C.label},C.value))})]}),S("div",{className:"relative",children:M("select",{value:c,onChange:C=>d(C.target.value),className:"select pl-10 w-full",children:[S("option",{value:"newest",children:t("draftHistory.sortBy.newest")}),S("option",{value:"oldest",children:t("draftHistory.sortBy.oldest")}),S("option",{value:"type",children:t("draftHistory.sortBy.type")})]})})]})}),S("div",{className:"space-y-4",children:f?S("div",{className:"card p-12 text-center",children:S(Zn,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4 animate-spin"})}):i.length===0?M("div",{className:"card p-12 text-center",children:[S(bg,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),S("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:t("draftHistory.empty.title")}),S("p",{className:"text-neutral-500 mb-4",children:t(s||a!=="all"?"draftHistory.empty.noResults":"draftHistory.empty.subtitle")}),!s&&a==="all"&&S(on,{to:"/generate/structured",className:"btn-primary",children:t("draftHistory.empty.startGenerating")})]}):i.map(C=>S("div",{className:"card p-6 hover:shadow-md transition-shadow",children:M("div",{className:"flex items-start justify-between",children:[M("div",{className:"flex-1",children:[M("div",{className:"flex items-center gap-3 mb-3",children:[M("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[S(_i,{className:"h-4 w-4 mr-1.5"}),y(C.type)]}),S("span",{className:"text-sm text-neutral-500",children:w(C.createdAt)}),C.updatedAt&&S("span",{className:"text-xs text-neutral-400",children:t("draftHistory.edited")})]}),S("h3",{className:"font-medium text-neutral-900 mb-2",children:x(C)}),S("div",{className:"text-sm text-neutral-600 line-clamp-2 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:(C.content||"").substring(0,200)+"..."}})]}),M("div",{className:"flex items-center gap-2 ml-4",children:[S("button",{onClick:()=>N(C.content),className:"p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded",title:t("actions.copy"),children:S(Nl,{className:"h-5 w-5"})}),S(on,{to:`/draft/${C.id}`,className:"p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded",title:t("actions.edit"),children:S(Tg,{className:"h-5 w-5"})}),S("button",{onClick:()=>E(C.id),className:"p-2 text-neutral-500 hover:text-red-600 hover:bg-red-50 rounded",title:t("actions.delete"),children:S(Dg,{className:"h-5 w-5"})})]})]})},C.id))})]})},Wb=()=>S("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center",children:M("div",{className:"text-center",children:[S("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-tum-blue-600 mx-auto mb-4"}),S("p",{className:"text-neutral-600",children:"Loading..."})]})});class Ub extends me.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Error caught by boundary:",e,n)}render(){return this.state.hasError?S("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center",children:M("div",{className:"text-center max-w-md mx-auto p-6",children:[S("div",{className:"text-red-600 text-6xl mb-4",children:"⚠️"}),S("h1",{className:"text-xl font-bold text-neutral-900 mb-2",children:"Something went wrong"}),S("p",{className:"text-neutral-600 mb-4",children:"We encountered an error while loading the application. Please refresh the page."}),S("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Refresh Page"})]})}):this.props.children}}function qb(){return S(Ub,{children:S(b.Suspense,{fallback:S(Wb,{}),children:S(hS,{children:M(Px,{children:[S(wr,{path:"/",element:S(mS,{})}),S(wr,{path:"/generate/structured",element:S(gS,{})}),S(wr,{path:"/generate/free",element:S(vS,{})}),S(wr,{path:"/draft/:id",element:S(jb,{})}),S(wr,{path:"/history",element:S(Hb,{})})]})})})})}za.createRoot(document.getElementById("root")).render(S(me.StrictMode,{children:S(Fx,{children:S(Hx,{children:S(qb,{})})})}));
